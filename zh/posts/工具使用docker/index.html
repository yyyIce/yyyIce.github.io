<!DOCTYPE html>
<html lang="zh" dir="ltr">

<head prefix="og: http://ogp.me/ns#">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>å·¥å…·ä½¿ç”¨ï¼šDocker â€“ å’¸é±¼å†° | Design &amp; Project</title>
    


  
  <script defer src="/js/fuse.min.8dfbf8696f107ab8b55732efbb04c5c51576692a4a2cce6effef9f6e92d341a7.js"></script>



<script src="/js/enquire.min.aa37bdcb743826eecdae5c5d177fc7d6552340f1b4378ffaa9c82b2c6111400b.js"></script>

<script defer src="/js/lazysizes.min.498676c34eb225e85357ab0ce19c3c1244f3bd0bf595e5684d1b9d50ea4fbc42.js"></script>

<script defer src="/js/helper/getParents.min.1618c696be7c98933f9a92677f518b512a74e55bdbb976b09936b4182e93181b.js"></script>

<script defer src="/js/helper/fadeinout.min.efa35f4c090622130b3f4cfae6971448b5ffb61c5f0a8f21cdfd157fa712abc4.js"></script>

<script defer src="/js/helper/closest.min.js"></script>
  
<script>
  "use strict";

  
  
  if (window.NodeList && !NodeList.prototype.forEach) {
    NodeList.prototype.forEach = Array.prototype.forEach;
  }

  
  if (!String.prototype.includes) {
    String.prototype.includes = function (search, start) {
      'use strict';

      if (search instanceof RegExp) {
        throw TypeError('first argument must not be a RegExp');
      }
      if (start === undefined) { start = 0; }
      return this.indexOf(search, start) !== -1;
    };
  }

  
  Document.prototype.append = Element.prototype.append = function append() {
    this.appendChild(_mutation(arguments));
  };
  function _mutation(nodes) {
    if (!nodes.length) {
      throw new Error('DOM Exception 8');
    } else if (nodes.length === 1) {
      return typeof nodes[0] === 'string' ? document.createTextNode(nodes[0]) : nodes[0];
    } else {
      var
      fragment = document.createDocumentFragment(),
      length = nodes.length,
      index = -1,
      node;

      while (++index < length) {
        node = nodes[index];

        fragment.appendChild(typeof node === 'string' ? document.createTextNode(node) : node);
      }

      return fragment;
    }
  }

  
  if (!String.prototype.startsWith) {
    String.prototype.startsWith = function (searchString, position) {
      position = position || 0;
      return this.indexOf(searchString, position) === position;
    };
  }
  


  document.addEventListener('DOMContentLoaded', function () {
    
    var navCollapseBtn = document.querySelector('.navbar__burger');
    navCollapseBtn ? navCollapseBtn.addEventListener('click', function (e) {
      var navCollapse = document.querySelector('.navbarm__collapse');

      if (navCollapse) {
        var dataOpen = navCollapse.getAttribute('data-open');

        if (dataOpen === 'true') {
          navCollapse.setAttribute('data-open', 'false');
          navCollapse.style.maxHeight = 0;
          navCollapseBtn.classList.remove('is-active');
        } else {
          navCollapse.setAttribute('data-open', 'true');
          navCollapse.style.maxHeight = navCollapse.scrollHeight + "px";
          navCollapseBtn.classList.add('is-active');
        }
      }
    }) : null;
    


    
    var tables = document.querySelectorAll('.single__contents > table');
    for (let i = 0; i < tables.length; i++) {
      var table = tables[i];
      var wrapper = document.createElement('div');
      wrapper.className = 'table-wrapper';
      table.parentElement.replaceChild(wrapper, table);
      wrapper.appendChild(table);
    }
    


    
    var footNoteRefs = document.querySelectorAll('.footnote-ref');
    var footNoteBackRefs = document.querySelectorAll('.footnote-backref');

    footNoteRefs ? 
    footNoteRefs.forEach(function(elem, idx) {
      elem.onmouseenter = function () {
        if (navbar.classList.contains('scrolling')) {
          navbar.classList.remove('scrolling');
        }
      }

      elem.onmouseleave = function () {
        if (!navbar.classList.contains('scrolling')) {
          setTimeout(function () {
            navbar.classList.add('scrolling');
          }, 100);
        }
      }

      elem.onclick = function () {
        if (!navbar.classList.contains('scrolling')) {
          navbar.classList.remove('navbar--show');
          navbar.classList.remove('navbar--hide');
          navbar.classList.add('navbar--hide');
        }
      }
    }) : null;

    footNoteBackRefs ? 
    footNoteBackRefs.forEach(function(elem, idx) {
      elem.onmouseenter = function () {
        if (navbar.classList.contains('scrolling')) {
          navbar.classList.remove('scrolling');
        }
      }

      elem.onmouseleave = function () {
        if (!navbar.classList.contains('scrolling')) {
          setTimeout(function() {
            navbar.classList.add('scrolling');
          }, 100);
        }
      }

      elem.onclick = function () {
        if (!navbar.classList.contains('scrolling')) {
          navbar.classList.remove('navbar--show');
          navbar.classList.remove('navbar--hide');
          navbar.classList.add('navbar--hide');
        }
      }
    }) : null;
    


    
    var summaryContainer = document.querySelector('.summary__container');
    var searchResult = document.querySelector('.search-result');
    var searchResultCloseBtn = document.querySelector('.search-result__close');
    searchResultCloseBtn ? searchResultCloseBtn.addEventListener('click', function (e) {
      searchResult.setAttribute('data-display', 'none');
      summaryContainer.setAttribute('data-display', 'block');
    }) : null;
    


    
    document.querySelectorAll('.tab') ? 
    document.querySelectorAll('.tab').forEach(function(elem, idx) {
      var containerId = elem.getAttribute('id');
      var containerElem = elem;
      var tabLinks = elem.querySelectorAll('.tab__link');
      var tabContents = elem.querySelectorAll('.tab__content');
      var ids = [];

      tabLinks && tabLinks.length > 0 ?
      tabLinks.forEach(function(link, index, self) {
        link.onclick = function(e) {
          for (var i = 0; i < self.length; i++) {
            if (index === parseInt(i, 10)) {
              if (!self[i].classList.contains('active')) {
                self[i].classList.add('active');
                tabContents[i].style.display = 'block';
              }
            } else {
              self[i].classList.remove('active');
              tabContents[i].style.display = 'none';
            }
          }
        }
      }) : null;
    }) : null;
    


    
    document.querySelectorAll('.codetab') ? 
    document.querySelectorAll('.codetab').forEach(function(elem, idx) {
      var containerId = elem.getAttribute('id');
      var containerElem = elem;
      var codetabLinks = elem.querySelectorAll('.codetab__link');
      var codetabContents = elem.querySelectorAll('.codetab__content');
      var ids = [];

      codetabLinks && codetabLinks.length > 0 ?
      codetabLinks.forEach(function(link, index, self) {
        link.onclick = function(e) {
          for (var i = 0; i < self.length; i++) {
            if (index === parseInt(i, 10)) {
              if (!self[i].classList.contains('active')) {
                self[i].classList.add('active');
                codetabContents[i].style.display = 'block';
              }
            } else {
              self[i].classList.remove('active');
              codetabContents[i].style.display = 'none';
            }
          }
        }
      }) : null;
    }) : null;
    


    
    var gttBtn = document.getElementById("gtt");
    gttBtn.style.display = "none";
    gttBtn.addEventListener('click', function () {
      if (window.document.documentMode) {
        document.documentElement.scrollTop = 0;
      } else {
        scrollToTop(250);
      }
    });

    function scrollToTop(scrollDuration) {
      var scrollStep = -window.scrollY / (scrollDuration / 15);
      var scrollInterval = setInterval(function () {
        if (window.scrollY != 0) {
          window.scrollBy(0, scrollStep);
        }
        else clearInterval(scrollInterval);
      }, 15);
    }

    var scrollFunction = function () {
      if (document.body.scrollTop > 250 || document.documentElement.scrollTop > 250) {
        gttBtn.style.display = "block";
      } else {
        gttBtn.style.display = "none";
      }
    }
    


    
    var expandBtn = document.querySelectorAll('.expand__button');

    for (let i = 0; i < expandBtn.length; i++) {
      expandBtn[i].addEventListener("click", function () {
        var content = this.nextElementSibling;
        if (content.style.maxHeight) {
          content.style.maxHeight = null;
          this.querySelector('svg').classList.add('expand-icon__right');
          this.querySelector('svg').classList.remove('expand-icon__down');
        } else {
          content.style.maxHeight = content.scrollHeight + "px";
          this.querySelector('svg').classList.remove('expand-icon__right');
          this.querySelector('svg').classList.add('expand-icon__down');
        }
      });
    }
    


    
    var lastScrollTop = window.pageYOffset || document.documentElement.scrollTop;
    var tocElem = document.querySelector('.toc');
    var tableOfContentsElem = tocElem ? tocElem.querySelector('#TableOfContents') : null;
    var toggleTocElem = document.getElementById('toggle-toc');
    var singleContentsElem = document.querySelector('.single__contents');
    var navbar = document.querySelector('.navbar');
    var tocFlexbox = document.querySelector('.toc__flexbox');
    var tocFlexboxOuter = document.querySelector('.toc__flexbox--outer');
    var expandContents = document.querySelectorAll('.expand__content');
    var boxContents = document.querySelectorAll('.box');
    var notAllowedTitleIds = null;

    
    var tocFolding = JSON.parse("true");
    
    var tocLevels = JSON.parse("[\"h2\",\"h3\",\"h4\"]");
    
    if (tocLevels) {
      tocLevels = tocLevels.toString();
    } else {
      tocLevels = "h1, h2, h3, h4, h5, h6";
    }

    
    singleContentsElem && singleContentsElem.querySelectorAll(".tab") ?
    singleContentsElem.querySelectorAll(".tab").forEach(function (elem) {
      elem.querySelectorAll(tocLevels).forEach(function (element) {
        notAllowedTitleIds = Array.isArray(notAllowedTitleIds) ?
          notAllowedTitleIds.concat(element.getAttribute('id')) :
          [element.getAttribute('id')];
      });
    }) : null;

    
    expandContents ? expandContents.forEach(function(elem) {
      elem.querySelectorAll(tocLevels).forEach(function (element) {
        notAllowedTitleIds = Array.isArray(notAllowedTitleIds) ?
          notAllowedTitleIds.concat(element.getAttribute('id')) :
          [element.getAttribute('id')];
      });
    }) : null;

    
    boxContents ? boxContents.forEach(function(elem) {
      elem.querySelectorAll(tocLevels).forEach(function (element) {
        notAllowedTitleIds = Array.isArray(notAllowedTitleIds) ?
          notAllowedTitleIds.concat(element.getAttribute('id')) :
          [element.getAttribute('id')];
      });
    }) : null;

    
    window.onscroll = function () {
      scrollFunction();
      
      var st = window.pageYOffset || document.documentElement.scrollTop;
      if (st > lastScrollTop) { 
        if (st < 250) {
          gttBtn.style.display = "none";
        } else {
          gttBtn.style.display = "block";
        }

        if (st < 45) {
          return null;
        }

        if (navbar.classList.contains('scrolling')) {
          if (!navbar.classList.contains('navbar--hide')) {
            navbar.classList.add('navbar--hide');
          } else if (navbar.classList.contains('navbar--show')) {
            navbar.classList.remove('navbar--show');
          }
        }

        if (singleContentsElem) {
          if (singleContentsElem.querySelectorAll(tocLevels).length > 0) {
            singleContentsElem.querySelectorAll(tocLevels).forEach(function (elem) {
              if (toggleTocElem && !toggleTocElem.checked) {
                return null;
              }

              if (notAllowedTitleIds && notAllowedTitleIds.includes(elem.getAttribute('id'))) {
                return null;
              }
              
              if (document.documentElement.scrollTop >= elem.offsetTop) {
                if (tableOfContentsElem) {
                  var id = elem.getAttribute('id');
                  tocElem.querySelectorAll('a').forEach(function (elem) {
                    elem.classList.remove('active');
                  });
                  tocElem.querySelector('a[href="#' + id + '"]') ?
                    tocElem.querySelector('a[href="#' + id + '"]').classList.add('active') : null;

                  if (false === tocFolding) {
                    
                  } else {
                    tableOfContentsElem.querySelectorAll('ul') ?
                      tableOfContentsElem.querySelectorAll('ul').forEach(function (rootUl) {
                        rootUl.querySelectorAll('li').forEach(function (liElem) {
                          liElem.querySelectorAll('ul').forEach(function (ulElem) {
                            ulElem.style.display = 'none';
                          });
                        });
                      }) : null;
                  }

                  var curElem = tableOfContentsElem.querySelector("[href='#" + id + "']");
                  if (curElem && curElem.nextElementSibling) {
                    curElem.nextElementSibling.style.display = 'block';
                  }
                  getParents(curElem, 'ul') ?
                    getParents(curElem, 'ul').forEach(function (elem) {
                      elem.style.display = 'block';
                    }) : null;
                }
              }
            });
          } else {
            if (tocFlexbox) {
              tocFlexbox.setAttribute('data-position', '');
              if (!tocFlexbox.classList.contains('hide')) {
                tocFlexbox.classList.add('hide');
              }
            }
            if (tocFlexboxOuter) {
              tocFlexboxOuter.setAttribute('data-position', '');
              if (!tocFlexboxOuter.classList.contains('hide')) {
                tocFlexboxOuter.classList.add('hide');
              }
            }
          }
        }
      } else { 
        if (st < 250) {
          gttBtn.style.display = "none";
        }

        if (navbar.classList.contains('scrolling')) {
          if (navbar.classList.contains('navbar--hide')) {
            navbar.classList.remove('navbar--hide');
          } else if (!navbar.classList.contains('navbar--show')) {
            navbar.classList.add('navbar--show');
          }
        }

        if (singleContentsElem) {
          if (singleContentsElem.querySelectorAll(tocLevels).length > 0) {
            singleContentsElem.querySelectorAll(tocLevels).forEach(function (elem) {
              if (toggleTocElem && !toggleTocElem.checked) {
                return null;
              }
              
              if (notAllowedTitleIds && notAllowedTitleIds.includes(elem.getAttribute('id'))) {
                return null;
              }

              if (document.documentElement.scrollTop >= elem.offsetTop) {
                if (tableOfContentsElem) {
                  var id = elem.getAttribute('id');
                  tocElem.querySelectorAll('a').forEach(function (elem) {
                    elem.classList.remove('active');
                  });
                  tocElem.querySelector('a[href="#' + id + '"]') ?
                    tocElem.querySelector('a[href="#' + id + '"]').classList.add('active') : null;

                  if (false === tocFolding) {
                    
                  } else {
                    tableOfContentsElem.querySelectorAll('ul') ?
                      tableOfContentsElem.querySelectorAll('ul').forEach(function (rootUl) {
                        rootUl.querySelectorAll('li').forEach(function (liElem) {
                          liElem.querySelectorAll('ul').forEach(function (ulElem) {
                            ulElem.style.display = 'none';
                          });
                        });
                      }) : null;
                  }

                  var curElem = tableOfContentsElem.querySelector("[href='#" + id + "']");
                  if (curElem && curElem.nextElementSibling) {
                    curElem.nextElementSibling.style.display = 'block';
                  }
                  getParents(curElem, 'ul') ?
                    getParents(curElem, 'ul').forEach(function (elem) {
                      elem.style.display = 'block';
                    }) : null;
                }
              }
            });
          } else {
            if (tocFlexbox && !tocFlexbox.classList.contains('hide')) {
              tocFlexbox.classList.add('hide');
            }
            if (tocFlexboxOuter && !tocFlexboxOuter.classList.contains('hide')) {
              tocFlexboxOuter.classList.add('hide');
            }
          }
          
        }

        if (tableOfContentsElem && document.documentElement.scrollTop < 250) {
          if (false === tocFolding) {

          } else {
            tableOfContentsElem.querySelector('ul') ?
              tableOfContentsElem.querySelector('ul').querySelectorAll('li').forEach(function (liElem) {
                liElem.querySelectorAll('ul').forEach(function (ulElem) {
                  ulElem.style.display = 'none';
                });
              }) : null;
          }
        }
      }
      lastScrollTop = st <= 0 ? 0 : st;
    };
  


  
    var localTheme = localStorage.getItem('theme');
    var rootEleme = document.getElementById('root');
    var selectThemeElem = document.querySelectorAll('.select-theme');
    var selectThemeItemElem = document.querySelectorAll('.select-theme__item');
    
    
    var skinDarkCode = JSON.parse("\"dark\"");
    
    var skinLightCode = JSON.parse("\"light\"");
    
    var skinHackerCode = JSON.parse("\"hacker\"");
    
    var skinSolarizedCode = JSON.parse("\"solarized\"");
    
    var skinKimbieCode = JSON.parse("\"kimbie\"");

    var setMetaColor = function(themeColor) {
      var metaMsapplicationTileColor = document.getElementsByName('msapplication-TileColor')[0];
      var metaThemeColor = document.getElementsByName('theme-color')[0];
      var metaMsapplicationNavbuttonColor = document.getElementsByName('msapplication-navbutton-color')[0];
      var metaAppleMobileWebAappStatusBarStyle = document.getElementsByName('apple-mobile-web-app-status-bar-style')[0];

      if (themeColor.includes('dark')) {
        metaMsapplicationTileColor.setAttribute('content', '#fcfcfa');
        metaThemeColor.setAttribute('content', '#403E41');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#403E41');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#403E41');
      } else if (themeColor.includes('light')) {
        metaMsapplicationTileColor.setAttribute('content', '#555');
        metaThemeColor.setAttribute('content', '#eee');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#eee');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#eee');
      } else if (themeColor.includes('hacker')) {
        metaMsapplicationTileColor.setAttribute('content', '#e3cd26');
        metaThemeColor.setAttribute('content', '#252526');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#252526');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#252526');
      } else if (themeColor.includes('solarized')) {
        metaMsapplicationTileColor.setAttribute('content', '#d3af86');
        metaThemeColor.setAttribute('content', '#51412c');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#51412c');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#51412c');
      } else if (themeColor.includes('kimbie')) {
        metaMsapplicationTileColor.setAttribute('content', '#586e75');
        metaThemeColor.setAttribute('content', '#eee8d5');
        metaMsapplicationNavbuttonColor.setAttribute('content', '#eee8d5');
        metaAppleMobileWebAappStatusBarStyle.setAttribute('content', '#eee8d5');
      }
    }

    var parseSkinCode = function(themeText) {
      if (themeText === skinDarkCode) {
        return 'dark';
      } else if (themeText === skinLightCode) {
        return 'light';
      } else if (themeText === skinHackerCode) {
        return 'hacker';
      } else if (themeText === skinSolarizedCode) {
        return 'solarized';
      } else if (themeText === skinKimbieCode) {
        return 'kimbie';
      }
    }
    
    if (localTheme) {
      selectThemeItemElem ? 
      selectThemeItemElem.forEach(function (elem) {
        if (elem.text.trim() === localTheme) {
          elem.classList.add('is-active');
        } else {
          elem.classList.remove('is-active');
        }
      }) : null;

      setMetaColor(localTheme);
    } else {
      setMetaColor(rootEleme.className);
    }

    selectThemeItemElem ? 
    selectThemeItemElem.forEach(function (v, i) {
      v.addEventListener('click', function (e) {
        var selectedThemeVariant = parseSkinCode(e.target.text.trim());
        localStorage.setItem('theme', selectedThemeVariant);
        setMetaColor(selectedThemeVariant);

        rootEleme.removeAttribute('class');
        rootEleme.classList.add('theme__' + selectedThemeVariant);
        selectThemeElem.forEach(function(rootElem) {
          rootElem.querySelectorAll('a').forEach(function (elem) {
            if (elem.classList) {
              if (elem.text.trim() === selectedThemeVariant) {
                if (!elem.classList.contains('is-active')) {
                  elem.classList.add('is-active');
                }
              } else {
                if (elem.classList.contains('is-active')) {
                  elem.classList.remove('is-active');
                }
              }
            }
          });
        });

        if (window.mermaid) {
          if (selectedThemeVariant === "dark" || selectedThemeVariant === "hacker") {
            mermaid.initialize({ theme: 'dark' });
            location.reload();
          } else {
            mermaid.initialize({ theme: 'default' });
            location.reload();
          }
        }

        var utterances = document.getElementById('utterances');
        if (utterances) {
          utterances.querySelector('iframe').contentWindow.postMessage({
            type: 'set-theme',
            theme: selectedThemeVariant === "dark" || selectedThemeVariant === "hacker" ? 'photon-dark' : selectedThemeVariant === 'kimbie' ? 'github-dark-orange' : 'github-light',
          }, 'https://utteranc.es');
        }

        var twitterCards = document.querySelectorAll('.twitter-timeline');
        if (twitterCards) {
          window.postMessage({
            type: 'set-twitter-theme',
            theme: selectedThemeVariant === 'light' || selectedThemeVariant === 'solarized' ? 'light' : 'dark',
          });
        }
      });
    }) : null;
  


  
    
    var baseurl = JSON.parse("\"https://yyyIce.github.io/\"");
    
    var permalink = JSON.parse("\"https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8docker/\"");
    
    var langprefix = JSON.parse("\"/zh\"");
    var searchResults = null;
    var searchMenu = null;
    var searchText = null;
    
    
    var enableSearch = JSON.parse("true");
    
    var enableSearchHighlight = JSON.parse("true");
    
    var searchResultPosition = JSON.parse("\"main\"");
    
    var sectionType = JSON.parse("\"posts\"");
    
    var kind = JSON.parse("\"page\"");
    
    var fuse = null;

    if (enableSearch) {
      (function initFuse() {
        var xhr = new XMLHttpRequest();
        if (sectionType === "publication" && kind !== "page") {
          xhr.open('GET', permalink + "index.json");
        } else {
          xhr.open('GET', baseurl + langprefix + "/index.json");
        }
        
        xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        xhr.onload = function () {
          if (xhr.status === 200) {
            fuse = new Fuse(JSON.parse(xhr.response.toString('utf-8')), {
              keys: sectionType.includes('publication') ? ['title', 'abstract'] : ['title', 'description', 'content'],
              includeMatches: enableSearchHighlight,
              shouldSort: true, 
              threshold: 0.4, 
              location: 0, 
              distance: 100, 
              maxPatternLength: 32,
              minMatchCharLength: 1,
              isCaseSensitive: false, 
              findAllMatches: false, 
              useExtendedSearch: false, 
            });
            window.fuse = fuse;
          }
          else {
            console.error('[' + xhr.status + ']Error:', xhr.statusText);
          }
        };
        xhr.send();
      })();
    }

    function makeLi(ulElem, obj) {
      var li = document.createElement('li');
      li.className = 'search-result__item';
      
      var a = document.createElement('a');
      a.innerHTML = obj.item.title;
      a.setAttribute('class', 'search-result__item--title');
      a.setAttribute('href', obj.item.permalink);

      var descDiv = document.createElement('div');
      descDiv.setAttribute('class', 'search-result__item--desc');
      if (obj.item.description) {
        descDiv.innerHTML = obj.item.description;
      } else if (obj.item.content) {
        descDiv.innerHTML = obj.item.content.substring(0, 225);
      }
      
      li.appendChild(a);
      li.appendChild(descDiv);
      ulElem.appendChild(li);
    }

    function makeHighlightLi(ulElem, obj) {
      var li = document.createElement('li');
      li.className = 'search-result__item';
      var descDiv = null;

      var a = document.createElement('a');
      a.innerHTML = obj.item.title;
      a.setAttribute('class', 'search-result__item--title');
      a.setAttribute('href', obj.item.uri);

      if (obj.matches && obj.matches.length) {
        for (var i = 0; i < obj.matches.length; i++) {
          if ('title' === obj.matches[i].key) {
            a = document.createElement('a');
            a.innerHTML = generateHighlightedText(obj.matches[i].value, obj.matches[i].indices);
            a.setAttribute('class', 'search-result__item--title');
            a.setAttribute('href', obj.item.uri);
          }
          
          if ('description' === obj.matches[i].key) {
            descDiv = document.createElement('div');
            descDiv.setAttribute('class', 'search-result__item--desc');
            descDiv.innerHTML = generateHighlightedText(obj.item.description, obj.matches[i].indices);
          } else if ('content' === obj.matches[i].key) {
            if (!descDiv) {
              descDiv = document.createElement('div');
              descDiv.setAttribute('class', 'search-result__item--desc');
              descDiv.innerHTML = generateHighlightedText(obj.item.content.substring(0, 150), obj.matches[i].indices);
            }
          } else {
            if (obj.item.description) {
              descDiv = document.createElement('div');
              descDiv.setAttribute('class', 'search-result__item--desc');
              descDiv.innerHTML = obj.item.description;
            } else {
              descDiv = document.createElement('div');
              descDiv.setAttribute('class', 'search-result__item--desc');
              descDiv.innerHTML = obj.item.content.substring(0, 150);
            }
          }
        }

        li.appendChild(a);
        if (descDiv) {
          li.appendChild(descDiv);
        }
        if (li) {
          ulElem.appendChild(li);
        }
      }
    }

    function renderSearchResultsSide(searchText, results) {
      searchResults = document.getElementById('search-results');
      searchMenu = document.getElementById('search-menu');
      searchResults.setAttribute('class', 'dropdown is-active');
      
      var ul = document.createElement('ul');
      ul.setAttribute('class', 'dropdown-content search-content');

      if (results.length) {
        results.forEach(function (result) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          a.setAttribute('href', result.uri);
          a.setAttribute('class', 'dropdown-item');
          a.appendChild(li);

          var titleDiv = document.createElement('div');
          titleDiv.innerHTML = result.title;
          titleDiv.setAttribute('class', 'menu-item__title');

          var descDiv = document.createElement('div');
          descDiv.setAttribute('class', 'menu-item__desc');
          if (result.description) {
            descDiv.innerHTML = result.description;
          } else if (result.content) {
            descDiv.innerHTML = result.content.substring(0, 150);
          }

          li.appendChild(titleDiv);
          li.appendChild(descDiv);
          ul.appendChild(a);
        });
      } else {
        var li = document.createElement('li');
        li.setAttribute('class', 'dropdown-item');
        li.innerText = 'No results found';
        ul.appendChild(li);
      }

      while (searchMenu.hasChildNodes()) {
        searchMenu.removeChild(
          searchMenu.lastChild
        );
      }
      
      searchMenu.appendChild(ul);
    }

    function renderSearchHighlightResultsSide(searchText, results) {
      searchResults = document.getElementById('search-results');
      searchMenu = document.getElementById('search-menu');
      searchResults.setAttribute('class', 'dropdown is-active');

      var ul = document.createElement('ul');
      ul.setAttribute('class', 'dropdown-content search-content');

      if (results.length) {
        results.forEach(function (result) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          var descDiv = null;

          a.setAttribute('href', result.item.uri);
          a.setAttribute('class', 'dropdown-item');
          a.appendChild(li);

          var titleDiv = document.createElement('div');
          titleDiv.innerHTML = result.item.title;
          titleDiv.setAttribute('class', 'menu-item__title');
          
          if (result.matches && result.matches.length) {
            for (var i = 0; i < result.matches.length; i++) {
              if ('title' === result.matches[i].key) {
                titleDiv.innerHTML = generateHighlightedText(result.matches[i].value, result.matches[i].indices);
              }

              if ('description' === result.matches[i].key) {
                descDiv = document.createElement('div');
                descDiv.setAttribute('class', 'menu-item__desc');
                descDiv.innerHTML = generateHighlightedText(result.item.description, result.matches[i].indices);
              } else if ('content' === result.matches[i].key) {
                if (!descDiv) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'menu-item__desc');
                  descDiv.innerHTML = generateHighlightedText(result.item.content.substring(0, 150), result.matches[i].indices);
                }
              } else {
                if (result.item.description) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'menu-item__desc');
                  descDiv.innerHTML = result.item.description;
                } else {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'menu-item__desc');
                  descDiv.innerHTML = result.item.content.substring(0, 150);
                }
              }
            }
            
            li.appendChild(titleDiv);
            if (descDiv) {
              li.appendChild(descDiv);
            }
            ul.appendChild(a);
          }
        });
      } else {
        var li = document.createElement('li');
        li.setAttribute('class', 'dropdown-item');
        li.innerText = 'No results found';
        ul.appendChild(li);
      }

      while (searchMenu.hasChildNodes()) {
        searchMenu.removeChild(
          searchMenu.lastChild
        );
      }
      searchMenu.appendChild(ul);
    }

    function renderSearchResultsMobile(searchText, results) {
      searchResults = document.getElementById('search-mobile-results');

      var content = document.createElement('div');
      content.setAttribute('class', 'mobile-search__content');

      if (results.length > 0) {
        results.forEach(function (result) {
          var item = document.createElement('a');
          item.setAttribute('href', result.uri);
          item.innerHTML = '<div class="mobile-search__item"><div class="mobile-search__item--title">ðŸ“„ ' + result.title + '</div><div class="mobile-search__item--desc">' + (result.description ? result.description : result.content) + '</div></div>';
          content.appendChild(item);
        });
      } else {
        var item = document.createElement('span');
        content.appendChild(item);
      }

      let wrap = document.getElementById('search-mobile-results');
      while (wrap.firstChild) {
        wrap.removeChild(wrap.firstChild)
      }
      searchResults.appendChild(content);      
    }

    function renderSearchHighlightResultsMobile(searchText, results) {
      searchResults = document.getElementById('search-mobile-results');

      var ul = document.createElement('div');
      ul.setAttribute('class', 'mobile-search__content');

      if (results.length) {
        results.forEach(function (result) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          var descDiv = null;

          a.setAttribute('href', result.item.uri);
          a.appendChild(li);
          li.setAttribute('class', 'mobile-search__item');

          var titleDiv = document.createElement('div');
          titleDiv.innerHTML = result.item.title;
          titleDiv.setAttribute('class', 'mobile-search__item--title');
          
          if (result.matches && result.matches.length) {
            for (var i = 0; i < result.matches.length; i++) {
              if ('title' === result.matches[i].key) {
                titleDiv.innerHTML = generateHighlightedText(result.matches[i].value, result.matches[i].indices);
              }

              if ('description' === result.matches[i].key) {
                descDiv = document.createElement('div');
                descDiv.setAttribute('class', 'mobile-search__item--desc');
                descDiv.innerHTML = generateHighlightedText(result.item.description, result.matches[i].indices);
              } else if ('content' === result.matches[i].key) {
                if (!descDiv) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'mobile-search__item--desc');
                  descDiv.innerHTML = generateHighlightedText(result.item.content.substring(0, 150), result.matches[i].indices);
                }
              } else {
                if (result.item.description) {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'mobile-search__item--desc');
                  descDiv.innerHTML = result.item.description;
                } else {
                  descDiv = document.createElement('div');
                  descDiv.setAttribute('class', 'mobile-search__item--desc');
                  descDiv.innerHTML = result.item.content.substring(0, 150);
                }
              }
            }
            
            li.appendChild(titleDiv);
            if (descDiv) {
              li.appendChild(descDiv);
            }
            ul.appendChild(a);
          }
        });
      } else {
        var item = document.createElement('span');
        ul.appendChild(item);
      }

      let wrap = document.getElementById('search-mobile-results');
      while (wrap.firstChild) {
        wrap.removeChild(wrap.firstChild)
      }
      searchResults.appendChild(ul);
    }

    function generateHighlightedText(text, regions) {
      if (!regions) {
        return text;
      }

      var content = '', nextUnhighlightedRegionStartingIndex = 0;

      regions.forEach(function(region) {
        if (region[0] === region[1]) {
          return null;
        }
        
        content += '' +
          text.substring(nextUnhighlightedRegionStartingIndex, region[0]) +
          '<span class="search__highlight">' +
            text.substring(region[0], region[1] + 1) +
          '</span>' +
        '';
        nextUnhighlightedRegionStartingIndex = region[1] + 1;
      });

      content += text.substring(nextUnhighlightedRegionStartingIndex);

      return content;
    };

    var searchElem = document.getElementById('search');
    var searchMobile = document.getElementById('search-mobile');
    var searchResultsContainer = document.getElementById('search-results');

    searchElem ?
    searchElem.addEventListener('input', function(e) {
      if (!e.target.value | window.innerWidth < 770) {
        searchResultsContainer ? searchResultsContainer.setAttribute('class', 'dropdown') : null;
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      
      if (searchResultPosition === "main") {
        if (enableSearchHighlight) {
          renderSearchHighlightResultsMain(searchText, results);
        } else {
          renderSearchResultsMain(searchText, results);
        }
      } else {
        if (enableSearchHighlight) {
          renderSearchHighlightResultsSide(searchText, results);
        } else {
          renderSearchResultsSide(searchText, results);
        }
        
        var dropdownItems = searchResultsContainer.querySelectorAll('.dropdown-item');
        dropdownItems ? dropdownItems.forEach(function(item) {
          item.addEventListener('mousedown', function(e) {
            e.target.click();
          });
        }) : null;
      }
    }) : null;

    searchElem ? 
    searchElem.addEventListener('blur', function() {
      if (window.innerWidth < 770) {
        return null;
      }
      searchResultsContainer ? searchResultsContainer.setAttribute('class', 'dropdown') : null;
    }) : null;

    searchElem ? 
    searchElem.addEventListener('click', function(e) {
      if (window.innerWidth < 770) {
        return null;
      }
      if (!e.target.value) {
        searchResultsContainer ? searchResultsContainer.setAttribute('class', 'dropdown') : null;
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);

      if (searchResultPosition === "main") {
        if (enableSearchHighlight) {
          renderSearchHighlightResultsMain(searchText, results);
        } else {
          renderSearchResultsMain(searchText, results);
        }
      } else{
        if (enableSearchHighlight) {
          renderSearchHighlightResultsSide(searchText, results);
        } else {
          renderSearchResultsSide(searchText, results);
        }

        var dropdownItems = searchResultsContainer.querySelectorAll('.dropdown-item');
        dropdownItems ? dropdownItems.forEach(function (item) {
          item.addEventListener('mousedown', function (e) {
            e.target.click();
          });
        }) : null;
      }
    }) : null;

    var searchMenuElem = document.getElementById("search-menu");
    var activeItem = document.querySelector('#search-menu .dropdown-item.is-active');
    var activeIndex = null;
    var items = null;
    var searchContainerMaxHeight = 350;

    searchElem ? 
    searchElem.addEventListener('keydown', function(e) {
      if (window.innerWidth < 770) {
        return null;
      }

      if (e.key === 'Escape') {
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
      }

      var items = document.querySelectorAll('#search-menu .dropdown-item');
      var keyCode = e.which || e.keyCode;

      if (!items || !items.length) {
        return null;
      }
      
      if (e.key === 'ArrowDown' || keyCode === 40) {
        if (activeIndex === null) {
          activeIndex = 0;
          items[activeIndex].classList.remove('is-active');
        } else {
          items[activeIndex].classList.remove('is-active');
          activeIndex = activeIndex === items.length - 1 ? 0 : activeIndex + 1;
        }
        items[activeIndex].classList.add('is-active');

        let overflowedPixel = items[activeIndex].offsetTop + items[activeIndex].clientHeight - searchContainerMaxHeight;
        if (overflowedPixel > 0) {
          document.querySelector(".search-content").scrollTop += items[activeIndex].getBoundingClientRect().height;
        } else if (activeIndex === 0) {
          document.querySelector(".search-content").scrollTop = 0;
        }
      } else if (e.key === 'ArrowUp' || keyCode === 38) {
        if (activeIndex === null) {
          activeIndex = items.length - 1;
          items[activeIndex].classList.remove('is-active');
        } else {
          items[activeIndex].classList.remove('is-active');
          activeIndex = activeIndex === 0 ? items.length - 1 : activeIndex - 1;
        }
        items[activeIndex].classList.add('is-active');
        
        let overflowedPixel = items[activeIndex].offsetTop + items[activeIndex].clientHeight - searchContainerMaxHeight;
        if (overflowedPixel < 0) {
          document.querySelector(".search-content").scrollTop -= items[activeIndex].getBoundingClientRect().height;
        } else {
          document.querySelector(".search-content").scrollTop = overflowedPixel + items[activeIndex].getBoundingClientRect().height;
        }
      } else if (e.key === 'Enter' || keyCode === 13) {
        if (items[activeIndex] && items[activeIndex].getAttribute('href')) {
          location.href = items[activeIndex].getAttribute('href');
        }
      } else if (e.key === 'Escape' || keyCode === 27) {
        e.target.value = null;
        if (searchResults) {
          searchResults.classList.remove('is-active');
        }
      }
    }) : null;

    searchMobile ? 
    searchMobile.addEventListener('input', function(e) {
      if (!e.target.value) {
        let wrap = document.getElementById('search-mobile-results');
        while (wrap.firstChild) {
          wrap.removeChild(wrap.firstChild);
        }
        return null;
      }

      searchText = e.target.value;
      var results = fuse.search(e.target.value);
      renderSearchResultsMobile(searchText, results);
      if (enableSearchHighlight) {
        renderSearchHighlightResultsMobile(searchText, results);
      } else {
        renderSearchResultsMobile(searchText, results);
      }
    }) : null;
  


  
    var mobileSearchInputElem = document.querySelector('#search-mobile');
    var mobileSearchClassElem = document.querySelector('.mobile-search');
    var mobileSearchBtnElems = document.querySelectorAll('.navbar-search');
    var mobileSearchCloseBtnElem = document.querySelector('#search-mobile-close');
    var mobileSearchContainer = document.querySelector('#search-mobile-container');
    var mobileSearchResultsElem = document.querySelector('#search-mobile-results');
    var htmlElem = document.querySelector('html');

    if (mobileSearchClassElem) {
      mobileSearchClassElem.style.display = 'none';
    }

    mobileSearchBtnElems ? 
    mobileSearchBtnElems.forEach(function (elem, idx) {
      elem.addEventListener('click', function () {
        if (mobileSearchContainer) {
          mobileSearchContainer.style.display = 'block';
        }

        if (mobileSearchInputElem) {
          mobileSearchInputElem.focus();
        }

        if (htmlElem) {
          htmlElem.style.overflowY = 'hidden';
        }
      });
    }) : null;

    mobileSearchCloseBtnElem ? 
    mobileSearchCloseBtnElem.addEventListener('click', function() {
      if (mobileSearchContainer) {
        mobileSearchContainer.style.display = 'none';
      }

      if (mobileSearchInputElem) {
        mobileSearchInputElem.value = '';
      }
      
      if (mobileSearchResultsElem) {
        while (mobileSearchResultsElem.firstChild) {
          mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);
        }
      }

      if (htmlElem) {
        htmlElem.style.overflowY = 'visible';
      }
    }) : null;

    mobileSearchInputElem ?
    mobileSearchInputElem.addEventListener('keydown', function(e) {
      var keyCode = e.which || e.keyCode;
      if (e.key === 'Escape' || keyCode === 27) {
        if (mobileSearchContainer) {
          mobileSearchContainer.style.display = 'none';
        }
        
        if (mobileSearchInputElem) {
          mobileSearchInputElem.value = '';
        }

        if (mobileSearchResultsElem) {
          while (mobileSearchResultsElem.firstChild) {
            mobileSearchResultsElem.removeChild(mobileSearchResultsElem.firstChild);
          }
        }
        if (htmlElem) {
          htmlElem.style.overflowY = 'visible';
        }
      }
    }) : null;
  


  
    function renderSearchResultsMain(searchText, results) {
      var searchBody = document.querySelector('.search-result__body');
      var originUl = searchBody.querySelector('ul');
      var ul = document.createElement('ul');
      
      if (!searchText) {
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
      } else if (results) {
        if (results && results.length) {
          results.forEach(function (result) {
            makeLi(ul, result);
          });

          searchResult ? searchResult.setAttribute('data-display', 'block') : null;
          summaryContainer ? summaryContainer.setAttribute('data-display', 'none') : null;
        }
      }

      originUl.parentNode.replaceChild(ul, originUl);
    }

    function renderSearchHighlightResultsMain(searchText, results) {
      var searchBody = document.querySelector('.search-result__body');
      var originUl = searchBody.querySelector('ul');
      var ul = document.createElement('ul');

      if (!searchText) {
        searchResult ? searchResult.setAttribute('data-display', 'none') : null;
        summaryContainer ? summaryContainer.setAttribute('data-display', 'block') : null;
      } else if (results) {
        if (results && results.length) {
          results.forEach(function (result) {
            makeHighlightLi(ul, result);
          });

          searchResult ? searchResult.setAttribute('data-display', 'block') : null;
          summaryContainer ? summaryContainer.setAttribute('data-display', 'none') : null;
        }
      }

      originUl.parentNode.replaceChild(ul, originUl);
    }
  
  });
</script>    
    


<link rel="stylesheet" href="/css/main.min.css">


    
<meta name="description" content="Dockerçš„å­¦ä¹ ä¸Žä½¿ç”¨ï¼Œå°†é…ç½®å¥½çš„çŽ¯å¢ƒæ‰“åŒ…æˆDockerã€‚" />


<meta name="keywords" content="è™šæ‹ŸåŒ–">

<meta name="created" content="2021-09-08T12:00:06&#43;0900">
<meta name="modified" content="2021-09-08T12:00:06&#43;0900">
<meta property="article:published_time" content="2021-09-08T12:00:06&#43;0900">

<meta name="author" content="å’¸é±¼å†°">
<meta property="article:author" content="https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8docker/@å’¸é±¼å†°">


<meta property="og:site_name" content="å’¸é±¼å†° | Design &amp; Project">
<meta property="og:title" content="å·¥å…·ä½¿ç”¨ï¼šDocker">
<meta property="og:url" content="https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8docker/">
<meta property="og:type" content="article">
<meta property="og:description" content="Dockerçš„å­¦ä¹ ä¸Žä½¿ç”¨ï¼Œå°†é…ç½®å¥½çš„çŽ¯å¢ƒæ‰“åŒ…æˆDockerã€‚">

  
    <meta property="og:image" content="https://yyyIce.github.io/images/feature3/chilun.png">
    <meta property="og:image:url" content="https://yyyIce.github.io/images/feature3/chilun.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:app:name:iphone" content="å’¸é±¼å†° | Design &amp; Project">
    <meta property="twitter:title" content="å·¥å…·ä½¿ç”¨ï¼šDocker">
    <meta property="twitter:description" content="Dockerçš„å­¦ä¹ ä¸Žä½¿ç”¨ï¼Œå°†é…ç½®å¥½çš„çŽ¯å¢ƒæ‰“åŒ…æˆDockerã€‚">
  

<meta name="generator" content="Hugo 0.78.1" />
<meta name="msapplication-TileColor" content="#fff">

<meta name="theme-color" content="#fff">

<meta name="msapplication-navbutton-color" content="#fff">

<meta name="apple-mobile-web-app-status-bar-style" content="#fff">

<link rel="canonical" href="https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8docker/">

<link rel="manifest" href="/manifest.json">

  <link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon/android-icon-512x512.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">


    <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "headline": "å·¥å…·ä½¿ç”¨ï¼šDocker",
    "datePublished": "2021-09-08T12:00:06+09:00",
    "dateModified": "2021-09-08T12:00:06+09:00",
    "url" : "https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8docker/",
    "description": "Dockerçš„å­¦ä¹ ä¸Žä½¿ç”¨ï¼Œå°†é…ç½®å¥½çš„çŽ¯å¢ƒæ‰“åŒ…æˆDockerã€‚",
    "keywords": ["è™šæ‹ŸåŒ–"],
    "image" : "https://yyyIce.github.io/images/feature3/chilun.png",
    "author": {
      "@type": "Person",
      "name": "å’¸é±¼å†°"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://yyyIce.github.io/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "å’¸é±¼å†° | Design \u0026 Project",
      "url": "https://yyyIce.github.io/"
    }
  }
</script>

    
  
  







  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    
</head>

    


<body id="root" class="theme__dark">
    <script>
        var localTheme = localStorage.getItem('theme');
        if (localTheme) {
            document.getElementById('root').className = 'theme__' + localTheme;
        }
    </script>
    <div id="container">
        





        <div class="wrapper" data-type="posts" data-kind="page">
            <nav class="navbar scrolling" role="navigation" aria-label="main navigation" data-dir="ltr">
  <div class="navbar__brand">
    
    <a href="/zh/" title="ä¸»é¡µ" rel="home" class="navbar__logo-link">
      <img src="/logo.png" alt="Home" class="navbar__logo">
    </a>
    
    
      <a href="/zh/" title="ä¸»é¡µ" rel="home" class="navbar__title-link">
        <h6 class="navbar__title">Ice</h6>
      </a>
    
  </div>

  
<div class="theme theme-mobile" data-ani="true">
  <div class="dropdown">
    <button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" style="" data-ani="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentColor" d="M6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19 0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41 0L6.34 7.93zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg>      
    </button>
    <div class="dropdown-content select-theme">
      
        
        <a href="#" class="dropdown-item select-theme__item is-active">
          dark
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          light
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          hacker
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          solarized
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          kimbie
        </a>
        
      
    </div>
  </div>
</div>


<div class="mobile-search__btn navbar-search" data-ani="true">
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
</div>

<div id="search-mobile-container" class="mobile-search hide" data-dir="ltr">
  <div class="mobile-search__top">
    <input id="search-mobile" type="text" aria-label="Mobile Search" placeholder="æœç´¢" class="mobile-search__top--input"/>
    <div id="search-mobile-close" class="mobile-search__top--icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path opacity=".87" fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"/></svg>
    </div>
  </div>
  <div id="search-mobile-results" class="mobile-search__body">
    
  </div>
</div>


<a role="button" class="navbar__burger" aria-label="menu" aria-expanded="false"
  data-ani="true">
  <span aria-hidden="true"></span>
  <span aria-hidden="true"></span>
  <span aria-hidden="true"></span>
</a>
<div class="navbarm__collapse" data-open="false">
  <ul dir="ltr">
    
    
      
      
      
      

      
        <li class="navbarm__menu--item ">
          <a href="/zh/about">å…³äºŽæˆ‘</a>
        </li>
      
      
    
      
      
      
      

      
        <li class="navbarm__menu--item ">
          <a href="/zh/archive">æ¦‚è§ˆ</a>
        </li>
      
      
    
      
      
      
      

      
        <li class="navbarm__menu--item ">
          <a href="/zh/presentation">æ¼”ç¤º</a>
        </li>
      
      
    
      
      
      
      

      
        <li class="navbarm__menu--item ">
          <a href="/zh/gallery">
            å›¾åº“
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M8.12 9.29L12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7c-.39-.39-.39-1.02 0-1.41.39-.38 1.03-.39 1.42 0z"/></svg>
          </a>
        </li>

        
          <li class="navbarm__menu--item navbarm__menu--subitem">
            <a href="/zh/gallery/%e7%bb%83%e4%b9%a0">ç»ƒä¹ </a>
          </li>
        
          <li class="navbarm__menu--item navbarm__menu--subitem">
            <a href="/zh/gallery/%e9%9a%8f%e6%8b%8d">éšæ‹</a>
          </li>
        
          <li class="navbarm__menu--item navbarm__menu--subitem">
            <a href="/zh/gallery/%e9%9a%8f%e7%ac%94">éšç¬”</a>
          </li>
        

      
      
    
      
      
      
      

      
        <li class="navbarm__menu--item active">
          <a href="/zh/posts">æ–‡ç« </a>
        </li>
      
      
    
      
      
      
      

      
        <li class="navbarm__menu--item ">
          <a href="/zh/showcase">é¡¹ç›®å±•ç¤º</a>
        </li>
      
      
    

    
      <li class="navbarm__menu--item ">
        <a href="/zh/tags" class="navbarm__menu--term" data-index="0">
          æ ‡ç­¾
        </a>
      </li>
    
      <li class="navbarm__menu--item ">
        <a href="/zh/categories" class="navbarm__menu--term" data-index="1">
          åˆ†ç±»
        </a>
      </li>
    
      <li class="navbarm__menu--item ">
        <a href="/zh/series" class="navbarm__menu--term" data-index="2">
          ç³»åˆ—
        </a>
      </li>
    
  </ul>
</div>
  <div class="navbar__menu">
  
    <div class="theme">
  <div class="dropdown">
    <button class="dropdown-trigger navbar__slide-down navbar-search" aria-label="Search Button" data-ani="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
    </button>
    <div class="dropdown-content">
    </div>
  </div>
</div>
  
  
  
<div class="theme" data-ani="true">
  <div class="dropdown">
    <button class="dropdown-trigger navbar__slide-down" aria-label="Select Theme Button" data-ani="true">
      <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><path fill="none" d="M24 0H0v24h24V0z"/><path fill="currentColor" d="M6.34 7.93c-3.12 3.12-3.12 8.19 0 11.31C7.9 20.8 9.95 21.58 12 21.58s4.1-.78 5.66-2.34c3.12-3.12 3.12-8.19 0-11.31l-4.95-4.95c-.39-.39-1.02-.39-1.41 0L6.34 7.93zM12 19.59c-1.6 0-3.11-.62-4.24-1.76C6.62 16.69 6 15.19 6 13.59s.62-3.11 1.76-4.24L12 5.1v14.49z"/></svg>      
    </button>
    <div class="dropdown-content select-theme">
      
        
        <a href="#" class="dropdown-item select-theme__item is-active">
          dark
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          light
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          hacker
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          solarized
        </a>
        
        <a href="#" class="dropdown-item select-theme__item ">
          kimbie
        </a>
        
      
    </div>
  </div>
</div>

  
  
  
  
  
  
  
  <a href="/zh/about" class="navbar__menu-item navbar__slide-down " dir="ltr" data-ani="true">å…³äºŽæˆ‘</a>
  
  
  
  
  
  
  
  <a href="/zh/archive" class="navbar__menu-item navbar__slide-down " dir="ltr" data-ani="true">æ¦‚è§ˆ</a>
  
  
  
  
  
  
  
  <a href="/zh/presentation" class="navbar__menu-item navbar__slide-down " dir="ltr" data-ani="true">æ¼”ç¤º</a>
  
  
  
  
  
  
  
  <div class="navbar__dropdown navbar__slide-down" data-ani="true">
    <a href="/zh/gallery" class="navbar__menu-item "
      dir="ltr">
      å›¾åº“
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"><path fill="currentColor" d="M8.12 9.29L12 13.17l3.88-3.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-4.59 4.59c-.39.39-1.02.39-1.41 0L6.7 10.7c-.39-.39-.39-1.02 0-1.41.39-.38 1.03-.39 1.42 0z"/></svg>
    </a>
    <div class="navbar__dropdown--content">
      
      <a href="/zh/gallery/%e7%bb%83%e4%b9%a0" class="navbar__dropdown--item" dir="ltr">ç»ƒä¹ </a>
      
      <a href="/zh/gallery/%e9%9a%8f%e6%8b%8d" class="navbar__dropdown--item" dir="ltr">éšæ‹</a>
      
      <a href="/zh/gallery/%e9%9a%8f%e7%ac%94" class="navbar__dropdown--item" dir="ltr">éšç¬”</a>
      
    </div>
  </div>
  
  
  
  
  
  
  
  <a href="/zh/posts" class="navbar__menu-item navbar__slide-down active" dir="ltr" data-ani="true">æ–‡ç« </a>
  
  
  
  
  
  
  
  <a href="/zh/showcase" class="navbar__menu-item navbar__slide-down " dir="ltr" data-ani="true">é¡¹ç›®å±•ç¤º</a>
  
  
</div>
</nav>
            
            

<main class="single__main main-main">
  
    <nav class="breadcrumb hide" aria-label="breadcrumbs">
  <script>document.querySelector('.breadcrumb').classList.remove('hide')</script>
  <ol>
    
  
  
  
  
  
  <li >
    
      <a href="https://yyyIce.github.io/zh/" class="capitalize">å’¸é±¼å†° | Design &amp; Project</a>
    
  </li>
  
  
  <li >
    
      <a href="https://yyyIce.github.io/zh/posts/" class="capitalize">Posts</a>
    
  </li>
  
  
  <li  class="is-active" >
    
      <span>å·¥å…·ä½¿ç”¨ï¼šDocker</span>
    
  </li>
  
  </ol>
  
</nav>
  
  
  <div class="single ">
    <div class="single__nojs">Please enable Javascript to view the contents</div>
    <script>document.querySelector('.single').classList.remove('hide'); document.querySelector('.single__nojs').classList.add('hide');</script>
    <h2 class="single__title" data-ani="true">å·¥å…·ä½¿ç”¨ï¼šDocker</h2>
    <h3 class="single__subtitle"></h3>
    <div class="single__meta">
      
<div class="single__infos">
  <time class="single__info" title="åˆ›å»ºæ—¥æœŸ">ðŸ“…&nbsp;2021å¹´09æœˆ08æ—¥ </time>
  
  &nbsp;&middot;&nbsp; <span class="single__info" title="é˜…è¯»æ—¶é•¿"> â˜•&nbsp;34&nbsp;åˆ†é’Ÿ </span>
  
  &nbsp;&middot;&nbsp; <span class="single__info" title="ä½œè€…">ðŸ‘»&nbsp;å’¸é±¼å†°</span>
  
  <span class="single__info">
     &middot; ðŸ‘€<span id="busuanzi_value_page_pv">...</span> é˜…è¯»
  </span>
</div>

      
<ul class="single__tags caption">
  
  ðŸ·ï¸
  

  <li><a href="https://yyyIce.github.io/zh/tags/%E8%99%9A%E6%8B%9F%E5%8C%96/" class="single__tag" title="è™šæ‹ŸåŒ–">#è™šæ‹ŸåŒ–</a></li>

</ul>

    </div>
    <article class="single__contents" data-dir="ltr" data-ani="true">
      
      <p>ã€€ã€€<strong>å‰è¨€</strong>ï¼šæœ¬æ–‡ç»å¤§éƒ¨åˆ†å†…å®¹æ‘˜å½•è‡ªã€ŠDockerâ€”â€”ä»Žå…¥é—¨åˆ°å®žè·µã€‹ï¼Œä¸ºåŠ æ·±æˆ‘çš„å°è±¡æ•´ç†è€Œæˆï¼ˆæˆ‘çš„ç¬”è®°å‡çº§äº†ï¼Œç”µå­ç¬”è®°ï¼‰ï¼Œåœ¨æœ€åŽè®¾ç½®äº†ä¸¤ä¸ªdocker demoä½œä¸ºå®žéªŒç»“æžœã€‚å®šåˆ¶Dockeré•œåƒï¼Œä¸€é”®è¿ç§»å¼€å‘çŽ¯é•œè¯·ç›´æŽ¥è·³è½¬è‡³ç¬¬4èŠ‚ã€‚å®žé™…ä¸Šæˆ‘2018å¹´å°±å­¦ä¹ è¿‡Dockerï¼Œçœ‹çš„è¿˜æ˜¯è¯­è¨€è¡¨è¾¾èƒ½åŠ›åˆšåŠæ ¼çš„è€ç‰ˆæœ¬ã€ŠDockerâ€”â€”ä»Žå…¥é—¨åˆ°å®žè·µã€‹ï¼ŒåŽŸç†æ˜¯çœ‹æ‡‚äº†ï¼Œä½†å®Œå…¨æ²¡å­¦ä¼šæ€Žä¹ˆä½¿ç”¨ï¼Œçœ‹ç€å‘½ä»¤è¡Œçœ¼æ™•ï¼Œæ¯æ¬¡éƒ½å¡åœ¨å®‰è£…Dockerï¼Œå±¡è£…å±¡è´¥ï¼Œä½†è¿™æ¬¡å­¦èµ·æ¥è§‰å¾—<code>So easy</code>ï¼Œçœ‹æ¥æˆ‘çš„æ™ºå•†å’Œç†è§£åŠ›æå‡äº†ðŸ¤“ã€‚</p>
<h2 id="1-dockerç®€ä»‹">1 Dockerç®€ä»‹</h2>
<blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/introduction/what</p>
</blockquote>
<h3 id="11-æ¦‚è¿°">1.1 æ¦‚è¿°</h3>
<p>ã€€ã€€Dockeræ˜¯å¯¹<code>è¿›ç¨‹</code>è¿›è¡Œå°è£…<code>éš”ç¦»</code>çš„æ“ä½œç³»ç»Ÿå±‚é¢çš„<code>è™šæ‹ŸåŒ–æŠ€æœ¯</code>ï¼Œç”±äºŽéš”ç¦»çš„è¿›ç¨‹ç‹¬ç«‹äºŽå®¿ä¸»å’Œå…¶å®ƒéš”ç¦»è¿›ç¨‹ï¼Œä¹Ÿè¢«ç§°ä¸º<code>å®¹å™¨</code>ã€‚Dockerä½¿ç”¨Goè¯­è¨€å¼€å‘å®žçŽ°ã€‚ç”¨æˆ·æ— éœ€å…³å¿ƒå®¹å™¨ç®¡ç†ï¼Œæ“ä½œDockerå®¹å™¨å°±åƒæ“ä½œå¿«é€Ÿè½»é‡çº§çš„è™šæ‹Ÿæœºä¸€æ ·ç®€å•ã€‚</p>
<p>ã€€ã€€å›¾1å’Œå›¾2å½¢è±¡åœ°å±•ç¤ºäº†Dockerè™šæ‹ŸåŒ–æŠ€æœ¯å’Œä¼ ç»Ÿè™šæ‹ŸåŒ–æŠ€æœ¯çš„åŒºåˆ«ã€‚ä¼ ç»Ÿè™šæ‹ŸåŒ–æŠ€æœ¯å…ˆå¯¹ç‰©ç†ç¡¬ä»¶è¿›è¡Œè™šæ‹ŸåŒ–ï¼Œè™šæ‹Ÿå‡ºç¡¬ä»¶ä¹‹åŽï¼Œåœ¨è™šæ‹ŸåŒ–çš„ç¡¬ä»¶ä¸Šè¿è¡Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œæ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®žçŽ°è™šæ‹ŸåŒ–ï¼›è€Œå®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹ä»è¿è¡Œåœ¨åŽŸæœ‰çš„æ“ä½œç³»ç»Ÿä¸Šï¼Œå³å®¿ä¸»å†…æ ¸ä¸Šï¼Œå®¹å™¨æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œå®ƒæ¯”ä¼ ç»Ÿçš„è™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿ã€‚</p>
<figure >
  
  
  
    <img data-src="/images/posts/tools/docker/classic_virtualization_01.png" alt="image alt" data-caption="" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='' height='' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" class="lazyload" style="width:;height:;"/>
  

  
  
    <figcaption style="text-align: center;">
      <strong>å›¾1 ä¼ ç»Ÿè™šæ‹ŸåŒ–æŠ€æœ¯</strong>:
      
    </figcaption>
  
</figure>
<figure >
  
  
  
    <img data-src="/images/posts/tools/docker/docker_virtualization_02.png" alt="image alt" data-caption="" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='' height='' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" class="lazyload" style="width:;height:;"/>
  

  
  
    <figcaption style="text-align: center;">
      <strong>å›¾2 Dockerè™šæ‹ŸåŒ–æŠ€æœ¯</strong>:
      
    </figcaption>
  
</figure>
<h3 id="12-ä¸ºä»€ä¹ˆè¦ç”¨docker">1.2 ä¸ºä»€ä¹ˆè¦ç”¨Docker</h3>
<blockquote>
<p>å‚è€ƒï¼šhttps://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</p>
</blockquote>
<p>ã€€ã€€å¯¹äºŽæˆ‘ä»¬è¿™äº›æ™®é€šä½¿ç”¨äººå‘˜æ¥è¯´ï¼Œä½¿ç”¨Dockerèƒ½å¤ŸèŠ‚çœå¤§é‡é‡æ–°é…ç½®å¼€å‘çŽ¯å¢ƒçš„æ—¶é—´ï¼Œè½»æ¾å¤‡ä»½ï¼ˆðŸ˜“è™½ç„¶ä½†æ˜¯ï¼Œä¼šè€—è´¹å¤§é‡æ—¶é—´åœ¨é…ç½®å¼€å‘çŽ¯å¢ƒçš„æˆ‘ä»¬å¯èƒ½ä¹Ÿå¹¶ä¸èƒ½è¿…é€ŸæŽŒæ¡Dockerï¼Œä½†æŽŒæ¡äº†å°±å¾ˆæ–¹ä¾¿å•¦ï¼‰ã€‚</p>
<p>ã€€ã€€å…·ä½“æ¥è¯´ï¼Œéšç€å„ç§æŠ€æœ¯çš„è“¬å‹ƒå‘å±•ï¼Œéœ€è¦çš„å¼€å‘è¶Šæ¥è¶Šå¤æ‚ï¼Œæ¯å°†ç¨‹åºå®‰è£…åˆ°ä¸€å°æ–°è®¾å¤‡éƒ½éœ€è¦é‡æ–°é…ç½®å¼€å‘çŽ¯å¢ƒã€‚é…ç½®å¼€å‘çŽ¯å¢ƒæ—¶éžå¸¸å®¹æ˜“å‡ºé”™ï¼Œæ¨¡å—ã€åº“çš„å®‰è£…ã€ä¾èµ–å…³ç³»ã€ç‰ˆæœ¬è¦æ±‚ã€å…¼å®¹æ€§ï¼Œä¸€æ—¦å‡ºé”™ï¼Œå°±è¦é‡æ¥ï¼Œæµªè´¹å¤§é‡çš„æ—¶é—´ï¼Œå¦‚æžœéœ€è¦ç¨‹åºåœ¨å…¶å®ƒè®¾å¤‡ä¸Šè¿è¡Œæ—¶ï¼Œèƒ½å¤Ÿå°†ç¨‹åºéœ€è¦çš„å¼€å‘çŽ¯å¢ƒä¸€èµ·ç§»åˆ°å…¶ä»–è®¾å¤‡ä¸Šï¼Œå°±èƒ½å¤ŸèŠ‚çœå¤§é‡æ—¶é—´ã€‚</p>
<blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/introduction/why</p>
</blockquote>
<p>ã€€ã€€ç”±äºŽDockerç›´æŽ¥è¿è¡Œåœ¨ç‰©ç†æœºçš„æ“ä½œç³»ç»Ÿä¸Šï¼ŒèŠ‚çœäº†è®¸å¤šå¼€é”€ï¼Œæ‰€ä»¥Dockerä¸Žä¼ ç»Ÿè™šæ‹ŸåŒ–æ–¹å¼ç›¸æ¯”æœ‰å·¨å¤§ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ›´é«˜æ•ˆåœ°åˆ©ç”¨ç³»ç»Ÿèµ„æº</strong>ï¼šå®¹å™¨ä¸éœ€è¦è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿå’Œè¿è¡Œå®Œæ•´æ“ä½œç³»ç»Ÿç­‰é¢å¤–å¼€é”€ï¼Œæ‰€ä»¥å¯¹ç‰©ç†æœºç³»ç»Ÿèµ„æºçš„åˆ©ç”¨çŽ‡æ›´é«˜ã€‚ç”±äºŽDockerè¿è¡Œåœ¨åŽŸæœ‰æ“ä½œç³»ç»Ÿä¸Šï¼Œå…¶åº”ç”¨æ‰§è¡Œé€Ÿåº¦ã€æ–‡ä»¶å­˜å‚¨é€Ÿåº¦ã€å†…å­˜æŸè€—éƒ½è¦æ¯”ä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯é«˜æ•ˆï¼Œæ‰€ä»¥ç›¸æ¯”è™šæ‹ŸæœºæŠ€æœ¯ï¼Œç›¸åŒé…ç½®çš„ä¸»æœºï¼Œå¾€å¾€å¯ä»¥è¿è¡Œæ›´å¤šæ•°é‡çš„åº”ç”¨ã€‚</li>
<li><strong>æ›´å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´</strong>ï¼šä¼ ç»Ÿè™šæ‹ŸæœºæŠ€æœ¯å¯åŠ¨æœåŠ¡å¾€å¾€éœ€è¦æ•°åˆ†é’Ÿï¼Œè€ŒDockerå®¹å™¨åº”ç”¨æ— éœ€å¯åŠ¨å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œä»Žè€Œä½œåˆ°ç§’çº§ã€ç”šè‡³æ¯«ç§’çº§çš„å¯åŠ¨æ—¶é—´ã€‚å¤§å¤§èŠ‚çº¦äº†å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²çš„æ—¶é—´ã€‚</li>
<li><strong>ä¸€è‡´çš„è¿è¡ŒçŽ¯å¢ƒ</strong>ï¼šå¼€å‘è¿‡ç¨‹ä¸­ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯çŽ¯å¢ƒä¸€è‡´æ€§é—®é¢˜ã€‚ç”±äºŽå¼€å‘çŽ¯å¢ƒã€æµ‹è¯•çŽ¯å¢ƒã€ç”Ÿäº§çŽ¯å¢ƒä¸ä¸€è‡´ï¼Œå¯¼è‡´æœ‰äº› bug å¹¶æœªåœ¨å¼€å‘è¿‡ç¨‹ä¸­è¢«å‘çŽ°ã€‚è€Œ <code>Docker</code> çš„é•œåƒæä¾›äº†é™¤å†…æ ¸å¤–å®Œæ•´çš„è¿è¡Œæ—¶çŽ¯å¢ƒï¼Œç¡®ä¿äº†åº”ç”¨è¿è¡ŒçŽ¯å¢ƒä¸€è‡´æ€§ï¼Œä»Žè€Œä¸ä¼šå†å‡ºçŽ° <em>ã€Œè¿™æ®µä»£ç åœ¨æˆ‘æœºå™¨ä¸Šæ²¡é—®é¢˜å•Šã€</em> è¿™ç±»é—®é¢˜ã€‚</li>
<li><strong>æŒç»­äº¤ä»˜å’Œéƒ¨ç½²</strong>ï¼šå¯¹å¼€å‘å’Œè¿ç»´äººå‘˜æ¥è¯´ï¼Œæœ€å¸Œæœ›çš„å°±æ˜¯ä¸€æ¬¡åˆ›å»ºæˆ–é…ç½®ï¼Œå¯ä»¥åœ¨ä»»æ„åœ°æ–¹æ­£å¸¸è¿è¡Œã€‚ç”¨ <code>Docker</code> å¯ä»¥é€šè¿‡å®šåˆ¶åº”ç”¨é•œåƒæ¥å®žçŽ°æŒç»­é›†æˆã€æŒç»­äº¤ä»˜ã€éƒ¨ç½²ã€‚å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ <code>Dockerfile</code> æ¥è¿›è¡Œé•œåƒæž„å»ºï¼Œå¹¶ç»“åˆ <a href="https://en.wikipedia.org/wiki/Continuous_integration">æŒç»­é›†æˆ(Continuous Integration)</a> ç³»ç»Ÿè¿›è¡Œé›†æˆæµ‹è¯•ï¼Œè€Œè¿ç»´äººå‘˜åˆ™å¯ä»¥ç›´æŽ¥åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­å¿«é€Ÿéƒ¨ç½²è¯¥é•œåƒï¼Œç”šè‡³ç»“åˆ <a href="https://en.wikipedia.org/wiki/Continuous_delivery">æŒç»­éƒ¨ç½²(Continuous Delivery/Deployment)</a> ç³»ç»Ÿè¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ã€‚ä½¿ç”¨ <code>Dockerfile</code> ä½¿é•œåƒæž„å»ºé€æ˜ŽåŒ–ï¼Œä¸ä»…ä»…å¼€å‘å›¢é˜Ÿå¯ä»¥ç†è§£åº”ç”¨è¿è¡ŒçŽ¯å¢ƒï¼Œä¹Ÿæ–¹ä¾¿è¿ç»´å›¢é˜Ÿç†è§£åº”ç”¨è¿è¡Œæ‰€éœ€æ¡ä»¶ï¼Œå¸®åŠ©æ›´å¥½çš„ç”Ÿäº§çŽ¯å¢ƒä¸­éƒ¨ç½²è¯¥é•œåƒã€‚</li>
<li><strong>æ›´è½»æ¾åœ°è¿ç§»</strong>ï¼šç”±äºŽDockerç¡®ä¿äº†çŽ¯å¢ƒä¸€è‡´ï¼Œæ‰€ä»¥å¯ä»¥è½»æ˜“å°†ä¸€ä¸ªå¹³å°ä¸Šçš„åº”ç”¨è¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°ä¸Šã€‚<code>Docker</code> å¯ä»¥åœ¨å¾ˆå¤šå¹³å°ä¸Šè¿è¡Œï¼Œå¦‚ç‰©ç†æœºã€è™šæ‹Ÿæœºã€å…¬æœ‰äº‘ã€ç§æœ‰äº‘ï¼Œç¬”è®°æœ¬ï¼Œ<code>Docker</code>åº”ç”¨ç¨‹åºåœ¨è¿™äº›å¹³å°ä¸Šçš„è¿è¡Œç»“æžœæ˜¯ä¸€è‡´çš„ã€‚</li>
<li><strong>æ›´è½»æ¾åœ°ç»´æŠ¤å’Œæ‰©å±•</strong>ï¼šåˆ†å±‚å­˜å‚¨å’Œé•œåƒæŠ€æœ¯ï¼Œè®©åº”ç”¨é‡å¤éƒ¨åˆ†çš„å¤ç”¨æ›´ä¸ºå®¹æ˜“ï¼Œä¹Ÿè®©åº”ç”¨çš„ç»´æŠ¤æ›´æ–°æ›´åŠ ç®€å•ã€‚</li>
</ul>
<p>ã€€ã€€è¡¨1å°†Dockerä¸Žä¼ ç»Ÿè™šæ‹Ÿæœºè¿›è¡Œå¯¹æ¯”æ€»ç»“ã€‚</p>
<figure >
  
  
  
    <img data-src="/images/posts/tools/docker/docker_vs_vm_03.png" alt="image alt" data-caption="" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='' height='' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" class="lazyload" style="width:;height:;"/>
  

  
  
    <figcaption style="text-align: center;">
      <strong>è¡¨1 Docker VS è™šæ‹Ÿæœº</strong>:
      
    </figcaption>
  
</figure>
<h3 id="13-åŸºæœ¬æ¦‚å¿µ">1.3 åŸºæœ¬æ¦‚å¿µ</h3>
<p>ã€€ã€€Dockeræœ‰3ä¸ªé‡è¦çš„åŸºæœ¬æ¦‚å¿µï¼šé•œåƒï¼ˆImageï¼‰ã€å®¹å™¨ï¼ˆContainerï¼‰ã€ä»“åº“ï¼ˆRepositoryï¼‰ã€‚</p>
<h4 id="131-é•œåƒimage">1.3.1 é•œåƒï¼ˆImageï¼‰</h4>
<blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/basic_concept/image</p>
</blockquote>
<p>ã€€ã€€Dockeré•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€çŽ¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æž„å»ºä¹‹åŽä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚ä»¥Linuxç³»ç»Ÿä¸ºä¾‹ï¼Œå†…æ ¸å¯åŠ¨åŽï¼Œä¼šæŒ‚è½½<code>root</code>æ–‡ä»¶ç³»ç»Ÿä¸ºå…¶æä¾›ç”¨æˆ·ç©ºé—´æ”¯æŒï¼Œè€ŒDockeré•œåƒå°±ç›¸å½“äºŽä¸€ä¸ª<code>root</code>æ–‡ä»¶ç³»ç»Ÿï¼Œå¦‚ubuntu 18.0.4ç³»ç»Ÿé•œåƒï¼Œå°±åŒ…å«äº†å®Œæ•´çš„ubuntu 18.0.4çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<blockquote>
<p>å‚è€ƒï¼šhttp://pwn4.fun/2020/07/01/UnionFS%E6%8A%80%E6%9C%AF/</p>
<p>Union FSï¼šè”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnion File Systemï¼‰ï¼Œå¯ä»¥æŠŠæ–‡ä»¶ç³»ç»Ÿä¸Šçš„å¤šä¸ªç›®å½•è”åˆæŒ‚è½½åˆ°åŒä¸€ç›®å½•ä¸‹ï¼Œè€Œç›®å½•çš„ç‰©ç†ä½ç½®æ˜¯åˆ†å¼€çš„ã€‚</p>
<p>å¯ä»¥ç†è§£æˆæŠŠä¸åŒç›®å½•çœ‹ä½œåœ¨åŒä¸€ç›®å½•ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨åŒä¸€ç›®å½•å¯¹ä»–ä»¬è¿›è¡Œæ“ä½œï¼Œä½†å®žé™…ä¸Šä»–ä»¬å¹¶æ²¡æœ‰å­˜å‚¨åœ¨åŒä¸€ç›®å½•ã€‚</p>
</blockquote>
<p>ã€€ã€€ç”±äºŽé•œåƒåŒ…å«æ“ä½œç³»ç»Ÿå®Œæ•´çš„<code>root</code>æ–‡ä»¶ç³»ç»Ÿï¼Œä½“ç§¯åºžå¤§ï¼Œæ‰€ä»¥Dockerè¿ç”¨<code>Union FS</code>æŠ€æœ¯ï¼Œè®¾è®¡ä¸º<code>åˆ†å±‚å­˜å‚¨</code>æž¶æž„ï¼›é•œåƒå®žé™…ä¸Šä¸æ˜¯åƒ<code>.iso</code>ä¸€æ ·çš„ä¸€æ•´ä¸ªæ‰“åŒ…æ–‡ä»¶ï¼Œè€Œæ˜¯å¤šå±‚æ–‡ä»¶ç³»ç»Ÿè”åˆç»„æˆã€‚</p>
<p>ã€€ã€€é•œåƒé€å±‚æž„å»ºï¼Œå‰ä¸€å±‚æ˜¯åŽä¸€å±‚çš„åŸºç¡€ï¼Œæ¯ä¸€å±‚æž„å»ºå®Œå°±ä¸ä¼šå†æ”¹å˜ï¼ŒåŽä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±çš„è¿™ä¸€å±‚ã€‚æ¯”å¦‚ï¼Œåˆ é™¤å‰ä¸€å±‚æ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯å°†å‰ä¸€å±‚çš„æ–‡ä»¶åˆ é™¤ï¼Œè€Œæ˜¯åœ¨å½“å‰å±‚æ ‡è®°è¯¥æ–‡ä»¶å·²åˆ é™¤ï¼Œåœ¨æœ€ç»ˆè¿è¡Œå®¹å™¨æ—¶ï¼Œè™½ç„¶ä¸ä¼šçœ‹åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œä½†å®žé™…ä¸Šè¯¥æ–‡ä»¶ä¸€ç›´å­˜åœ¨äºŽé•œåƒé‡Œã€‚</p>
<p>ã€€ã€€æž„å»ºé•œåƒæ—¶ï¼Œéœ€è¦é¢å¤–å°å¿ƒï¼Œæ¯ä¸€å±‚åªå°½é‡åŒ…å«è¯¥å±‚éœ€è¦æ·»åŠ çš„ä¸œè¥¿ï¼Œé¢å¤–çš„ä¸œè¥¿åº”è¯¥åœ¨è¯¥å±‚æž„å»ºç»“æŸå‰æ¸…ç†æŽ‰ã€‚</p>
<p>ã€€ã€€åˆ†å±‚å­˜å‚¨çš„ç‰¹å¾ä½¿é•œåƒçš„å¤ç”¨ã€å®šåˆ¶æ›´å®¹æ˜“ï¼Œå¯ä»¥ä½¿ç”¨ä¹‹å‰æž„å»ºå¥½çš„é•œåƒä½œä¸ºåŸºç¡€å±‚ï¼Œè¿›ä¸€æ­¥æ·»åŠ æ–°çš„å±‚ä»¥å®šåˆ¶è‡ªå·±æ‰€éœ€çš„å†…å®¹ã€‚Dockeræä¾›äº†éžå¸¸ç®€å•çš„æœºåˆ¶æ¥åˆ›å»ºæˆ–æ›´æ–°çŽ°æœ‰é•œåƒï¼Œç”¨æˆ·å¯ä»¥ç›´æŽ¥ä»Žä»–äººå¤„ä¸‹è½½ä¸€ä¸ªå·²ç»åšå¥½çš„é•œåƒæ¥ä½¿ç”¨ã€‚</p>
<h4 id="132-å®¹å™¨container">1.3.2 å®¹å™¨ï¼ˆContainerï¼‰</h4>
<blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/basic_concept/container</p>
</blockquote>
<p>å®¹å™¨æ˜¯ä»Žé•œåƒåˆ›å»ºçš„<code>è¿è¡Œå®žä¾‹</code>ï¼Œå®¹å™¨å’Œé•œåƒçš„å…³ç³»å°±åƒé¢å‘å¯¹è±¡ç¨‹åºä¸­<code>ç±»</code>å’Œ<code>å®žä¾‹</code>çš„å…³ç³»ä¸€æ ·ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼šhttps://en.wikipedia.org/wiki/Linux_namespaces</p>
<p>å‘½åç©ºé—´ï¼ˆNamespacesï¼‰æ˜¯ Linux å†…æ ¸çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå¯¹å†…æ ¸èµ„æºè¿›è¡Œåˆ†åŒºï¼Œä½¿å¾—ä¸€ç»„è¿›ç¨‹çœ‹åˆ°ä¸€ç»„èµ„æºï¼Œè€Œå¦ä¸€ç»„è¿›ç¨‹çœ‹åˆ°ä¸€ç»„ä¸åŒçš„èµ„æºã€‚è¯¥åŠŸèƒ½çš„å·¥ä½œåŽŸç†æ˜¯ä¸ºä¸€ç»„èµ„æºå’Œè¿›ç¨‹ä½¿ç”¨ç›¸åŒçš„å‘½åç©ºé—´ï¼Œä½†è¿™äº›å‘½åç©ºé—´å¼•ç”¨ä¸åŒçš„èµ„æºã€‚èµ„æºå¯èƒ½å­˜åœ¨äºŽå¤šä¸ªç©ºé—´ä¸­ã€‚æ­¤ç±»èµ„æºçš„ç¤ºä¾‹åŒ…æ‹¬è¿›ç¨‹ IDã€ä¸»æœºåã€ç”¨æˆ· IDã€æ–‡ä»¶åä»¥åŠä¸€äº›ä¸Žç½‘ç»œè®¿é—®å’Œè¿›ç¨‹é—´é€šä¿¡ç›¸å…³çš„åç§°ã€‚</p>
</blockquote>
<p>ã€€ã€€å®¹å™¨çš„å®žè´¨æ˜¯<code>è¿›ç¨‹</code>ï¼Œä½†å®¹å™¨è¿›ç¨‹è¿è¡Œè‡ªå·±çš„ç‹¬ç«‹çš„<code>å‘½åç©ºé—´</code>ï¼Œå³å®¹å™¨è¿›ç¨‹æ‹¥æœ‰è‡ªå·±çš„æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œé…ç½®ã€è¿›ç¨‹ç©ºé—´ç­‰ç­‰ã€‚å®¹å™¨è¿›ç¨‹è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„çŽ¯å¢ƒä¸­ï¼Œä½¿ç”¨èµ·æ¥å¥½åƒåœ¨ç‹¬ç«‹äºŽå®¿ä¸»ï¼ˆç‰©ç†æœºï¼‰çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ï¼Œè¿™ç§ç‰¹æ€§ä½¿å¾—å®¹å™¨å°è£…çš„åº”ç”¨æ¯”ç›´æŽ¥åœ¨å®¿ä¸»è¿è¡Œæ›´åŠ å®‰å…¨ã€‚</p>
<p>ã€€ã€€å®¹å™¨ä¹Ÿé‡‡ç”¨<code>åˆ†å±‚å­˜å‚¨</code>ï¼Œæ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œè¿™ä¸ªä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ç§°ä¸º<code>å®¹å™¨å­˜å‚¨å±‚</code>ã€‚</p>
<p>ã€€ã€€å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå‘½å‘¨æœŸå’Œå®¹å™¨ç›¸åŒï¼Œå®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿæ¶ˆå¤±ã€‚æ‰€ä»¥ï¼Œä»»ä½•ä¿å­˜åœ¨å®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šç”±äºŽåˆ é™¤å®¹å™¨è€Œæ¶ˆå¤±ã€‚</p>
<p>ã€€ã€€å®¹å™¨ä¸åº”è¯¥å‘å­˜å‚¨å±‚å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚æ‰€æœ‰æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨<code>æ•°æ®å·</code>æˆ–è€…<code>ç»‘å®šå®¿ä¸»ç›®å½•</code>ï¼Œè¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ï¼Œç›´æŽ¥å¯¹å®¿ä¸»å‘ç”Ÿè¯»å†™ï¼Œæ€§èƒ½å’Œç¨³å®šæ€§æ›´é«˜ã€‚æ•°æ®å·çš„ç”Ÿå­˜å‘¨æœŸç‹¬ç«‹äºŽå®¹å™¨ï¼Œå®¹å™¨æ¶ˆäº¡ï¼Œæ•°æ®å·ä¸ä¼šæ¶ˆäº¡ã€‚</p>
<h4 id="133-ä»“åº“repository">1.3.3 ä»“åº“ï¼ˆRepositoryï¼‰</h4>
<blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/basic_concept/repository</p>
</blockquote>
<p>ã€€ã€€ä»“åº“æ˜¯é›†ä¸­å­˜å‚¨ã€åˆ†å‘é•œåƒçš„åœºæ‰€ï¼ŒDocker Registryæ˜¯ä¸€ç§ä»“åº“æœåŠ¡ã€‚ä¸€ä¸ª<code>Docker Registry</code>å¯ä»¥åŒ…å«å¤šä¸ªä»“åº“ï¼ˆRepositoryï¼‰ï¼Œæ¯ä¸ªä»“åº“å¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆTagï¼‰ï¼Œæ¯ä¸ªæ ‡ç­¾å¯¹åº”ä¸€ä¸ªé•œåƒã€‚</p>
<p>ã€€ã€€æ ‡ç­¾å¸¸ä¸Žå¯¹åº”äºŽåº”ç”¨çš„å„ä¸ªç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡<code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code>çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“æ˜¯è¿™ä¸ªåº”ç”¨å“ªä¸ªç‰ˆæœ¬çš„é•œåƒã€‚å¦‚æžœæ²¡æœ‰ç»™å‡ºæ ‡ç­¾ï¼Œå°†ä»¥<code>latest</code>ä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚ä¾‹å¦‚ä»“åº“åä¸º<code>ubuntu</code>ï¼Œæœ‰<code>16.04</code>å’Œ<code>18.04</code>ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¯é€šè¿‡<code>ubuntu:16.04</code>æ¥æŒ‡å®š<code>16.04</code>ç‰ˆæœ¬ï¼Œå¦‚æžœå¿½ç•¥æ ‡ç­¾ï¼Œä½¿ç”¨<code>ubuntu</code>ï¼Œåˆ™çœ‹ä½œ<code>ubuntu:latest</code>ã€‚</p>
<p>ã€€ã€€ä»“åº“åé€šå¸¸ä»¥äºŒçº§è·¯å¾„å½¢å¼å‡ºçŽ°ï¼Œå¦‚<code>jwilder/nginx-proxy</code>ï¼Œ<code>jwilder</code>é€šå¸¸æ ‡è¯†ä»“åº“æœåŠ¡å¤šç”¨æˆ·çŽ¯å¢ƒä¸‹çš„ç”¨æˆ·åï¼Œ<code>nginx-proxy</code>é€šå¸¸æ ‡è¯†åº”ç”¨åï¼›å…·ä½“å«ä¹‰å–å†³äºŽä»“åº“æœåŠ¡ã€‚</p>
<p>ã€€ã€€ä»“åº“æœåŠ¡åŒ…æ‹¬å…¬å¼€æœåŠ¡å’Œç§æœ‰æœåŠ¡ã€‚</p>
<ul>
<li>å…¬å¼€æœåŠ¡ï¼š å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ã€å…è®¸ç”¨æˆ·ç®¡ç†é•œåƒçš„ä»“åº“æœåŠ¡ï¼Œä¸€èˆ¬å…è®¸ç”¨æˆ·å…è´¹ä¸Šä¼ ã€ä¸‹è½½å…¬å¼€çš„é•œåƒã€‚æœ€å¸¸ä½¿ç”¨çš„å…¬å¼€æœåŠ¡æ˜¯å®˜æ–¹çš„<a href="https://hub.docker.com/">Docker Hub</a>ï¼Œæ­¤å¤–è¿˜æœ‰ Red Hat çš„ <a href="https://quay.io/repository/">Quay.io</a>ã€Google çš„ <a href="https://cloud.google.com/container-registry/">Googluutse Container Registry</a>ï¼ˆ<a href="https://kubernetes.io/">Kubernetes</a> çš„é•œåƒä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæœåŠ¡ï¼‰ã€ <a href="https://github.com/">GitHub</a> çš„ <a href="https://docs.github.com/cn/packages/guides/about-github-container-registry">ghcr.io</a>ã€é˜¿é‡Œäº‘é•œåƒæœåº“ç­‰ã€‚å›½å†…ä¸€äº›äº‘æœåŠ¡å•†æä¾›äº†å¯¹<code>Docker Hub</code>çš„åŠ é€Ÿå™¨ï¼Œå¦‚é˜¿é‡Œäº‘åŠ é€Ÿå™¨ã€‚</li>
<li>ç§æœ‰æœåŠ¡ï¼šç”¨æˆ·å¯ä»¥åœ¨æœ¬åœ°æ­å»ºç§æœ‰Docker Registryï¼ŒDockerå®˜æ–¹æä¾›äº†<code>Docker Registry</code>é•œåƒï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ä½œä¸ºç§æœ‰ä»“åº“ç®¡ç†æœåŠ¡ï¼Œä½†ä¸åŒ…å«å›¾å½¢ç•Œé¢ã€é•œåƒç»´æŠ¤ã€ç”¨æˆ·ç®¡ç†ã€è®¿é—®æŽ§åˆ¶ç­‰é«˜çº§åŠŸèƒ½ã€‚</li>
</ul>
<h4 id="134-å­˜å‚¨é©±åŠ¨storage-driver">1.3.4 å­˜å‚¨é©±åŠ¨ï¼ˆStorage Driverï¼‰</h4>
<blockquote>
<p>å‚è€ƒï¼šhttps://zhangchenchen.github.io/2018/03/09/record-for-docker-storage-driver/</p>
</blockquote>
<p>ã€€ã€€å®¹å™¨å’Œé•œåƒçš„å±‚çº§å…³ç³»å¦‚å›¾3ï¼Œå®¹å™¨å­˜å‚¨å±‚å¯ä»¥è¯»å†™ï¼Œè€Œé•œåƒå±‚æ˜¯åªè¯»çš„ã€‚</p>
<figure >
  
  
  
    <img data-src="/images/posts/tools/docker/03.jpg" alt="image alt" data-caption="" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='' height='' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" class="lazyload" style="width:;height:;"/>
  

  
  
    <figcaption style="text-align: center;">
      <strong>å›¾3 å®¹å™¨å’Œé•œåƒçš„å±‚çº§å…³ç³»</strong>:
      
    </figcaption>
  
</figure>
<p>ã€€ã€€<code>å­˜å‚¨é©±åŠ¨</code>æ˜¯å¤„ç†Docker<code>å„ä¸ªåˆ†å±‚</code>çš„é©±åŠ¨ï¼Œè´Ÿè´£å¤„ç†å®¹å™¨çš„å­˜å‚¨ã€‚å­˜å‚¨é©±åŠ¨<code>å…·ä½“å®žçŽ°</code>å¦‚å›¾4æ‰€ç¤ºçš„åˆ†å±‚è¯»å†™æµç¨‹ã€‚</p>
<p>ã€€ã€€æœ€åº•å±‚çš„åŸºç¡€é•œåƒæ˜¯ubuntuçš„ç³»ç»Ÿé•œåƒï¼Œå†å¾€ä¸Šæ˜¯åˆ†å±‚çš„é•œåƒå±‚ï¼ˆæ¯”å¦‚dockerfileä¸­çš„è½¯ä»¶å®‰è£…ç­‰ï¼‰ï¼Œè¿™äº›éƒ½æ˜¯åªè¯»çš„é•œåƒå±‚ã€‚æœ€ä¸Šé¢æ‰æ˜¯å¯ä»¥è¯»å†™çš„å®¹å™¨å­˜å‚¨å±‚ï¼Œä¸åŒçš„å®¹å™¨æœ‰ä¸åŒçš„å®¹å™¨å­˜å‚¨å±‚ï¼Œå…±ç”¨ç›¸åŒçš„é•œåƒå±‚ã€‚å½“æŸä¸ªå®¹å™¨éœ€è¦å†™æ“ä½œæ—¶ï¼Œä¼šå…ˆå°†å†™çš„å†…å®¹ä»Žé•œåƒå±‚å¤åˆ¶åˆ°å®¹å™¨å­˜å‚¨å±‚ï¼Œç„¶åŽå†å†™å…¥ï¼ˆä¹Ÿå°±æ˜¯å†™æ—¶å¤åˆ¶ï¼‰ï¼Œè¯»çš„æ—¶å€™ä¼šä»Žå®¹å™¨å±‚å¼€å§‹ï¼Œå¦‚æžœå‘½ä¸­åˆ™è¯»å–ï¼Œæ²¡æœ‰å‘½ä¸­åˆ™ä¾æ¬¡å¾€ä¸‹å±‚è¯»å–ã€‚</p>
<figure >
  
  
  
    <img data-src="/images/posts/tools/docker/04.jpg" alt="image alt" data-caption="" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='' height='' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" class="lazyload" style="width:;height:;"/>
  

  
  
    <figcaption style="text-align: center;">
      <strong>å›¾4 å®¹å™¨è¯»å†™æµç¨‹</strong>:
      
    </figcaption>
  
</figure>
<p>ã€€ã€€ä¸åŒçš„ç³»ç»Ÿæ”¯æŒä¸åŒçš„å­˜å‚¨é©±åŠ¨ï¼Œå¯ä»¥åœ¨Dockerçš„é…ç½®é¡¹ä¸­åœ¨è¯¥ç³»ç»Ÿæ”¯æŒçš„å­˜å‚¨é©±åŠ¨ä¸­è¿›è¡Œé€‰æ‹©ã€‚å¦‚Ubuntuç³»ç»Ÿæ”¯æŒ<code>overlay2</code>ã€<code>aufs</code>ã€<code>btrfs</code>ã€‚</p>
<h2 id="2-å®‰è£…">2 å®‰è£…</h2>
<p>ã€€ã€€å®‰è£…é•œåƒçš„æ–¹æ³•å‚è€ƒDockerå®˜æ–¹æ–‡æ¡£ï¼š</p>
<ul>
<li>Ubuntuå®‰è£…æ–¹æ³•ï¼šhttps://docs.docker.com/engine/install/ubuntu/</li>
<li>CentOSå®‰è£…æ–¹æ³•ï¼šhttps://docs.docker.com/engine/install/centos/</li>
</ul>
<p>ã€€ã€€æŽ¨èä½¿ç”¨ä»“åº“æ¥è£…Dockerã€‚</p>
<p>ã€€ã€€ï¼ˆ0ï¼‰ç§»é™¤æ—§ç‰ˆæœ¬çš„dockerï¼Œå¦‚æžœä»¥å‰æ²¡æœ‰å®‰è£…è¿‡è¿è¡Œæ­¤å‘½ä»¤æ— å½±å“ã€‚</p>
<pre><code> sudo apt-get remove docker docker-engine docker.io containerd runc
</code></pre><p>ã€€ã€€ï¼ˆ1ï¼‰è®¾ç½®ä»“åº“</p>
<p>ã€€ã€€æ›´æ–°<code>apt</code>çš„åŒ…ç´¢å¼•ï¼Œå¹¶å…è®¸<code>apt</code>ç”¨HTTPSä½¿ç”¨ä»“åº“æ¥å®‰è£…åŒ…ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo apt-get update
$ sudo apt-get install <span class="se">\
</span><span class="se"></span>    apt-transport-https <span class="se">\
</span><span class="se"></span>    ca-certificates <span class="se">\
</span><span class="se"></span>    curl <span class="se">\
</span><span class="se"></span>    gnupg <span class="se">\
</span><span class="se"></span>    lsb-release
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ·»åŠ Dockerå®˜æ–¹çš„GPG keyã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$  curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è®¾ç½®ç¨³å®šçš„ä»“åº“ç‰ˆæœ¬ã€‚å®˜ç½‘çš„å®‰è£…é€Ÿåº¦å®žåœ¨å¤ªæ…¢ï¼ˆä½†æ˜¯ä¹Ÿèƒ½æˆåŠŸï¼‰ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒå®‰è£…ï¼ˆæˆ‘æ²¡æœ‰éªŒè¯ï¼Œæˆ‘ç”¨çš„å®˜ç½‘ç»™çš„é•œåƒè·¯å¾„ï¼‰ã€‚</p>
<blockquote>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/qq_28612967/article/details/105912351</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo add-apt-repository <span class="se">\
</span><span class="se"></span>    <span class="s2">&#34;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \
</span><span class="s2">    </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> \
</span><span class="s2">    stable&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ2ï¼‰å®‰è£…Dockerå¼•æ“Ž</p>
<p>ã€€ã€€æ›´æ–°<code>apt</code>åŒ…ç´¢å¼•ï¼Œå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Dockerå¼•æ“Žå’Œå®¹å™¨ï¼Œæˆ–åˆ°ä¸‹ä¸€æ­¥å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆå¯åˆ°å®˜æ–¹æ–‡æ¡£æŸ¥çœ‹ï¼Œè¿™é‡Œä¸å†é‡å¤ï¼‰ï¼Œå®‰è£…çš„éžå¸¸æ…¢ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"> $ sudo apt-get update
 $ sudo apt-get install docker-ce docker-ce-cli containerd.io
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ3ï¼‰è¿è¡Œ<code>hello-world</code>é•œåƒï¼ŒéªŒè¯Dockerå¼•æ“Žæ˜¯å¦å®‰è£…æˆåŠŸã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker run hello-world
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ­¤å‘½ä»¤ä¸‹è½½æµ‹è¯•æ˜ åƒå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œå®ƒã€‚å½“å®¹å™¨è¿è¡Œæ—¶ï¼Œå®ƒæ‰“å°ä¸€æ¡æ¶ˆæ¯å¹¶é€€å‡ºã€‚è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Unable to find image <span class="s1">&#39;hello-world:latest&#39;</span> locally
latest: Pulling from library/hello-world
b8dfde127a29: Pull <span class="nb">complete</span> 
Digest: sha256:7d91b69e04a9029b99f3585aaaccae2baa80bcf318f4a5d2165a9898cd2dc0a1
Status: Downloaded newer image <span class="k">for</span> hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the <span class="s2">&#34;hello-world&#34;</span> image from the Docker Hub.
    <span class="o">(</span>amd64<span class="o">)</span>
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ­å–œï¼å®‰è£…æˆåŠŸðŸ‘ï¼</p>
<h2 id="3-ç®€å•ä½¿ç”¨">3 ç®€å•ä½¿ç”¨</h2>
<p>ã€€ã€€<code>docker &lt;åŠ¨ä½œ&gt; --help</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹å„ä¸ªé€‰é¡¹çš„å«ä¹‰ã€‚</p>
<h3 id="31-åŸºæœ¬æ“ä½œ">3.1 åŸºæœ¬æ“ä½œ</h3>
<p>ã€€ã€€ï¼ˆ1ï¼‰æ‹‰å–é•œåƒï¼šdocker pull</p>
<p>ã€€ã€€é€‰é¡¹å¯ä»¥é€šè¿‡<code>docker pull --help</code>å‘½ä»¤æŸ¥çœ‹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># ä»ŽæŒ‡å®šåœ°å€èŽ·å–é•œåƒï¼Œ[Docker Registry åœ°å€[:ç«¯å£å·]/]ä»“åº“å[:æ ‡ç­¾]ï¼Œä¾‹baidu.com:8888/nignx:0.21</span>
$ docker pull <span class="o">[</span>é€‰é¡¹<span class="o">]</span> <span class="o">[</span>Docker Registry åœ°å€<span class="o">[</span>:ç«¯å£å·<span class="o">]</span>/<span class="o">]</span>ä»“åº“å<span class="o">[</span>:æ ‡ç­¾<span class="o">]</span>
<span class="c1"># ä»ŽDocker HubèŽ·å–é•œåƒ</span>
$ docker pull <span class="o">[</span>é€‰é¡¹<span class="o">]</span> &lt;ä»“åº“åï¼šæ ‡ç­¾&gt;
<span class="c1"># ä¾‹å¦‚</span>
$ sudo docker pull ubuntu:18.04

18.04: Pulling from library/ubuntu
e4ca327ec0e7: Pull <span class="nb">complete</span> 
Digest: sha256:9bc830af2bef73276515a29aa896eedfa7bdf4bdbc5c1063b4c457a4bbb8cd79
Status: Downloaded newer image <span class="k">for</span> ubuntu:18.04
docker.io/library/ubuntu:18.04
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ‹‰å–é•œåƒæ—¶å¯èƒ½å‡ºçŽ°å¦‚ä¸‹é”™è¯¯ï¼Œè§£å†³æ–¹æ¡ˆä»»é€‰ä¸‹é¢ä¹‹ä¸€ï¼š</p>
<ul>
<li>åœ¨dockerå‘½ä»¤å‰åŠ sudoï¼›</li>
<li>å°†å½“å‰ç”¨æˆ·åŠ å…¥åˆ°dockerç»„ï¼Œåœ¨å°†å½“å‰ç”¨æˆ·åˆ‡æ¢åˆ°dockerç»„ã€‚ï¼ˆå…·ä½“å‚è€ƒï¼šhttps://docs.docker.com/engine/install/linux-postinstall/ï¼‰</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># é”™è¯¯</span>
dial unix /var/run/docker.sock: connect: permission denied
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/image/pull</p>
</blockquote>
<p>ã€€ã€€é•œåƒæ˜¯ç”±å¤šå±‚å­˜å‚¨æž„æˆï¼Œæ‹‰å–é•œåƒæ—¶ä¹Ÿæ˜¯ä¸€å±‚ä¸€å±‚ä¸‹è½½ï¼Œä¸Šé¢çš„ä¾‹å­å¯èƒ½çœ‹ä¸å‡ºæ¥åˆ†å±‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹å¯ä»¥çœ‹å‡ºé•œåƒæ‹‰å–æ—¶åˆ†å±‚èŽ·å–ï¼Œå¹¶ä¼šåœ¨ä¸‹è½½ç»“æŸåŽç»™å‡ºé•œåƒå®Œæ•´çš„<code>sha256</code>æ‘˜è¦ï¼Œä»¥ç¡®ä¿ä¸‹è½½çš„ä¸€è‡´æ€§ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker pull ubuntu:18.04

18.04: Pulling from library/ubuntu
92dc2a97ff99: Pull <span class="nb">complete</span>
be13a9d27eb8: Pull <span class="nb">complete</span>
c8299583700a: Pull <span class="nb">complete</span>
Digest: sha256:4bc3ae6596938cb0d9e5ac51a1152ec9dcac2a1c50829c74abd9c4361e321b26
Status: Downloaded newer image <span class="k">for</span> ubuntu:18.04
docker.io/library/ubuntu:18.04
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ2ï¼‰è¿è¡Œå®¹å™¨ï¼šdocker run</p>
<p>ã€€ã€€ä¸‹é¢æ˜¯ä¸€ä¸ªå®¹å™¨è¿è¡Œçš„ç®€å•ç¤ºä¾‹ï¼Œè¿è¡Œ<code>ubuntu:18.04</code>é•œåƒï¼Œå¯åŠ¨äº¤äº’å¼shellï¼Œè¿è¡Œä¸¤æ¡å‘½ä»¤åŽç”¨<code>exit</code>é€€å‡ºã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># -i:äº¤äº’å¼æ“ä½œï¼Œ-t:ç»ˆç«¯ï¼Œ--rm:å®¹å™¨é€€å‡ºåŽåˆ é™¤å®¹å™¨ï¼Œ</span>
<span class="c1"># ubuntu:18.04:é•œåƒï¼Œbash:æ”¾åœ¨é•œåƒåŽï¼Œæ˜¯å¸Œæœ›åœ¨å®¹å™¨ä¸­æ‰§è¡Œçš„å‘½ä»¤ã€‚</span>
$ docker run -it --rm ubuntu:18.04 bash

<span class="c1"># è¿è¡Œè¯¥å‘½ä»¤ï¼Œå¹¶åœ¨å®¹å™¨ä¸­è¿è¡Œå‡ æ¡å‘½ä»¤ï¼Œç»“æžœå¦‚ä¸‹</span>
$ sudo docker run -it --rm ubuntu:18.04 bash

root@ae6350fe7dda:/# ls
bin  boot  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@ae6350fe7dda:/# cat /etc/os-release
<span class="nv">NAME</span><span class="o">=</span><span class="s2">&#34;Ubuntu&#34;</span>
<span class="nv">VERSION</span><span class="o">=</span><span class="s2">&#34;18.04.5 LTS (Bionic Beaver)&#34;</span>
<span class="nv">ID</span><span class="o">=</span>ubuntu
<span class="nv">ID_LIKE</span><span class="o">=</span>debian
<span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">&#34;Ubuntu 18.04.5 LTS&#34;</span>
<span class="nv">VERSION_ID</span><span class="o">=</span><span class="s2">&#34;18.04&#34;</span>
<span class="nv">HOME_URL</span><span class="o">=</span><span class="s2">&#34;https://www.ubuntu.com/&#34;</span>
<span class="nv">SUPPORT_URL</span><span class="o">=</span><span class="s2">&#34;https://help.ubuntu.com/&#34;</span>
<span class="nv">BUG_REPORT_URL</span><span class="o">=</span><span class="s2">&#34;https://bugs.launchpad.net/ubuntu/&#34;</span>
<span class="nv">PRIVACY_POLICY_URL</span><span class="o">=</span><span class="s2">&#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&#34;</span>
<span class="nv">VERSION_CODENAME</span><span class="o">=</span>bionic
<span class="nv">UBUNTU_CODENAME</span><span class="o">=</span>bionic
root@ae6350fe7dda:/# <span class="nb">exit</span>
<span class="nb">exit</span>
ubuntu@VM-0-12-ubuntu:~/docker_test$
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ3ï¼‰åˆ—å‡ºå·²ä¸‹è½½çš„é•œåƒï¼šdocker image ls</p>
<p>ã€€ã€€é•œåƒIDæ˜¯é•œåƒçš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æžœä¸¤ä¸ªé•œåƒçš„ä»“åº“åç§°ä¸åŒï¼Œä½†<code>Image id</code>ç›¸åŒï¼Œè¯´æ˜Žå®ƒä»¬æ˜¯åŒä¸€é•œåƒã€‚è¿™ä¸ªå‘½ä»¤ä¸‹åˆ—å‡ºçš„<code>SIZEæ€»å’Œ</code>å¹¶ä¸æ˜¯å®žé™…æ‰€æœ‰é•œåƒå®žé™…å ç”¨çš„ç©ºé—´å¤§å°ï¼Œå› ä¸ºDockerä½¿ç”¨<code>Union FS</code>ï¼Œç›¸åŒçš„å±‚ä»…ä¿å­˜ä¸€ä»½ï¼Œå®žé™…é•œåƒç¡¬ç›˜å ç”¨ç©ºé—´å¯èƒ½æ¯”è¿™ä¸ªåˆ—è¡¨é•œåƒå¤§å°çš„æ€»å’Œè¦å°å¾—å¤šã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker image ls

REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
ubuntu        18.04     54919e10a95d   <span class="m">9</span> days ago     63.1MB
hello-world   latest    d1165f221234   <span class="m">6</span> months ago   13.3kB

<span class="c1"># æŸ¥çœ‹é•œåƒæ‘˜è¦</span>
$ sudo docker image ls --digests

REPOSITORY TAG    DIGEST   ...
ubuntu     18.04  sha256:9bc830af2bef73276515a29aa896eedfa7bdf4bdbc5c1063b4c457a4bbb8cd79
...
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¦‚æžœä»“åº“åå’Œæ ‡ç­¾å‡ä¸º<code>&lt;none&gt;</code>ï¼Œè¯´æ˜Žè¿™æ˜¯ä¸€ä¸ªå’Œæ–°é•œåƒé‡åçš„æ—§é•œåƒï¼Œç§°ä¸º<code>è™šæ‚¬é•œåƒï¼ˆdangling imageï¼‰</code>å¯ä»¥éšæ„åˆ é™¤ã€‚å¦‚æžœåªæœ‰æ ‡ç­¾å‡ºçŽ°<code>none</code>ï¼Œè¯´æ˜Žè¿™æ˜¯ä¸€ä¸ªiä¸­é—´å±‚é•œåƒï¼Œå¯ä»¥é€šè¿‡<code>docker image ls -a</code>æŸ¥çœ‹ã€‚</p>
<p>ã€€ã€€è¿˜æ”¯æŒè¿‡æ»¤å™¨å‚æ•°<code>--filter</code>ï¼Œå…·ä½“ä½¿ç”¨è¯´æ˜Žå¯å‚è€ƒ<code>å®˜æ–¹æ–‡æ¡£</code>æˆ–<code>Dockerâ€”â€”ä»Žå…¥é—¨åˆ°å®žè·µ</code>ç­‰ã€‚</p>
<p>ã€€ã€€ï¼ˆï¼”ï¼‰æŸ¥çœ‹é•œåƒã€å®¹å™¨ã€æ•°æ®å·æ‰€å ç”¨çš„ç©ºé—´ï¼šdocker system df</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker system df

TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE
Images          <span class="m">2</span>         <span class="m">1</span>         63.15MB   63.14MB <span class="o">(</span>99%<span class="o">)</span>
Containers      <span class="m">1</span>         <span class="m">0</span>         0B        0B
Local Volumes   <span class="m">0</span>         <span class="m">0</span>         0B        0B
Build Cache     <span class="m">0</span>         <span class="m">0</span>         0B        0B
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ5ï¼‰åˆ é™¤æœ¬åœ°é•œåƒï¼šdocker image rm</p>
<p>ã€€ã€€å…¶ä¸­<code>&lt;é•œåƒ&gt;</code>å¯ä»¥æ˜¯é•œåƒåï¼ˆ<code>&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;</code>ï¼‰ã€é•œåƒçš„å®Œæ•´<code>IMAGE ID</code>ï¼Œé•œåƒIDçš„å‰å‡ ä½ï¼ˆè¶³ä»¥å’Œåˆ«çš„é•œåƒåŒºåˆ†ï¼‰ï¼Œé•œåƒæ‘˜è¦ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$  sudo docker image rm ubuntu:18.04

Untagged: ubuntu:18.04
Untagged: ubuntu@sha256:9bc830af2bef73276515a29aa896eedfa7bdf4bdbc5c1063b4c457a4bbb8cd79
Deleted: sha256:54919e10a95d6f756f7286dc0fa6b3e25b637a7f90e361504b0b14ab6762a547
Deleted: sha256:6babb56be2593d69d561cae7ad16b670a1ee7c0a32b4fa715007fba7febd5ddb
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€é•œåƒåˆ é™¤æ—¶ä¹Ÿæ˜¯ä»Žä¸Šå±‚å‘ä¸‹å±‚ä¾æ¬¡åˆ é™¤ï¼Œå¦‚æžœå…¶å®ƒé•œåƒä¾èµ–å½“å‰è¦åˆ é™¤çš„è¿™ä¸€å±‚ï¼Œé‚£ä¹ˆè¿™ä¸€å±‚ä¸ä¼šè¢«çœŸå®žåˆ é™¤ï¼Œåªæœ‰è¿™ä¸€å±‚å’Œæ‰€æœ‰é•œåƒéƒ½æ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»æ—¶ï¼Œæ‰ä¼šè¢«çœŸå®žçš„åˆ é™¤ã€‚</p>
<p>ã€€ã€€å¯ä»¥é…åˆ<code>docker image ls -q</code>é…åˆä½¿ç”¨<code>docker image rm</code>ï¼Œä¾‹å¦‚ï¼Œè¦åˆ é™¤æ‰€æœ‰ä»“åº“åä¸º<code>redis</code>çš„é•œåƒï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker image rm <span class="k">$(</span>docker image ls -q redis<span class="k">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ6ï¼‰<code>docker commit</code>å‘½ä»¤å¯ä»¥å°†å®¹å™¨å­˜å‚¨å±‚ä¿å­˜ä¸ºé•œåƒï¼Œä»Žè€Œå’ŒåŸºç¡€é•œåƒåˆ†å±‚ç»„æˆæ–°çš„é•œåƒï¼Œä½†ä¸€èˆ¬<code>ä¸ä½¿ç”¨</code>æ­¤å‘½ä»¤å®šåˆ¶é•œåƒï¼Œé™¤äº†åˆ¶ä½œé•œåƒçš„äººæ²¡æœ‰äººçŸ¥é“æ‰§è¡Œè¿‡ä»€ä¹ˆå‘½ä»¤ï¼Œæ€Žä¹ˆç”Ÿæˆçš„é•œåƒï¼Œè¢«ç§°ä¸ºé»‘ç®±é•œåƒã€‚è¯¥å‘½ä»¤ç”¨äºŽç‰¹æ®Šåœºåˆï¼Œå¦‚å…¥ä¾µåŽä¿å­˜çŽ°åœºã€‚</p>
<p>ã€€ã€€ï¼ˆ7ï¼‰é‡å‘½åé•œåƒ</p>
<p>ã€€ã€€æˆ‘ä»¬åœ¨ä¸‹è½½é•œåƒæ—¶ï¼ŒæŒ‰ç…§é•œåƒåœ°å€ä¸‹è½½ä¸‹æ¥çš„é•œåƒå¯èƒ½æ˜¯è¿™æ ·ï¼Œé•œåƒåç§°éžå¸¸é•¿ï¼Œä¸ä¾¿äºŽä½¿ç”¨</p>
<pre><code>REPOSITORY                                                      TAG     IMAGE         ...
registry.cn-shanghai.aliyuncs.com/tcc-public/tianchi_antispam   v1      2b8b72f601da  ...
</code></pre><p>ã€€ã€€è¿™æ—¶æˆ‘ä»¬å¯ä»¥é‡å‘½åé•œåƒï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker tag 2b8b72f601da tianchi_antispam:v1
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ­¤æ—¶ä¼šå‡ºçŽ°ä¸¤ä¸ªImage IDç›¸åŒçš„é•œåƒï¼Œæˆ‘ä»¬å°†åŽŸæ¥çš„åå­—å¾ˆé•¿çš„é•œåƒåˆ é™¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker image rm registry.cn-shanghai.aliyuncs.com/tcc-public/tianchi_antispam
</code></pre></td></tr></table>
</div>
</div><h3 id="32-å®¹å™¨æ“ä½œ">3.2 å®¹å™¨æ“ä½œ</h3>
<p>ã€€ã€€ï¼ˆ1ï¼‰æ–°å»ºä¸€ä¸ªå®¹å™¨å¹¶å¯åŠ¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker run ubuntu /bin/echo <span class="s1">&#39;Hello world&#39;</span>

Hello world
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å½“åˆ©ç”¨ <code>docker run</code> æ¥åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDocker åœ¨åŽå°è¿è¡Œæ—¶é¦–å…ˆæ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨åˆ™ä»ŽRegistryä¸‹è½½ï¼Œç„¶åŽåˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨ã€‚å¯åŠ¨å®¹å™¨æ—¶ä¸ºå®¹å™¨åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½å®¹å™¨å­˜å‚¨å±‚ï¼Œä¸ºå®¹å™¨ä»Žå®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æŽ¥å£ä¸­æ¡¥æŽ¥ä¸€ä¸ªè™šæ‹ŸæŽ¥å£ï¼Œå¹¶ä»Žåœ°å€æ± ä¸ºå®¹å™¨é…ç½®ä¸€ä¸ªIPåœ°å€ã€‚é…ç½®å®Œæ¯•åŽæ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œåº”ç”¨ç¨‹åºæ‰§è¡Œå®Œæ¯•åŽå®¹å™¨ç»ˆæ­¢ã€‚</p>
<p>ã€€ã€€ï¼ˆ2ï¼‰ä»¥å®ˆæŠ¤æ€ï¼ˆåŽå°ï¼‰è¿è¡Œå®¹å™¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker run -d &lt;image&gt; &lt;cmd&gt;

$ sudo docker run -d ubuntu /bin/sh -c <span class="s2">&#34;while true; do echo hello world; sleep 1; done&#34;</span>

88d0d78c3de5115c9ba18cda24110b241246534c0c03a71a2b15d8da65665860
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯ä»¥é€šè¿‡<code>docker container logs</code>å‘½ä»¤ï¼ŒèŽ·å–å®¹å™¨çš„è¾“å‡ºä¿¡æ¯ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker container logs <span class="o">[</span>container ID or NAMES<span class="o">]</span>

hello world
hello world
hello world
. . .
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ3ï¼‰æŸ¥çœ‹å®¹å™¨åˆ—è¡¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨</span>
$ sudo docker container ls
$ sudo docker ps
<span class="c1"># æŸ¥çœ‹å·²åœæ­¢çš„å®¹å™¨</span>
$ sudo docker container ls -a
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ4ï¼‰åœæ­¢è¿è¡Œå®¹å™¨ã€‚<code>NAMES</code>æ˜¯å®¹å™¨å¯åŠ¨æ—¶è®¾ç½®çš„<code>--name</code>é€‰é¡¹ï¼Œå¯åœ¨å®¹å™¨æŸ¥çœ‹å‘½ä»¤çš„<code>NAMES</code>ä¸€åˆ—æŸ¥çœ‹ï¼Œ<code>container</code>å¯çœç•¥ã€‚Dockerå®¹å™¨ä¸­æŒ‡å®šçš„åº”ç”¨ç»ˆç»“æ—¶ï¼Œå®¹å™¨ä¹Ÿè‡ªåŠ¨åœæ­¢è¿è¡Œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container stop <span class="o">[</span>container ID or NAMES<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ5ï¼‰é‡æ–°å¯åŠ¨ç»ˆæ­¢çš„å®¹å™¨ï¼Œä¸‹é¢é‡å¯Hello worldå®¹å™¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container start <span class="o">[</span>container ID or NAMES<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ6ï¼‰åˆ é™¤</p>
<p>ã€€ã€€åˆ é™¤å¤„äºŽç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container rm <span class="o">[</span>container ID or NAMES<span class="o">]</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ¸…ç†æ‰€æœ‰å¤„äºŽç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container prune
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ7ï¼‰å¯¼å…¥å’Œå¯¼å‡º</p>
<p>ã€€ã€€å¯¼å‡ºæœ¬åœ°æŸä¸ªå®¹å™¨å¿«ç…§åˆ°æœ¬åœ°æ–‡ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker <span class="nb">export</span> <span class="o">[</span>container ID<span class="o">]</span> &gt; <span class="o">[</span>å¿«ç…§å<span class="o">]</span>.tar
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€<code>docker import</code>ä»Žå®¹å™¨å¿«ç…§æ–‡ä»¶ä¸­å¯¼å…¥ä¸ºé•œåƒï¼Œå’Œå¯¼å…¥é•œåƒå­˜å‚¨æ–‡ä»¶ï¼ˆ<code>docker load</code>ï¼‰çš„åŒºåˆ«åœ¨äºŽå®¹å™¨å¿«ç…§æ–‡ä»¶æ˜¯â€œé»‘ç›’â€ï¼Œä¼šä¸¢å¤±æ‰€æœ‰çš„åŽ†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼Œè€Œé•œåƒå­˜å‚¨æ–‡ä»¶ä¿å­˜å®Œæ•´è®°å½•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo cat <span class="o">[</span>å¿«ç…§æ–‡ä»¶<span class="o">]</span> <span class="p">|</span> docker import - &lt;ç”¨æˆ·å&gt;/&lt;ä»“åº“å:æ ‡ç­¾&gt;
<span class="c1"># ä»ŽURLæˆ–ç›®å½•å¯¼å…¥</span>
$ sudo docker import http://example.com/exampleimage.tgz example/imagerepo
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ8ï¼‰è¿›å…¥å®¹å™¨ï¼š<code>docker exec [é€‰é¡¹] å®¹å™¨å†…æ‰§è¡Œçš„å‘½ä»¤ [å‘½ä»¤å‚æ•°]</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># å¼€å¯ä¸€ä¸ªbashå¯¹è¯</span>
$ sudo docker <span class="nb">exec</span> -it &lt;IMAGE_ID&gt; bash
<span class="c1"># ä¾‹</span>
$ docker <span class="nb">exec</span> -it 0d588c4d3cb7 bash
</code></pre></td></tr></table>
</div>
</div><p>ï¼ˆ9ï¼‰æ–‡ä»¶æ‹·è´</p>
<p>ä»Žå®¹å™¨æ‹·è´æ–‡ä»¶åˆ°å®¿ä¸»æœº</p>
<p>docker cp tianchi_executor.py 0d588c4d3cb7:/root/tianchi_aiflow/workflows/tianchi_main/</p>
<pre><code>docker cp mycontainer:/opt/testnew/file.txt /opt/test/
</code></pre><p>docker cp 0d588c4d3cb7:/root/tianchi_entry/result.csv .</p>
<p>ä»Žå®¿ä¸»æœºæ‹·è´æ–‡ä»¶åˆ°å®¹å™¨</p>
<pre><code>docker cp /opt/test/file.txt mycontainer:/opt/testnew/
</code></pre><p>docker cp /root/aaigcup/tianchi_executor.py 0d588c4d3cb7:/root/tianchi_aiflow/workflows/tianchi_main/</p>
<p>docker cp /root/aaigcup/tf_main.py 0d588c4d3cb7:/root/tianchi_aiflow/workflows/tianchi_main/</p>
<h3 id="33-dockerfileå®šåˆ¶é•œåƒ">3.3 Dockerfileå®šåˆ¶é•œåƒ</h3>
<blockquote>
<p>æ¥æºï¼šhttps://yeasy.gitbook.io/docker_practice/image/build</p>
</blockquote>
<p>ã€€ã€€Dockerfileå°±æ˜¯è®°å½•é•œåƒæ¯å±‚ä¿®æ”¹ã€å®‰è£…ã€æž„å»ºã€æ“ä½œå‘½ä»¤çš„è„šæœ¬ï¼Œä¸Ž<code>docker commit</code>æž„å»ºçš„é»‘ç›’é•œåƒä¸åŒï¼Œå®ƒèƒ½æž„å»ºä½“ç§¯é€‚å½“ã€æ“ä½œè®°å½•æ¸…æ™°çš„é•œåƒã€‚</p>
<p>ã€€ã€€Dockerfileæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå®ƒç”±è®¸å¤šæŒ‡ä»¤ç»„æˆï¼Œæ¯æ¡æŒ‡ä»¤æž„å»ºé•œåƒçš„ä¸€å±‚ï¼Œæè¿°è¯¥å±‚åº”è¯¥æ€Žæ ·æž„å»ºã€‚</p>
<p>ã€€ã€€å®šåˆ¶é•œåƒæ—¶å…ˆç”¨æŒ‡ä»¤ç¼–å†™Dockerfileæ–‡ä»¶ï¼Œç„¶åŽä½¿ç”¨<code>docker build</code>å‘½ä»¤æž„å»ºé•œåƒã€‚</p>
<h4 id="331-å®šåˆ¶é•œåƒç®€å•ç¤ºä¾‹">3.3.1 å®šåˆ¶é•œåƒç®€å•ç¤ºä¾‹</h4>
<p>ã€€ã€€ä¸‹é¢æ˜¯ç”¨Dockerfileæž„å»ºä¸€ä¸ªç®€å•çš„å®šåˆ¶nginxé•œåƒï¼š</p>
<p>ã€€ã€€ï¼ˆ1ï¼‰åœ¨ç©ºç™½ç›®å½•ä¸­ï¼Œå»ºç«‹ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå‘½åä¸º<code>Dockerfile</code>ï¼Œå…¶ä¸­<code>touch</code>å‘½ä»¤æ˜¯å¿«é€Ÿåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ mkdir mynginx
$ <span class="nb">cd</span> mynginx
$ touch Dockerfile
$ vim Dockerfile
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€Dockerfileçš„å†…å®¹ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> nginx</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> <span class="nb">echo</span> <span class="s1">&#39;&lt;h1&gt;Hello, Docker!&lt;/h1&gt;&#39;</span> &gt; /usr/share/nginx/html/index.html<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ2ï¼‰æž„å»ºé•œåƒï¼Œåœ¨<code>Dockerfile</code>æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œæœ¬ä¾‹ä¸­ä¸º<code>mynginx</code>ã€‚æ³¨æ„<code>nginx:v2</code>åŽçš„<code>.</code>ä¸è¦æ¼æŽ‰ï¼Œå®ƒè¡¨ç¤ºå½“å‰ç›®å½•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">~/mynginx$ sudo docker build -t nginx:v2 .

Sending build context to Docker daemon  2.048kB
Step 1/2 : FROM nginx
 ---&gt; 822b7ec2aaf2
Step 2/2 : RUN <span class="nb">echo</span> <span class="s1">&#39;&lt;h1&gt;Hello, Docker!&lt;/h1&gt;&#39;</span> &gt; /usr/share/nginx/html/index.html
 ---&gt; Running in c07f4978691f
Removing intermediate container c07f4978691f
 ---&gt; 0abd2a2a7c16
Successfully built 0abd2a2a7c16
Successfully tagged nginx:v2
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯ä»¥çœ‹åˆ°<code>Run</code>æŒ‡ä»¤å…ˆå¯åŠ¨äº†ä¸€ä¸ªå®¹å™¨<code>c07f4978691f</code>ç”¨äºŽæ‰§è¡Œå‘½ä»¤ï¼Œç„¶åŽæäº¤è¿™ä¸€å±‚<code>0abd2a2a7c16</code>ï¼ŒéšåŽåˆ é™¤äº†å®¹å™¨<code>c07f4978691f</code>ã€‚</p>
<p>ã€€ã€€ï¼ˆ3ï¼‰æŸ¥çœ‹æž„å»ºçš„<code>nginx:v2</code>é•œåƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker image ls nginx

REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
nginx        v2        0abd2a2a7c16   <span class="m">7</span> minutes ago   133MB
nginx        latest    822b7ec2aaf2   <span class="m">6</span> days ago      133MB
</code></pre></td></tr></table>
</div>
</div><h4 id="332-å¸¸ç”¨æŒ‡ä»¤">3.3.2 å¸¸ç”¨æŒ‡ä»¤</h4>
<p>ã€€ã€€Dockerfileä¸­æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå»ºç«‹ä¸€å±‚ï¼Œå±‚æ•°è¿‡å¤šä¼šå¢žåŠ æž„å»ºéƒ¨ç½²æ—¶é—´ï¼Œé•œåƒè‡ƒè‚¿æ··ä¹±ï¼Œå¹¶ä¸”Union FSæœ‰æœ€å¤§å±‚æ•°é™åˆ¶ï¼ˆå¦‚AUFSä¸èƒ½è¶…è¿‡127å±‚ï¼‰ï¼Œåº”å½“<code>åˆç†ç»„ç»‡æŒ‡ä»¤</code>ï¼Œæž„å»ºç®€æ´å¹²å‡€çš„é•œåƒã€‚æœ‰çš„æŒ‡ä»¤å…·æœ‰ä¸¤ç§æ ¼å¼ï¼Œ<code>shell</code>å’Œ<code>exec</code>æ ¼å¼ï¼Œæ³¨æ„åœ¨ç”¨<code>exec</code>æ ¼å¼æ—¶ä¸€å®šè¦ä½¿ç”¨åŒå¼•å·<code>&quot;&quot;</code>ï¼Œä¸è¦ä½¿ç”¨å•å¼•å·<code>''</code>ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰FROM</strong></p>
<p>ã€€ã€€å®šåˆ¶é•œåƒä¸€èˆ¬ä»¥ä¸€ä¸ªé•œåƒä¸ºåŸºç¡€ï¼Œåœ¨ä¸Šé¢è¿›è¡Œæ“ä½œä»¥æž„å»ºæ–°çš„é•œåƒã€‚<code>FROM</code>å‘½ä»¤ç”¨æ¥æŒ‡å®šä¸€ä¸ªåŸºç¡€é•œåƒï¼Œæ¯”å¦‚3.3.1ç¤ºä¾‹ä¸­çš„<code>nginx</code>ã€‚</p>
<p>ã€€ã€€åœ¨Dockerfileä¸­ï¼Œ<code>å¿…é¡»</code>æŒ‡å®šåŸºç¡€é•œåƒã€‚Docker Hubæä¾›äº†éžå¸¸å¤šçš„å®˜æ–¹é•œåƒï¼Œæ¯”å¦‚æ“ä½œç³»ç»Ÿé•œåƒï¼ˆubuntuã€centosï¼‰ã€æœåŠ¡ç±»é•œåƒï¼ˆnginxã€redisã€httpdã€mongoï¼‰ã€è¯­è¨€çŽ¯å¢ƒé•œåƒï¼ˆnodeã€pythonã€golangï¼‰ç­‰ã€‚å¦‚æžœä¸æƒ³é€‰æ‹©çŽ°æœ‰çš„åŸºç¡€é•œåƒï¼Œå¯ä»¥è®¾ç½®åŸºç¡€é•œåƒä¸º<code>scratch</code>ï¼Œè¡¨ç¤ºé•œåƒä¸ä»¥ä»»ä½•é•œåƒä¸ºåŸºç¡€ï¼Œä¹‹åŽçš„æŒ‡ä»¤ä¼šä½œä¸ºé•œåƒçš„ç¬¬ä¸€å±‚ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ FROM scratch
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯¹äºŽé™æ€ç¼–è¯‘çš„ç¨‹åºæ¥è¯´ï¼Œå…¶ä¾èµ–åº“å·²ç»åŒ…å«åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œç›´æŽ¥å°†å¯æ‰§è¡Œæ–‡ä»¶å¤åˆ¶è¿›é•œåƒä¼šè®©é•œåƒä½“ç§¯æ›´åŠ å°å·§ï¼Œä½¿ç”¨Goè¯­è¨€å¼€å‘çš„åº”ç”¨å¾ˆå¤šä¼šä½¿ç”¨è¿™ç§æ–¹å¼æ¥åˆ¶ä½œé•œåƒã€‚</p>
<p><strong>ï¼ˆ2ï¼‰RUN</strong></p>
<p>ã€€ã€€<code>RUN</code>ç”¨æ¥æ‰§è¡Œç»ˆç«¯å‘½ä»¤ï¼Œæœ‰<code>shell</code>å’Œ<code>exec</code>ä¸¤ç§ã€‚</p>
<ul>
<li><code>shell</code>æ ¼å¼ï¼šå°±åƒç›´æŽ¥åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ä¸€æ ·ï¼Œæ¯”å¦‚åœ¨3.3.1ç¤ºä¾‹ä¸­çš„<code>RUN</code>æŒ‡ä»¤ã€‚</li>
<li><code>exec</code>æ ¼å¼ï¼šæ›´åƒå‡½æ•°è°ƒç”¨ä¸­çš„æ ¼å¼ï¼Œ<code>RUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;,&quot;å‚æ•°1&quot;,&quot;å‚æ•°2&quot;]</code>ã€‚</li>
</ul>
<p>ã€€ã€€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ¡<code>RUN</code>æŒ‡ä»¤å°±ä¼šå»ºç«‹ä¸€å±‚é•œåƒï¼Œä»¥ä¸‹é¢ç¼–è¯‘ã€å®‰è£…rediså¯æ‰§è¡Œæ–‡ä»¶çš„é”™è¯¯ç¤ºä¾‹ä¸ºä¾‹ï¼Œä¸‹é¢çš„Dockerfileä¼šå¯¼è‡´è¿è¡Œæ—¶ä¸éœ€è¦çš„å†…å®¹ä¹Ÿè¢«è£…è¿›é•œåƒï¼Œå¦‚ç¼–è¯‘çŽ¯å¢ƒã€æ›´æ–°çš„è½¯ä»¶åŒ…ï¼Œå¯¼è‡´é•œåƒè‡ƒè‚¿ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> debian:stretch</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update<span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get install -y gcc libc6-dev make wget<span class="err">
</span><span class="err"></span><span class="k">RUN</span> wget -O redis.tar.gz <span class="s2">&#34;http://download.redis.io/releases/redis-5.0.3.tar.gz&#34;</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> mkdir -p /usr/src/redis<span class="err">
</span><span class="err"></span><span class="k">RUN</span> tar -xzf redis.tar.gz -C /usr/src/redis --strip-components<span class="o">=</span><span class="m">1</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> make -C /usr/src/redis<span class="err">
</span><span class="err"></span><span class="k">RUN</span> make -C /usr/src/redis install<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ä¸Šé¢çš„é”™è¯¯ç¤ºä¾‹åœ¨åŸºç¡€é•œåƒä¹‹ä¸Šåˆ›å»ºäº†7å±‚é•œåƒï¼Œéžå¸¸è‡ƒè‚¿ï¼Œè€Œä»£ç çš„ç›®æ ‡åªæ˜¯ç¼–è¯‘ã€å®‰è£…rediså¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªéœ€è¦ä¸€å±‚å°±å¯ä»¥äº†ã€‚æ‰€ä»¥åº”è¯¥åªä½¿ç”¨ä¸€æ¬¡<code>RUN</code>æŒ‡ä»¤ï¼Œå°†æ‰€æœ‰å‘½ä»¤ç”¨<code>&amp;&amp;</code>ä¸²è”èµ·æ¥ã€‚</p>
<p>ã€€ã€€ä¸ºäº†æ–¹ä¾¿æ–‡ä»¶é˜…è¯»ï¼ŒDockerfileæ”¯æŒ<code>\</code>çš„è¡Œå°¾å‘½ä»¤æ¢è¡Œå’Œè¡Œé¦–<code>#</code>æ³¨é‡Šçš„æ ¼å¼ã€‚</p>
<p>ã€€ã€€æž„å»ºæ¯ä¸€å±‚æ—¶è¿˜éœ€è¦æ³¨æ„ï¼Œä¸Žç¼–å†™shellè„šæœ¬ä¸åŒçš„æ˜¯ï¼Œæž„å»ºé•œåƒæ—¶ï¼Œè¦æ¸…ç†æŽ‰æ— å…³å†…å®¹ï¼Œæ¯”å¦‚ç¼–è¯‘æž„å»ºæ‰€éœ€è¦çš„è½¯ä»¶ã€ä¸‹è½½çš„æ–‡ä»¶ã€<code>apt</code>ç¼“å­˜æ–‡ä»¶ç­‰ã€‚æˆ‘ä»¬æœ€åŽç¼–å†™çš„Dockerfileå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> debian:stretch</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> <span class="nb">set</span> -x<span class="p">;</span> <span class="nv">buildDeps</span><span class="o">=</span><span class="s1">&#39;gcc libc6-dev make wget&#39;</span> <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get update <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get install -y <span class="nv">$buildDeps</span> <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> wget -O redis.tar.gz <span class="s2">&#34;http://download.redis.io/releases/redis-5.0.3.tar.gz&#34;</span> <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> mkdir -p /usr/src/redis <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> tar -xzf redis.tar.gz -C /usr/src/redis --strip-components<span class="o">=</span><span class="m">1</span> <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> make -C /usr/src/redis <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> make -C /usr/src/redis install <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/* <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> rm redis.tar.gz <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -r /usr/src/redis <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get purge -y --auto-remove <span class="nv">$buildDeps</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€buildDepsã€‘æ˜¯ä»€ä¹ˆï¼Ÿbuild-depå‚æ•°æ˜¯æŒ‡å»ºç«‹æŸä¸ªè¦ç¼–è¯‘è½¯ä»¶çš„çŽ¯å¢ƒï¼Œæ¯”å¦‚æˆ‘ä»¬çŽ°åœ¨è¦æ‰‹å·¥ç¼–è¯‘apacheï¼Œé‚£å¦‚æžœæƒ³è®©ç¼–è¯‘æ­£å¸¸é€šè¿‡ï¼Œä½ å¯ä»¥äº‹å…ˆæŠŠç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„è½¯ä»¶åŒ…å…ˆé…ç½®å¥½ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰COPYå’ŒADD</strong></p>
<p>ã€€ã€€<code>COPY</code>æŒ‡ä»¤ä»Žä¸Šä¸‹æ–‡ç›®å½•ä¸­ï¼Œå°†<code>&lt;æºè·¯å¾„&gt;</code>çš„æ–‡ä»¶å¤åˆ¶åˆ°æ–°ä¸€å±‚çš„é•œåƒå†…çš„<code>&lt;ç›®æ ‡è·¯å¾„&gt;</code>ä½ç½®ã€‚<code>COPY</code>ä¹Ÿæœ‰ä¸¤ç§æ ¼å¼ï¼š</p>
<ul>
<li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;æºè·¯å¾„&gt;... &lt;ç›®æ ‡è·¯å¾„&gt;</code></li>
<li><code>COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;æºè·¯å¾„1&gt;&quot;,... &quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;]</code></li>
</ul>
<p>ã€€ã€€å…¶ä¸­<code>&lt;æºè·¯å¾„&gt;</code>å¯ä»¥æ˜¯å¤šä¸ªï¼Œé€šé…ç¬¦éœ€è¦æ»¡è¶³Goçš„filepath.Matchè§„åˆ™ï¼›<code>&lt;ç›®æ ‡è·¯å¾„&gt;</code>å¯ä»¥æ˜¯å®¹å™¨å†…çš„ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹äºŽå·¥ä½œç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æžœç›®æ ‡è·¯å¾„ä¸å­˜åœ¨ï¼Œä¼šåœ¨å¤åˆ¶æ–‡ä»¶å‰åˆ›å»ºç¡®å®žç›®å½•ã€‚æ¯”å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">COPY</span> package.json /usr/src/app/<span class="err">
</span><span class="err"></span><span class="k">COPY</span> hom* /mydir/<span class="err">
</span><span class="err"></span><span class="k">COPY</span> hom?.txt /mydir/<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€<code>COPY</code>æŒ‡ä»¤ä¼šä¿ç•™æºæ–‡ä»¶çš„å„ç§å…ƒæ•°æ®ï¼Œæ¯”å¦‚è¯»ã€å†™ã€æ‰§è¡Œæƒé™ç­‰ã€‚</p>
<p>ã€€ã€€<code>ADD</code>å’Œ<code>COPY</code>åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†åº”å°½å¯èƒ½åœ°ä½¿ç”¨<code>COPY</code>ï¼Œè¿™é‡Œä¸å¯¹<code>ADD</code>åšè¯¦ç»†ä»‹ç»ã€‚ä½†<code>ADD</code>å…·æœ‰è‡ªåŠ¨è§£åŽ‹ç¼©çš„åŠŸèƒ½ï¼Œé€‚åˆç”¨äºŽå°†ä¸€ä¸ªåŽ‹ç¼©æ–‡ä»¶è‡ªåŠ¨è§£åŽ‹åˆ°<code>&lt;ç›®æ ‡è·¯å¾„&gt;</code>ä¸­ã€‚</p>
<p><strong>ï¼ˆ4ï¼‰CMD</strong></p>
<p>ã€€ã€€Dockerå®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹ï¼Œåœ¨å¯åŠ¨å®¹å™¨æ—¶ï¼Œéœ€è¦æŒ‡å®šæ‰€è¿è¡Œçš„ç¨‹åºåŠå‚æ•°ã€‚<code>CMD</code>ç”¨æ¥æŒ‡å®šé»˜è®¤çš„å®¹å™¨ä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤ï¼Œå¦‚<code>/bin/bash</code>ï¼Œubuntué•œåƒçš„<code>CMD</code>æ˜¯<code>/bin/bash</code>ï¼Œå½“æˆ‘ä»¬ç›´æŽ¥è¿è¡Œ<code>docker run -it ubuntu</code>æ—¶ï¼Œå°±ä¼šç›´æŽ¥è¿›å…¥<code>bash</code>ï¼Œæƒ³è¦åœ¨è¿è¡Œæ—¶è¿è¡Œåˆ«çš„å‘½ä»¤ï¼Œéœ€è¦åœ¨è¿è¡Œå‘½ä»¤ä¸­æŒ‡å‡ºï¼Œå¦‚<code>docker run -it ubuntu cat /etc/os-release</code>ï¼Œæ­¤æ—¶å°±ä¸ä¼šè¿›å…¥<code>bash</code>ï¼Œè€Œæ˜¯è¾“å‡ºç³»ç»Ÿç‰ˆæœ¬ä¿¡æ¯ã€‚</p>
<p>ã€€ã€€<code>CMD</code>å‘½ä»¤ä¹Ÿæœ‰ä¸¤ç§æ ¼å¼ï¼Œ</p>
<ul>
<li><code>shell</code> æ ¼å¼ï¼š<code>CMD &lt;å‘½ä»¤&gt;</code></li>
<li><code>exec</code> æ ¼å¼ï¼š<code>CMD [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;...]</code></li>
</ul>
<p>ã€€ã€€ä¸€èˆ¬æŽ¨èä½¿ç”¨<code>exec</code>æ ¼å¼ï¼Œä½¿ç”¨<code>shell</code>å½¢å¼åœ¨å®žé™…æ‰§è¡Œä¸­ä¹Ÿä¼šå˜æˆ<code>sh -c</code>çš„å‚æ•°å½¢å¼è¿›è¡Œæ‰§è¡Œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="c"># ä½¿ç”¨shellå½¢å¼</span><span class="err">
</span><span class="err"></span><span class="k">CMD</span> <span class="nb">echo</span> <span class="nv">$HOME</span><span class="err">
</span><span class="err"></span><span class="c"># å®žé™…æ‰§è¡Œ</span><span class="err">
</span><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;-c&#34;</span><span class="p">,</span> <span class="s2">&#34;echo $HOME&#34;</span><span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ³¨æ„å®¹å™¨æ˜¯è¿›ç¨‹ï¼Œä¸æ˜¯æ“ä½œç³»ç»Ÿï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰åŽå°æœåŠ¡ï¼Œå…¶ä¸»è¿›ç¨‹è¿è¡Œçš„å‘½ä»¤ç»“æŸåŽå®¹å™¨å°±ä¼šé€€å‡ºï¼Œå¦‚æžœæˆ‘ä»¬å°†å¯åŠ¨nginxæœåŠ¡çš„å‘½ä»¤å†™æˆä¸‹é¢è¿™æ ·ï¼Œä¼šå‘çŽ°å®¹å™¨æ‰§è¡Œå®Œæ¯•åŽç«‹åˆ»é€€å‡ºäº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">CMD</span> service nginx start<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ä¸Šé¢çš„å‘½ä»¤å®žé™…æ‰§è¡Œæ˜¯å®žé™…æ˜¯ä¸‹é¢è¿™æ ·ï¼Œä¸»è¿›ç¨‹ä¸æ˜¯<code>service</code>è€Œæ˜¯<code>sh</code>ï¼Œè€Œ<code>sh</code>æ‰§è¡Œå®Œ<code>service nginx start</code>ä¹‹åŽå°±ç»“æŸé€€å‡ºäº†ï¼Œå®¹å™¨ä¹Ÿå°±é€€å‡ºäº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;sh&#34;</span><span class="p">,</span> <span class="s2">&#34;-c&#34;</span><span class="p">,</span> <span class="s2">&#34;service nginx start&#34;</span><span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ‰€ä»¥èƒ½å¤Ÿè¾¾åˆ°ç›®çš„çš„åšæ³•æ˜¯æ‰§è¡Œ<code>nginx</code>å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ä¸”è¦ä»¥å‰å°å½¢å¼è¿è¡Œï¼Œå¦åˆ™è¯¥å‘½ä»¤æ‰§è¡Œå®Œæ¯•å®¹å™¨åˆé€€å‡ºäº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;nginx&#34;</span><span class="p">,</span> <span class="s2">&#34;-g&#34;</span><span class="p">,</span> <span class="s2">&#34;daemon off;&#34;</span><span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p><strong>ï¼ˆ5ï¼‰WORKDIR</strong></p>
<p>ã€€ã€€<code>WORKDIR</code>ç”¨æ¥æŒ‡å®šå·¥ä½œç›®å½•ï¼ˆå½“å‰ç›®å½•ï¼‰ï¼Œä¹‹åŽ<code>å„å±‚</code>çš„å½“å‰ç›®å½•å°±ä¿®æ”¹ä¸ºæŒ‡å®šçš„å·¥ä½œç›®å½•ï¼Œå¦‚æžœç›®å½•ä¸å­˜åœ¨ï¼Œä¼šå»ºç«‹è¯¥ç›®å½•ï¼Œæ ¼å¼ä¸ºï¼š<code>WORKDIR &lt;å·¥ä½œç›®å½•è·¯å¾„&gt;</code>ã€‚</p>
<p>ã€€ã€€æ³¨æ„å’Œ<code>RUN cd</code>å‘½ä»¤çš„åŒºåˆ«ï¼š<code>RUN</code>æŒ‡ä»¤æ‰§è¡Œä¸€æ¬¡ï¼Œåˆ›å»ºä¸€å±‚æ–°çš„é•œåƒï¼Œæ‰€ä»¥<code>RUN cd</code>åªèƒ½æ”¹å˜å½“å‰å±‚çš„æ‰§è¡ŒçŽ¯å¢ƒï¼Œè€Œ<code>WORKDIR</code>å¯ä»¥æ”¹å˜ä¹‹åŽæ‰€æœ‰å±‚çš„å·¥ä½œç›®å½•ã€‚<code>shell</code>ä¸­<code>cd</code>å¯ä»¥æ”¹å˜åŽç»­çš„æ‰§è¡ŒçŽ¯å¢ƒæ˜¯å› ä¸º<code>shell</code>æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå…¶ä»–å‘½ä»¤éƒ½æ˜¯<code>shell</code>çš„å­è¿›ç¨‹ï¼Œ<code>cd </code>æ”¹å˜çš„æ˜¯<code>shell</code>è¿›ç¨‹çš„è¿è¡ŒçŽ¯å¢ƒï¼Œæ‰€ä»¥åœ¨<code>shell</code>ä¸­æ‰§è¡Œ<code>cd</code>å‘½ä»¤ï¼Œä¼šç›´æŽ¥å½±å“åˆ°åŽç»­å‘½ä»¤ã€‚</p>
<p>å¦‚æžœæƒ³è¦æ”¹å˜ä¹‹åŽå„å±‚çš„å·¥ä½œç›®å½•çš„ä½ç½®ï¼Œåº”è¯¥ä½¿ç”¨<code>WORKDIR</code>æŒ‡ä»¤ã€‚å¦‚æžœ<code>WORKDIR</code>æŒ‡ä»¤ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ‰€åˆ‡æ¢çš„è·¯å¾„ä¸Žä¹‹å‰çš„<code>WORKDIR</code>æœ‰å…³ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">WORKDIR</span><span class="s"> /a</span><span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> b</span><span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> c</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> pwd<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€<code>RUN pwd</code>çš„å·¥ä½œç›®å½•ä¸º<code>/a/b/c</code>ã€‚</p>
<p><strong>ï¼ˆ6ï¼‰EXPOSE</strong></p>
<p>ã€€ã€€<code>EXPOSE</code>ç”¨äºŽå£°æ˜Žå®¹å™¨è¿è¡Œæ—¶æä¾›æœåŠ¡çš„ç«¯å£ï¼Œä½†å®ƒåªæ˜¯ä¸€ä¸ªå£°æ˜Žï¼Œåœ¨å®¹å™¨è¿è¡Œæ—¶æ‰“å¼€è¿™ä¸ªç«¯å£çš„æœåŠ¡éœ€è¦ç”¨<code>-P</code>å‘½ä»¤å¯ç”¨æ˜ å°„ã€‚è¿™ä¸ªå£°æ˜Žå¯ä»¥å¸®åŠ©é•œåƒä½¿ç”¨è€…ç†è§£é•œåƒæœåŠ¡çš„å®ˆæŠ¤ç«¯å£ï¼Œå¹¶åœ¨<code>docker run -P</code>æ—¶ï¼Œä¼šè‡ªåŠ¨éšæœºæ˜ å°„<code>EXPOSE</code>çš„ç«¯å£ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">EXPOSE</span><span class="s"> &lt;ç«¯å£1&gt; [&lt;ç«¯å£2&gt; ...]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ³¨æ„<code>EXPOSE</code>å’Œè¿è¡Œæ—¶ä½¿ç”¨çš„<code>-p &lt;å®¿ä¸»ç«¯å£&gt;:&lt;å®¹å™¨ç«¯å£&gt;</code>åŒºåˆ†ï¼Œ<code>-p</code>æ˜¯æ˜ å°„å®¿ä¸»ç«¯å£å’Œå®¹å™¨ç«¯å£ï¼Œæ˜¯å°†å®¹å™¨çš„å¯¹åº”ç«¯å£æ˜ å°„ç»™ä¸»æœºï¼Œå¤–ç•Œå¯ä»¥è®¿é—®å®¿ä¸»ç«¯å£ä»Žè€Œè®¿é—®åˆ°å®¹å™¨ä¸Šçš„æœåŠ¡ï¼Œè€Œ<code>EXPOSE</code>ä»…ä»…å£°æ˜Žå®¹å™¨è®¡åˆ’ä½¿ç”¨ä»€ä¹ˆç«¯å£ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åœ¨å®¿ä¸»è¿›è¡Œç«¯å£æ˜ å°„ã€‚</p>
<p><strong>ï¼ˆ7ï¼‰ENV</strong></p>
<p>ã€€ã€€<code>ENV</code>ç”¨æ¥è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼Œè®©è¿™ä¸ªæŒ‡ä»¤åŽé¢çš„å…¶ä»–æŒ‡ä»¤æˆ–è¿è¡Œæ—¶çš„åº”ç”¨ï¼Œéƒ½å¯ä»¥ç›´æŽ¥ä½¿ç”¨<code>ENV</code>å®šä¹‰çš„çŽ¯å¢ƒå˜é‡ã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">ENV</span> &lt;key&gt; &lt;value&gt;<span class="err">
</span><span class="err"></span><span class="k">ENV</span> &lt;key1&gt;<span class="o">=</span>&lt;value1&gt; &lt;key2&gt;<span class="o">=</span>&lt;value2&gt; ...<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å®šä¹‰çŽ¯å¢ƒå˜é‡åŽï¼Œç”¨<code>$&lt;EVN_NAME&gt;</code>è¿›è¡Œä½¿ç”¨å³å¯ã€‚ä¾‹å¦‚å®˜æ–¹<code>node</code>é•œåƒçš„Dockerfileï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">ENV</span> NODE_VERSION 7.2.0<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> curl -SLO <span class="s2">&#34;https://nodejs.org/dist/v</span><span class="nv">$NODE_VERSION</span><span class="s2">/node-v</span><span class="nv">$NODE_VERSION</span><span class="s2">-linux-x64.tar.xz&#34;</span> <span class="se">\
</span><span class="se"></span>  <span class="o">&amp;&amp;</span> curl -SLO <span class="s2">&#34;https://nodejs.org/dist/v</span><span class="nv">$NODE_VERSION</span><span class="s2">/SHASUMS256.txt.asc&#34;</span> <span class="se">\
</span><span class="se"></span>  <span class="o">&amp;&amp;</span> gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc <span class="se">\
</span><span class="se"></span>  <span class="o">&amp;&amp;</span> grep <span class="s2">&#34; node-v</span><span class="nv">$NODE_VERSION</span><span class="s2">-linux-x64.tar.xz\$&#34;</span> SHASUMS256.txt <span class="p">|</span> sha256sum -c - <span class="se">\
</span><span class="se"></span>  <span class="o">&amp;&amp;</span> tar -xJf <span class="s2">&#34;node-v</span><span class="nv">$NODE_VERSION</span><span class="s2">-linux-x64.tar.xz&#34;</span> -C /usr/local --strip-components<span class="o">=</span><span class="m">1</span> <span class="se">\
</span><span class="se"></span>  <span class="o">&amp;&amp;</span> rm <span class="s2">&#34;node-v</span><span class="nv">$NODE_VERSION</span><span class="s2">-linux-x64.tar.xz&#34;</span> SHASUMS256.txt.asc SHASUMS256.txt <span class="se">\
</span><span class="se"></span>  <span class="o">&amp;&amp;</span> ln -s /usr/local/bin/node /usr/local/bin/nodejs<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å®˜æ–¹<code>node</code>é•œåƒåœ¨Dockerfileä¸­å®šä¹‰äº†çŽ¯å¢ƒå˜é‡<code>NODE_VERSION</code>ï¼Œä½¿ç”¨<code>$NODE_VERSION</code>è¿›è¡Œæ“ä½œï¼Œè¿™æ ·åœ¨å‡çº§é•œåƒæž„å»ºç‰ˆæœ¬æ—¶ï¼Œåªéœ€æ›´æ–°<code>ENV</code>æŒ‡ä»¤ä¸­çš„<code>7.2.0</code>å³å¯ï¼Œä½¿Dockerfileçš„æž„å»ºç»´æŠ¤å˜å¾—è½»æ¾äº†ã€‚</p>
<p>ã€€ã€€æ”¯æŒçŽ¯å¢ƒå˜é‡çš„æŒ‡ä»¤æœ‰<code>ADD</code>ã€<code>COPY</code>ã€<code>ENV</code>ã€<code>EXPOSE</code>ã€<code>FROM</code>ã€<code>LABEL</code>ã€<code>USER</code>ã€<code>WORKDIR</code>ã€<code>VOLUME</code>ã€<code>STOPSIGNAL</code>ã€<code>ONBUILD</code>ã€<code>RUN</code>ã€‚</p>
<p>ã€€ã€€æœ‰äº†çŽ¯å¢ƒå˜é‡æŒ‡ä»¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä»½Dockerfileåˆ¶ä½œçŽ¯å¢ƒå˜é‡ä¸åŒçš„é•œåƒã€‚</p>
<p><strong>ï¼ˆ8ï¼‰ENTRYPOINT</strong></p>
<p>ã€€ã€€<code>ENTRYPOINT</code>æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºå’Œå‚æ•°ï¼Œå’Œ<code>CMD</code>æŒ‡ä»¤ç›¸åŒï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºå’Œå‚æ•°ï¼Œä½†éœ€è¦é€šè¿‡<code>docker run</code>çš„<code>--entrypoint</code>å‚æ•°æŒ‡å®šã€‚æ ¼å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>shell</code>æ ¼å¼ï¼šå°±åƒç›´æŽ¥åœ¨ç»ˆç«¯è¾“å…¥å‘½ä»¤ä¸€æ ·ï¼Œæ¯”å¦‚åœ¨3.3.1ç¤ºä¾‹ä¸­çš„<code>RUN</code>æŒ‡ä»¤ã€‚</li>
<li><code>exec</code>æ ¼å¼ï¼šæ›´åƒå‡½æ•°è°ƒç”¨ä¸­çš„æ ¼å¼ï¼Œ<code>ENTRYPOINT [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;,&quot;å‚æ•°1&quot;,&quot;å‚æ•°2&quot;]</code>ã€‚</li>
</ul>
<p>ã€€ã€€å½“æŒ‡å®š<code>ENTRYPOINT</code>åŽï¼Œ<code>CMD</code>æŒ‡ä»¤ä¸è¿è¡Œå®ƒçš„å‘½ä»¤ï¼Œè€Œæ˜¯å°†å®ƒçš„å‘½ä»¤å†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>ENTRYPOINT</code>æŒ‡ä»¤ã€‚å³å®žé™…æ‰§è¡Œæ—¶å˜ä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">ENTRYPOINT</span> <span class="s2">&#34;CMD&#34;</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€<code>ENTRYPOINT</code>æŒ‡ä»¤å¯ä»¥åœ¨é•œåƒæž„å»ºæ—¶è¡¥å……å‘½ä»¤å‚æ•°ï¼Œè¿˜å¯ä»¥å®Œæˆåº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œã€‚</p>
<p>ã€€ã€€<code>CMD</code>æŒ‡ä»¤æ˜¯æ‰§è¡Œå®ƒåŽé¢çš„å‘½ä»¤ï¼Œè€Œ<code>ENTRYPOINT</code>æŒ‡ä»¤æ˜¯æŽ¥æ”¶<code>CMD</code>çš„å‘½ä»¤ä¸ºå‚æ•°ï¼Œå®ƒå¯ä»¥åœ¨Dockerfileä¸­å®šä¹‰äº†å‘½ä»¤åŽæŽ¥æ”¶<code>docker run</code>æ—¶å¢žåŠ çš„<code>CMD</code>æŒ‡ä»¤ã€‚</p>
<p>ã€€ã€€<strong>è¡¥å……è¾“å…¥å‘½ä»¤å‚æ•°</strong>ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œè¯¥ç¤ºä¾‹èŽ·å–å½“å‰çš„å…¬ç½‘IPï¼š</p>
<p>ã€€ã€€ç”¨<code>CMD</code>å‘½ä»¤çš„ç»“æžœå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> ubuntu</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get install -y curl <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span class="err">
</span><span class="err"></span><span class="k">CMD</span> <span class="p">[</span> <span class="s2">&#34;curl&#34;</span><span class="p">,</span> <span class="s2">&#34;-s&#34;</span><span class="p">,</span> <span class="s2">&#34;http://myip.ipip.net&#34;</span> <span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æž„å»ºé•œåƒï¼Œå¯åŠ¨å®¹å™¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker build -t myip .
$ sudo docker run myip

å½“å‰ IPï¼š49.232.101.152  æ¥è‡ªäºŽï¼šä¸­å›½ åŒ—äº¬ åŒ—äº¬  ç”µä¿¡/è”é€š/ç§»åŠ¨
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¦‚æžœåœ¨é•œåƒæž„å»ºç»“æŸåŽå¸Œæœ›æ˜¾ç¤ºHTTPå¤´éƒ¨ä¿¡æ¯ï¼Œéœ€è¦å¢žåŠ <code>-i</code>å‚æ•°ï¼Œä½†æ­¤æ—¶å¦‚æžœç›´æŽ¥æ·»åŠ <code>-i</code>å‚æ•°ï¼Œä¼šæŠ¥é”™ã€‚è¿™æ˜¯å› ä¸º<code>CMD</code>å‘½ä»¤æŒ‡å®šçš„æ˜¯é»˜è®¤å®¹å™¨å¯åŠ¨ç¨‹åºå’Œå‚æ•°ï¼Œåœ¨é•œåƒåç§°<code>myip</code>åŽé¢å°±æ˜¯<code>CMD</code>å‘½ä»¤ï¼Œæ­¤æ—¶<code>CMD</code>å‘½ä»¤æ˜¯<code>-i</code>ï¼Œæ˜¾ç„¶ä¼šæŠ¥é”™ã€‚å¦‚æžœæƒ³è¦åŠ å…¥<code>-i</code>å‚æ•°ï¼Œå°±å¿…é¡»é‡æ–°è¾“å…¥å‘½ä»¤ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># ç›´æŽ¥æ·»åŠ -iæŠ¥é”™</span>
$ sudo docker run myip -i

docker: Error response from daemon: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: <span class="s2">&#34;-i&#34;</span>: executable file not found in <span class="nv">$PATH</span>: unknown.
ERRO<span class="o">[</span>0000<span class="o">]</span> error waiting <span class="k">for</span> container: context canceled 

<span class="c1"># é‡æ–°è¾“å…¥å‘½ä»¤</span>
$ sudo docker run myip curl -s http://myip.ipip.net -i

HTTP/1.1 <span class="m">200</span> OK
Date: Mon, <span class="m">13</span> Sep <span class="m">2021</span> 06:39:57 GMT
Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
Content-Length: <span class="m">83</span>
Connection: keep-alive
X-Via-JSL: 1d9bd9a,-
Set-Cookie: <span class="nv">__jsluid_h</span><span class="o">=</span>02f5c112cbd961d203f35fa0189db8b1<span class="p">;</span> max-age<span class="o">=</span>31536000<span class="p">;</span> <span class="nv">path</span><span class="o">=</span>/<span class="p">;</span> HttpOnly
X-Cache: bypass

å½“å‰ IPï¼š49.232.101.152  æ¥è‡ªäºŽï¼šä¸­å›½ åŒ—äº¬ åŒ—äº¬  ç”µä¿¡/è”é€š/ç§»åŠ¨
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¦‚æžœä½¿ç”¨<code>ENTRYPOINT</code>ï¼Œå°±ä¸å¿…é‡æ–°è¾“å…¥å‘½ä»¤ï¼Œä½¿ç”¨<code>ENTRYPOINT</code>çš„Dockerfileå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> ubuntu</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> apt-get install -y curl <span class="se">\
</span><span class="se"></span>    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span class="err">
</span><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span> <span class="s2">&#34;curl&#34;</span><span class="p">,</span> <span class="s2">&#34;-s&#34;</span><span class="p">,</span> <span class="s2">&#34;http://myip.ipip.net&#34;</span> <span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ­¤æ—¶ç›´æŽ¥åœ¨å¯åŠ¨å®¹å™¨æ—¶æ·»åŠ <code>-i</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker build -t myip .
$ sudo docker run myip

å½“å‰ IPï¼š49.232.101.152  æ¥è‡ªäºŽï¼šä¸­å›½ åŒ—äº¬ åŒ—äº¬  ç”µä¿¡/è”é€š/ç§»åŠ¨

$ sudo docker run myip -i

HTTP/1.1 <span class="m">200</span> OK
Date: Mon, <span class="m">13</span> Sep <span class="m">2021</span> 06:58:00 GMT
Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
Content-Length: <span class="m">83</span>
Connection: keep-alive
X-Shadow-Status: <span class="m">200</span>
X-Via-JSL: 1d9bd9a,c06d31e,-
Set-Cookie: <span class="nv">__jsluid_h</span><span class="o">=</span>f7e3f4eeb9b96aa3d5d0e903d3fa5dbe<span class="p">;</span> max-age<span class="o">=</span>31536000<span class="p">;</span> <span class="nv">path</span><span class="o">=</span>/<span class="p">;</span> HttpOnly
X-Cache: bypass

å½“å‰ IPï¼š49.232.101.152  æ¥è‡ªäºŽï¼šä¸­å›½ åŒ—äº¬ åŒ—äº¬  ç”µä¿¡/è”é€š/ç§»åŠ¨
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æ·»åŠ <code>ENTRYPOINT</code>åŽï¼Œ<code>-i</code>ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™<code>ENTRYPOINT</code>ï¼Œæˆä¸º<code>curl</code>å‘½ä»¤çš„å‚æ•°ã€‚</p>
<p>ã€€ã€€**åº”ç”¨è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œã€‚**å¯åŠ¨å®¹å™¨å°±æ˜¯å¯åŠ¨ä¸»è¿›ç¨‹ï¼Œä½†æœ‰æ—¶å¯åŠ¨ä¸»è¿›ç¨‹å‰éœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œã€‚æ¯”å¦‚æ•°æ®åº“æœåŠ¡åœ¨å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰è¿›è¡Œé…ç½®ã€åˆå§‹åŒ–ï¼›å¯èƒ½åœ¨å¯åŠ¨æœåŠ¡å‰ä»¥<code>root</code>èº«ä»½æ‰§è¡Œä¸€äº›å¿…è¦çš„å‡†å¤‡å·¥ä½œï¼Œç„¶åŽåˆ‡æ¢åˆ°æœåŠ¡ç”¨æˆ·èº«ä»½å¯åŠ¨æœåŠ¡ã€‚è¿™äº›å‡†å¤‡å·¥ä½œä¸Ž<code>CMD</code>æŒ‡ä»¤æ— å…³ï¼Œ<code>CMD</code>æŒ‡ä»¤æ˜¯å®¹å™¨å¯åŠ¨åŽåœ¨å®¹å™¨ä¸­æ‰§è¡Œçš„ï¼Œè€Œå‡†å¤‡å·¥ä½œéœ€è¦åœ¨å¯åŠ¨å®¹å™¨å‰å®Œæˆã€‚</p>
<p>ã€€ã€€ä¸ºäº†å®Œæˆè¿™ç§å·¥ä½œï¼Œå¯ä»¥ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œæ”¾åˆ°<code>ENTRYPOINT</code>ä¸­æ‰§è¡Œï¼Œè¿™æ ·åšä¼šå…ˆå°†è„šæœ¬æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œä¼ å…¥çš„<code>CMD</code>æŒ‡ä»¤å‚æ•°ã€‚å¦‚å®˜æ–¹é•œåƒrediså°±æ˜¯è¿™ä¹ˆåšçš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> alpine:3.4</span><span class="err">
</span><span class="err"></span>...<span class="err">
</span><span class="err"></span><span class="k">RUN</span> addgroup -S redis <span class="o">&amp;&amp;</span> adduser -S -G redis redis<span class="err">
</span><span class="err"></span>...<span class="err">
</span><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;docker-entrypoint.sh&#34;</span><span class="p">]</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 6379</span><span class="err">
</span><span class="err"></span><span class="k">CMD</span> <span class="p">[</span> <span class="s2">&#34;redis-server&#34;</span> <span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ä¸Šé¢çš„Dockerfileå¯¹redisæœåŠ¡åˆ›å»ºäº†redisç”¨æˆ·ï¼Œå¹¶åœ¨æœ€åŽåˆ¶å®šäº†<code>ENTRYPOINT</code>ä¸º<code>docker-entrypoint.sh</code>è„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="cp">#!/bin/sh
</span><span class="cp"></span>...
<span class="c1"># allow the container to be started with `--user`</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s1">&#39;redis-server&#39;</span> -a <span class="s2">&#34;</span><span class="k">$(</span>id -u<span class="k">)</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s1">&#39;0&#39;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    find . <span class="se">\!</span> -user redis -exec chown redis <span class="s1">&#39;{}&#39;</span> +
    <span class="nb">exec</span> gosu redis <span class="s2">&#34;</span><span class="nv">$0</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
<span class="k">fi</span>

<span class="nb">exec</span> <span class="s2">&#34;</span><span class="nv">$@</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è„šæœ¬çš„å†…å®¹æ˜¯æ ¹æ®å¯åŠ¨å®¹å™¨æ—¶è¾“å…¥çš„<code>CMD</code>å‘½ä»¤æ¥åˆ¤æ–­ï¼Œå¦‚æžœæ˜¯<code>redis-server</code>ï¼Œåˆ™åˆ‡æ¢åˆ°<code>redis</code>ç”¨æˆ·èº«ä»½å¯åŠ¨æœåŠ¡å™¨ï¼Œå¦åˆ™ä»ç„¶ä½¿ç”¨<code>root</code>èº«ä»½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker run -it redis id

<span class="nv">uid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">groups</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>ï¼ˆ9ï¼‰HEALTHCHECK</strong></p>
<p>ã€€ã€€<code>HEALTHCHECK</code>æŒ‡ä»¤æ£€æŸ¥Dockerå®¹å™¨çš„çŠ¶æ€æ˜¯å¦æ­£å¸¸ï¼Œè¿™æ˜¯Docker 1.12å¼•å…¥çš„æ–°æŒ‡ä»¤ï¼Œä¹‹å‰çš„ç‰ˆæœ¬åªèƒ½é€šè¿‡å®¹å™¨å†…ä¸»è¿›ç¨‹æ˜¯å¦é€€å‡ºæ¥åˆ¤æ–­å®¹å™¨æ˜¯å¦çŠ¶æ€å¼‚å¸¸ï¼Œæ— æ³•åº”å¯¹åº”è¿›ç¨‹æœªé€€å‡ºï¼Œä½†å·²ç»æ— æ³•æ­£å¸¸æä¾›æœåŠ¡çš„çŠ¶æ€ï¼Œå¦‚æ­»é”ã€æ­»å¾ªçŽ¯ã€‚å®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>HEALTHCHECK [é€‰é¡¹] CMD &lt;å‘½ä»¤&gt;</code>ï¼šè®¾ç½®æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶å†µçš„å‘½ä»¤ã€‚</li>
<li><code>HEALTHCHECK NONE</code>ï¼šå¯ä»¥å±è”½åŸºç¡€é•œåƒçš„å¥åº·æ£€æŸ¥æŒ‡ä»¤ã€‚</li>
</ul>
<p>ã€€ã€€<code>CMD</code>åŽé¢çš„<code>&lt;å‘½ä»¤&gt;</code>æ ¼å¼å’Œ<code>ENTRYPOINT</code>ç›¸åŒï¼Œå‘½ä»¤çš„è¿”å›žå€¼è¡¨ç¤ºæ­¤æ¬¡å¥åº·æ£€æŸ¥çš„ç»“æžœï¼š</p>
<ul>
<li><code>0</code>ï¼šæˆåŠŸï¼›</li>
<li><code>1</code>ï¼šå¤±è´¥ï¼›</li>
<li><code>2</code>ï¼šä¿ç•™ï¼Œä¸è¦ä½¿ç”¨è¿™ä¸ªå€¼ã€‚</li>
</ul>
<p>ã€€ã€€å½“ä¸€ä¸ªé•œåƒæŒ‡å®šäº†<code>HEALTHCHECK</code>æŒ‡ä»¤åŽï¼Œç”¨å…¶å¯ç”¨å®¹å™¨ï¼Œåˆå§‹çŠ¶æ€ä¸º<code>starting</code>ï¼Œåœ¨<code>HEALTHCHECK</code>æŒ‡ä»¤æ£€æŸ¥æˆåŠŸåŽå˜ä¸º<code>healthy</code>ï¼Œå¦‚æžœè¿žç»­ä¸€å®šæ¬¡æ•°ï¼ˆé»˜è®¤ä¸º3æ¬¡ï¼‰å¤±è´¥ï¼Œåˆ™çŠ¶æ€å˜æ›´ä¸º<code>unhealthy</code>ã€‚</p>
<p>ã€€ã€€<code>HEALTHCHECK</code>æ”¯æŒä»¥ä¸‹é€‰é¡¹ï¼š</p>
<ul>
<li><code>--interval=&lt;é—´éš”&gt;</code>ï¼šä¸¤æ¬¡å¥åº·æ£€æŸ¥çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤ä¸º30ç§’ã€‚</li>
<li><code>--timeout=&lt;æ—¶é•¿&gt;</code>ï¼šå¥åº·æ£€æŸ¥å‘½ä»¤è¿è¡Œè¶…æ—¶æ—¶é—´é—´éš”ï¼Œè¶…è¿‡è¿™ä¸ªé—´éš”ï¼Œæœ¬æ¬¡å¥åº·æ£€æŸ¥å°±è§†ä¸ºå¤±è´¥ï¼Œé»˜è®¤ä¸º30ç§’ã€‚</li>
<li><code>--retries=&lt;æ¬¡æ•°&gt;</code>ï¼šå½“è¿žç»­å¤±è´¥ä¸€å®šæ¬¡æ•°æ—¶ï¼Œå®¹å™¨çŠ¶æ€å˜æ›´ä¸º<code>unhealthy</code>ï¼Œé»˜è®¤3æ¬¡ã€‚</li>
</ul>
<p>ã€€ã€€<code>HEALTHCHECK</code>åœ¨Dockerfileä¸­åªå¯ä»¥å‡ºçŽ°ä¸€æ¬¡ï¼Œå¦‚æžœå‡ºçŽ°å¤šæ¬¡ï¼Œåªæœ‰æœ€åŽä¸€ä¸ªç”Ÿæ•ˆã€‚</p>
<p>ã€€ã€€æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæœ€ç®€å•çš„WebæœåŠ¡ï¼Œå¹¶ä¸ºå®ƒæ·»åŠ å¥åº·æ£€æŸ¥æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œå¯ä»¥ç”¨<code>curl</code>å‘½ä»¤åˆ¤æ–­ã€‚<code>curl</code>å‘½ä»¤æ˜¯ä¸€ä¸ªåˆ©ç”¨URLè§„åˆ™åœ¨å‘½ä»¤è¡Œä¸‹å·¥ä½œçš„æ–‡ä»¶ä¼ è¾“å·¥å…·ã€‚ç¼–å†™çš„Dockerfileå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> nginx</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y curl <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*<span class="err">
</span><span class="err">HEALTHCHECK --interval=5s --timeout=3s \
</span><span class="err">  </span><span class="k">CMD</span> curl -fs http://localhost/ <span class="o">||</span> <span class="nb">exit</span> <span class="m">1</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è¿™ä¸ªDockerfileä»¥<code>niginx</code>ä¸ºåŸºç¡€é•œåƒï¼Œä¸‹è½½å¹¶å®‰è£…<code>curl</code>ï¼Œåˆ é™¤ç¼“å­˜æ–‡ä»¶å¹¶ä½¿ç”¨<code>curl -fs http://localhost/ || exit 1</code>å‘½ä»¤è¿›è¡Œæ£€æŸ¥ï¼Œæ¯éš”5ç§’æ£€æŸ¥ä¸€æ¬¡ï¼Œè¶…è¿‡3ç§’æ²¡æœ‰å“åº”å°±å¤±è´¥ã€‚<code>-f</code>ä¸ºè¿žæŽ¥å¤±è´¥æ—¶ä¸æ˜¾ç¤ºhttpé”™è¯¯ï¼Œ<code>-s</code>æ˜¯é™é»˜æ¨¡å¼ï¼Œä¸è¾“å‡ºä»»ä½•å†…å®¹ã€‚</p>
<p>æž„å»ºé•œåƒï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># -tè¡¨ç¤ºè®¾ç½®åç§°æ ‡ç­¾ä¸ºmyweb:v1</span>
$ sudo docker build -t myweb:v1

Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM nginx
 ---&gt; 822b7ec2aaf2
Step 2/3 : RUN apt-get update <span class="o">&amp;&amp;</span> apt-get install -y curl <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/*
 ---&gt; Running in 62e9e7facf8b
Get:1 http://security.debian.org/debian-security buster/updates InRelease <span class="o">[</span>65.4 kB<span class="o">]</span>
Get:2 http://deb.debian.org/debian buster InRelease <span class="o">[</span><span class="m">122</span> kB<span class="o">]</span>
Get:3 http://security.debian.org/debian-security buster/updates/main amd64 Packages <span class="o">[</span><span class="m">303</span> kB<span class="o">]</span>
Get:4 http://deb.debian.org/debian buster-updates InRelease <span class="o">[</span>51.9 kB<span class="o">]</span>
Get:5 http://deb.debian.org/debian buster/main amd64 Packages <span class="o">[</span><span class="m">7907</span> kB<span class="o">]</span>
Get:6 http://deb.debian.org/debian buster-updates/main amd64 Packages <span class="o">[</span>15.2 kB<span class="o">]</span>
Fetched <span class="m">8465</span> kB in 6min 43s <span class="o">(</span>21.0 kB/s<span class="o">)</span>
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version <span class="o">(</span>7.64.0-4+deb10u2<span class="o">)</span>.
<span class="m">0</span> upgraded, <span class="m">0</span> newly installed, <span class="m">0</span> to remove and <span class="m">0</span> not upgraded.
Removing intermediate container 62e9e7facf8b
 ---&gt; c77f3d0c0cac
Step 3/3 : HEALTHCHECK --interval<span class="o">=</span>5s --timeout<span class="o">=</span>3s   CMD curl -fs http://localhost/ <span class="o">||</span> <span class="nb">exit</span> <span class="m">1</span>
 ---&gt; Running in 7c5f96d17bc1
Removing intermediate container 7c5f96d17bc1
 ---&gt; 45b487bf77da
Successfully built 45b487bf77da
Successfully tagged myweb:v1
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¯åŠ¨å®¹å™¨ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker run -d --name mywebservice -p 8080:80 myweb:v1
ebe33796114e22e0b9f97d6afd682d87c7371e10910b6a3f343284a4b9f4ef8c
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è¿è¡Œé•œåƒï¼Œç«‹åˆ»æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container ls

CONTAINER ID   ...   STATUS
ebe33796114e   ...   Up <span class="m">2</span> seconds <span class="o">(</span>health: starting<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è¿‡å‡ ç§’å†æ¬¡æŸ¥çœ‹å‘å®¹å™¨çŠ¶æ€ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container ls

CONTAINER ID   ...   STATUS
ebe33796114e   ...   About a minute <span class="o">(</span>healthy<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æŸ¥çœ‹å¥åº·æ£€æŸ¥å‘½ä»¤çš„è¾“å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ docker inspect --format <span class="s1">&#39;{{json .State.Health}}&#39;</span> web <span class="p">|</span> python -m json.tool

<span class="o">{</span>
    <span class="s2">&#34;FailingStreak&#34;</span>: 0,
    <span class="s2">&#34;Log&#34;</span>: <span class="o">[</span>
        <span class="o">{</span>
            <span class="s2">&#34;End&#34;</span>: <span class="s2">&#34;2021-09-13T11:00:59.49479706+08:00&#34;</span>,
            <span class="s2">&#34;ExitCode&#34;</span>: 0,
            <span class="s2">&#34;Output&#34;</span>: <span class="s2">&#34;&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\&#34;http://nginx.org/\&#34;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\&#34;http://nginx.com/\&#34;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&#34;</span>,
            <span class="s2">&#34;Start&#34;</span>: <span class="s2">&#34;2021-09-13T11:00:59.412497775+08:00&#34;</span>
        <span class="o">}</span>,
        
        ......
        
        <span class="o">{</span>
            <span class="s2">&#34;End&#34;</span>: <span class="s2">&#34;2021-09-13T11:01:19.842117465+08:00&#34;</span>,
            <span class="s2">&#34;ExitCode&#34;</span>: 0,
            <span class="s2">&#34;Output&#34;</span>: <span class="s2">&#34;&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;/title&gt;\n&lt;style&gt;\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;/p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href=\&#34;http://nginx.org/\&#34;&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;\nCommercial support is available at\n&lt;a href=\&#34;http://nginx.com/\&#34;&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&#34;</span>,
            <span class="s2">&#34;Start&#34;</span>: <span class="s2">&#34;2021-09-13T11:01:19.765572173+08:00&#34;</span>
        <span class="o">}</span>
    <span class="o">]</span>,
    <span class="s2">&#34;Status&#34;</span>: <span class="s2">&#34;healthy&#34;</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h4 id="333-é•œåƒæž„å»º">3.3.3 é•œåƒæž„å»º</h4>
<p>ã€€ã€€ä½¿ç”¨<code>docker build</code>å‘½ä»¤æž„å»ºé•œåƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker build <span class="o">[</span>é€‰é¡¹<span class="o">]</span> &lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&gt;
</code></pre></td></tr></table>
</div>
</div><p><strong>ä¸Šä¸‹æ–‡è·¯å¾„</strong></p>
<p>ã€€ã€€<code>Docker</code>åœ¨è¿è¡Œæ—¶åˆ†ä¸ºæœåŠ¡ç«¯ï¼ˆDockerå¼•æ“Žï¼‰å’Œå®¢æˆ·ç«¯ï¼ˆdockeræŒ‡ä»¤ï¼‰ã€‚å®¢æˆ·ç«¯é€šè¿‡æœåŠ¡ç«¯æä¾›çš„è¿œç¨‹è°ƒç”¨æŽ¥å£ï¼ˆREST APIï¼‰å’ŒæœåŠ¡ç«¯äº¤äº’ï¼Œå®Œæˆå„ç§åŠŸèƒ½ã€‚è™½ç„¶è¡¨é¢ä¸Šå¥½åƒæ˜¯åœ¨æœ¬æœºæ‰§è¡Œ<code>docker</code>æŒ‡ä»¤ï¼Œä½†å®žé™…ä¸Šæ˜¯ä»¥è¿œç¨‹è°ƒç”¨çš„å½¢å¼åœ¨æœåŠ¡ç«¯å®Œæˆã€‚</p>
<p>ã€€ã€€æž„å»ºé•œåƒæ—¶ï¼Œè®¸å¤šæŒ‡ä»¤æ¶‰åŠåˆ°æœ¬åœ°æ–‡ä»¶ï¼Œå¦‚<code>COPY</code>ã€<code>ADD</code>æŒ‡ä»¤ï¼Œä½†<code>docker build</code>å‘½ä»¤å¹¶éžåœ¨æœ¬åœ°æž„å»ºé•œåƒï¼Œè€Œæ˜¯åœ¨æœåŠ¡ç«¯æž„å»ºé•œåƒï¼ŒæœåŠ¡ç«¯å¹¶ä¸å­˜åœ¨å®¢æˆ·ç«¯çš„æœ¬åœ°æ–‡ä»¶ï¼Œè¿™å°±éœ€è¦ç”¨æˆ·åœ¨è¯¥æŒ‡ä»¤å¤„æŒ‡å®šæž„å»ºé•œåƒçš„ä¸Šä¸‹æ–‡è·¯å¾„ã€‚<code>docker build</code>åœ¨è§£æžåˆ°è¯¥æŒ‡ä»¤çš„ä¸Šä¸‹æ–‡è·¯å¾„åŽï¼Œä¼šå°†è¯¥è·¯å¾„ä¸‹çš„æ‰€æœ‰å†…å®¹æ‰“åŒ…ï¼Œä¸Šä¼ ç»™æœåŠ¡ç«¯ï¼Œè¿™æ ·æœåŠ¡ç«¯æ”¶åˆ°ä¸Šä¸‹æ–‡åŒ…åŽï¼Œå°±èƒ½èŽ·å¾—æž„å»ºé•œåƒæ‰€éœ€çš„æ–‡ä»¶ã€‚</p>
<p>ã€€ã€€ä¸Šä¸‹æ–‡è·¯å¾„çš„æºæ–‡ä»¶è·¯å¾„éƒ½æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œå³<code>./xxx/xxxx/xx</code>ï¼Œè€Œä¸èƒ½æ˜¯ç»å¯¹è·¯å¾„<code>/var/xx/xx/</code>å’Œ<code>../xx/xx</code>è¿™æ ·çš„è·¯å¾„ï¼Œå®ƒä»¬éƒ½è¶…å‡ºäº†ä¸Šä¸‹æ–‡çš„èŒƒå›´ï¼ŒæœåŠ¡ç«¯ä¸èƒ½èŽ·å¾—è¿™äº›ä½ç½®çš„æ–‡ä»¶ï¼Œå¦‚æžœå®žåœ¨éœ€è¦è¿™äº›æ–‡ä»¶ï¼Œéœ€è¦å°†è¿™äº›æ–‡ä»¶å¤åˆ¶åˆ°ä¸Šä¸‹æ–‡ç›®å½•ä¸­ã€‚</p>
<p>ã€€ã€€åœ¨3.3.1çš„å®žä¾‹ä¸­çš„<code>.</code>å°±æ˜¯ä¸Šä¸‹æ–‡ç›®å½•ï¼Œ<code>docker build</code> å‘½ä»¤ä¼šå°†è¯¥ç›®å½•ä¸‹çš„å†…å®¹æ‰“åŒ…å‘ç»™Dockerå¼•æ“Žï¼ˆæœåŠ¡ç«¯ï¼‰ï¼Œè¿™ä¸ªå‘é€è¿‡ç¨‹ä¹Ÿè¾“å‡ºåœ¨äº†å±å¹•ä¸Šï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">Sending build context to Docker daemon  2.048kB
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ä¸€èˆ¬ä¼šå°†<code>Dockerfile</code>ç½®äºŽä¸€ä¸ªç©ºç›®å½•ä¸‹æˆ–è€…é¡¹ç›®æ ¹ç›®å½•æ–‡ä»¶ä¸‹ï¼Œå¦‚æžœç›®å½•ä¸‹æœ‰äº›å†…å®¹ä¸å¸Œæœ›æž„å»ºæ—¶ä¼ ç»™Dockerå¼•æ“Žï¼Œå¯ä»¥ç”¨<code>.gitignore</code>çš„è¯­æ³•ç¼–å†™ä¸€ä¸ª<code>.dockerignore</code>ï¼ŒåŽ»æŽ‰ä¸éœ€è¦ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™Dockerå¼•æ“Žçš„æ–‡ä»¶ã€‚</p>
<p>ã€€ã€€è¿˜æ”¯æŒå…¶å®ƒå¤šç§æž„å»ºæ–¹å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># ä»Žurlæž„å»º</span>
$ docker build -t hello-world https://github.com/docker-library/hello-world.git#master:amd64/hello-world
<span class="c1"># ä»ŽtaråŽ‹ç¼©åŒ…æž„å»º</span>
$ docker build http://server/context.tar.gz
<span class="c1"># ä»Žæ ‡å‡†è¾“å…¥ä¸­è¯»å–Dockerfileè¿›è¡Œæž„å»º</span>
$ docker build - &lt; Dockerfile
$ cat Dockerfile <span class="p">|</span> docker build -
<span class="c1"># ä»Žæ ‡å‡†è¾“å…¥ä¸­è¯»å–ä¸Šä¸‹æ–‡åŽ‹ç¼©åŒ…è¿›è¡Œæž„å»º</span>
$ docker build - &lt; context.tar.gz
</code></pre></td></tr></table>
</div>
</div><p><strong>å¤šé˜¶æ®µæž„å»º</strong></p>
<p>ã€€ã€€Docker 17.05å¼€å§‹æ”¯æŒDockerfileå¤šé˜¶æ®µæž„å»ºé•œåƒï¼Œå¯ä»¥ä½¿ç”¨<code>ä¸€ä¸ªDockerfile</code>è§£å†³é•œåƒå±‚æ¬¡å¤šã€ä½“ç§¯å¤§ã€éƒ¨ç½²æ—¶é—´é•¿çš„é—®é¢˜ï¼Œå¹¶ä¸”æ— éœ€å¤šä¸ªDockerfileæ–‡ä»¶ã€‚ä¸‹é¢çš„ç¤ºä¾‹å…ˆå°†<code>app.go</code>æ–‡ä»¶çš„ä¾èµ–åº“ç¼–è¯‘æµ‹è¯•æ‰“åŒ…åŽï¼Œå°†å®ƒæ‹·è´åˆ°è¿è¡ŒçŽ¯å¢ƒä¸­è¿è¡Œï¼š</p>
<p>ã€€ã€€<code>app.go</code>æ–‡ä»¶ï¼Œç¨‹åºè¾“å‡º<code>Hello World!</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(){</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Hello World!&#34;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€Dockerfileæ–‡ä»¶ï¼Œ<code>as</code>åŽé¢æ˜¯è¿™ä¸€é˜¶æ®µçš„åç§°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="k">FROM</span><span class="s"> golang:alpine as builder</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apk --no-cache add git<span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /go/src/github.com/go/helloworld/</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> go get -d -v github.com/go-sql-driver/mysql<span class="err">
</span><span class="err"></span><span class="k">COPY</span> app.go .<span class="err">
</span><span class="err"></span><span class="k">RUN</span> <span class="nv">CGO_ENABLED</span><span class="o">=</span><span class="m">0</span> <span class="nv">GOOS</span><span class="o">=</span>linux go build -a -installsuffix cgo -o app .<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="k">FROM</span><span class="s"> alpine:latest as prod</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> apk --no-cache add ca-certificates<span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /root/</span><span class="err">
</span><span class="err"></span><span class="k">COPY</span> --from<span class="o">=</span><span class="m">0</span> /go/src/github.com/go/helloworld/app .<span class="err">
</span><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;./app&#34;</span><span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æž„å»ºé•œåƒï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker build -t go/helloworld .
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€å¦‚æžœåªæƒ³æž„å»ºå¤šé˜¶æ®µçš„Dockerfileä¸­çš„ä¸€ä¸ªé˜¶æ®µï¼Œå¯ä»¥åœ¨<code>docker build</code>å‘½ä»¤åŽå¢žåŠ <code>--target &lt;é˜¶æ®µå&gt;</code>å‚æ•°ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker build --target builder -t username/imagename:tag .
</code></pre></td></tr></table>
</div>
</div><h2 id="4-ç»ƒä¹ ">4 ç»ƒä¹ </h2>
<h3 id="41-ä½¿ç”¨å®¹å™¨">4.1 ä½¿ç”¨å®¹å™¨</h3>
<p>ã€€ã€€ï¼ˆ1ï¼‰æ‹‰å–2ç§ngnixé•œåƒï¼Œå¯ä»¥çœ‹åˆ°åˆ†å±‚æ‹‰å–ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker pull nginx:1.21.1
1.21.1: Pulling from library/nginx
a330b6cecb98: Pull <span class="nb">complete</span> 
5ef80e6f29b5: Pull <span class="nb">complete</span> 
f699b0db74e3: Pull <span class="nb">complete</span> 
0f701a34c55e: Pull <span class="nb">complete</span> 
3229dce7b89c: Pull <span class="nb">complete</span> 
ddb78cb2d047: Pull <span class="nb">complete</span> 
Digest: sha256:a05b0cdd4fc1be3b224ba9662ebdf98fe44c09c0c9215b45f84344c12867002e
Status: Downloaded newer image <span class="k">for</span> nginx:1.21.1
docker.io/library/nginx:1.21.1
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker pull nginx
Using default tag: latest
latest: Pulling from library/nginx
Digest: sha256:a05b0cdd4fc1be3b224ba9662ebdf98fe44c09c0c9215b45f84344c12867002e
Status: Image is up to date <span class="k">for</span> nginx:latest
docker.io/library/nginx:latest
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼Œå‘çŽ°TAGä¸º<code>latest</code>å’Œ<code>1.21.1</code>çš„nginxçš„<code>IMAGE ID</code>å®Œå…¨ç›¸åŒï¼Œè¯´æ˜Žå®ƒä»¬æ˜¯åŒä¸€ä¸ªé•œåƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker image ls
REPOSITORY    TAG       IMAGE ID       CREATED          SIZE
nginx         1.21.1    822b7ec2aaf2   <span class="m">5</span> days ago       133MB
nginx         latest    822b7ec2aaf2   <span class="m">5</span> days ago       133MB
hello-world   latest    d1165f221234   <span class="m">6</span> months ago     13.3kB
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€åˆ é™¤æŽ‰TAGä¸º1.21.1çš„é‡å¤é•œåƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker image rm nginx:1.21.1
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ2ï¼‰å¯åŠ¨ä¸€ä¸ªngnixå®¹å™¨ï¼Œå‘½åä¸º<code>webserver</code>ï¼Œ<code>-p</code>ï¼šè®¾ç½®ç«¯å£æ˜ å°„ï¼Œå°†æœ¬åœ°çš„8080ç«¯å£æ˜ å°„åˆ°å®¹å™¨å†…éƒ¨çš„80ç«¯å£ã€‚<code>-d</code>ï¼šè®¾ç½®å®¹å™¨åœ¨åŽå°è¿è¡Œã€‚<code>--name</code>è®¾ç½®å®¹å™¨åç§°ä¸º<code>webserver</code>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker run --name webserver -d -p 8080:80 nginx
cd9e3dd3e7bde80c21a0bcfd766c405a1cd34143b51c8f326ba2d8047ffde8fe
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€è®¿é—®http://åŸŸå:8080å¯ä»¥çœ‹åˆ°å›¾Xæ‰€ç¤ºçš„é¡µé¢ã€‚</p>
<figure >
  
  
  
    <img data-src="/images/posts/tools/docker/docker_nginx.jpg" alt="image alt" data-caption="" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='' height='' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" class="lazyload" style="width:;height:;"/>
  

  
  
    <figcaption style="text-align: center;">
      <strong>å›¾X å®¹å™¨è¯»å†™æµç¨‹</strong>:
      
    </figcaption>
  
</figure>
<p>ã€€ã€€ï¼ˆ3ï¼‰æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker ps
CONTAINER ID   IMAGE     COMMAND                  ...
cd9e3dd3e7bd   nginx     <span class="s2">&#34;/docker-entrypoint.â€¦&#34;</span>   ...
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ4ï¼‰åœæ­¢å®¹å™¨è¿è¡Œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container stop webserver
webserver
</code></pre></td></tr></table>
</div>
</div><p>æ³¨ï¼š<code>docker ps</code>å’Œ<code>docker container ls</code>ä¸èƒ½æŸ¥çœ‹åˆ°åœæ­¢è¿è¡Œçš„å®¹å™¨ã€‚</p>
<p>ã€€ã€€ï¼ˆ5ï¼‰æŸ¥çœ‹åœæ­¢è¿è¡Œçš„å®¹å™¨ï¼Œè¿™ä¸ª<code>container</code>ä¸èƒ½çœç•¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container ls -a
CONTAINER ID   IMAGE     COMMAND                  ...
cd9e3dd3e7bd   nginx     <span class="s2">&#34;/docker-entrypoint.â€¦&#34;</span>   ...
</code></pre></td></tr></table>
</div>
</div><p>ã€€ã€€ï¼ˆ6ï¼‰åˆ é™¤å®¹å™¨ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">$ sudo docker container rm webservers
</code></pre></td></tr></table>
</div>
</div><h3 id="42-æž„å»ºé•œåƒ">4.2 æž„å»ºé•œåƒ</h3>
<p>æœ¬ç»ƒä¹ ç¼–å†™ä¸€ä¸ªæ”¯æŒLæœºå™¨å­¦ä¹ é¡¹ç›®çš„é•œåƒã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="c"># Use an official PyTorch runtime as a parent image</span><span class="err">
</span><span class="err"></span><span class="k">FROM</span><span class="s"> pytorch/pytorch</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Set the working directory</span><span class="err">
</span><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /docker_sample</span><span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Copy the current directory contents into the container</span><span class="err">
</span><span class="err"></span><span class="k">COPY</span> . /docker_sample<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Install any needed packages specified in requirements.txt</span><span class="err">
</span><span class="err"></span><span class="k">RUN</span> pip install -r requirements.txt<span class="err">
</span><span class="err">
</span><span class="err"></span><span class="c"># Run when the container launches</span><span class="err">
</span><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;python&#34;</span><span class="p">,</span> <span class="s2">&#34;deploy_models.py&#34;</span><span class="p">]</span><span class="err">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="5-å¯èƒ½å‡ºçŽ°çš„é”™è¯¯åŠè§£å†³åŠžæ³•">5 å¯èƒ½å‡ºçŽ°çš„é”™è¯¯åŠè§£å†³åŠžæ³•</h2>
<p>ã€€ã€€ï¼ˆ1ï¼‰Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</p>
<blockquote>
<p>è§£å†³ï¼š</p>
<p><a href="https://stackoverflow.com/questions/44678725/cannot-connect-to-the-docker-daemon-at-unix-var-run-docker-sock-is-the-docker">https://stackoverflow.com/questions/44678725/cannot-connect-to-the-docker-daemon-at-unix-var-run-docker-sock-is-the-docker</a></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">systemctl start docker
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">gpasswd -a <span class="nv">$USER</span> docker
<span class="c1"># æˆ–è€…åœ¨å‘½ä»¤å‰åŠ sudo</span>
sudo
</code></pre></td></tr></table>
</div>
</div>
    </article>
    
    
<script defer src="/js/clipboard.min.c168d3a04c45a631be76437054619a4a3b30107960cb9730be96012fef5762b0.js"></script>

<script defer src="/js/helper/prev.min.js"></script>

<script defer src="/js/helper/prop.min.js"></script>
<script>
  'use strict';
  document.addEventListener('DOMContentLoaded', function () {
    
    var clipInit = false;
    var preChromaElem = document.querySelectorAll('pre.chroma');
    var langCodeElem = document.querySelectorAll('.language-code');
    var dollarCodeElem = document.querySelectorAll('div.language-\\$');
    var gtCodeElem = document.querySelectorAll('div.language-\\>');

    var makeClipboard = function(elem) {
      var code = elem,
          text = elem.textContent;
        
      if (text.length > 15) {
        if (!clipInit) {
          var text, clip = new ClipboardJS('.copy-to-clipboard', {
            text: function (trigger) {
              var codeElem = prev(trigger).querySelectorAll('code');
              if (codeElem.length > 1) {
                text = prev(trigger).querySelector('code[class^="language-"]').textContent;
              } else {
                text = prev(trigger).querySelector('code').textContent;
              }

              return text.replace(/^\$\s/gm, '');
            }
          });

          var inPre;
          clip.on('success', function (e) {
            e.clearSelection();
            inPre = prop(e.trigger.parentNode, 'tagName') == 'PRE';
            e.trigger.setAttribute('aria-label', 'Copied to clipboard!');
            e.trigger.classList.add('tooltipped');
            e.trigger.classList.add('tooltipped-w');
          });

          clip.on('error', function (e) {
            inPre = prop(e.trigger.parentNode, 'tagName') == 'PRE';
            e.trigger.setAttribute('aria-label', e.action.toString());
            e.trigger.classList.add('tooltipped');
            e.trigger.classList.add('tooltipped-w');
          });

          clipInit = true;
        }

        var notAllowedClass = ['language-mermaid', 'language-viz', 'language-wave', 'language-chart', 'language-msc', 'language-flowchart'];
        var isNotAllowedIncluded = false;
        var curClassName = code.getAttribute('class');

        for (var i = 0; i < notAllowedClass.length; i++) {
          if (curClassName && curClassName.startsWith(notAllowedClass[i])) {
            isNotAllowedIncluded = true;
            break;
          }
        }

        if (!isNotAllowedIncluded) {
          if (curClassName) {
            var newClipboardElem = document.createElement('span');
            newClipboardElem.setAttribute('class', 'copy-to-clipboard');
            newClipboardElem.setAttribute('title', 'Copy to clipboard');
            elem.parentNode.parentNode.insertBefore(newClipboardElem, elem.parentNode.nextElementSibling);
          }
        }
      }
    }

    var makeSymbolClipboard = function(elem) {
      var clipboardSpan = document.createElement('span');
      clipboardSpan.setAttribute('class', 'copy-to-clipboard');
      clipboardSpan.setAttribute('title', 'Copy to clipboard');
      elem.parentNode.parentNode.insertBefore(clipboardSpan, elem.parentNode.nextElementSibling);
    }

    preChromaElem ? 
    preChromaElem.forEach(function(elem) {
      elem.querySelectorAll('code').forEach(function(codeElem) {
        makeClipboard(codeElem);
      });
    }) : null;
    
    langCodeElem ? 
    langCodeElem.forEach(function(elem) {
      elem.querySelectorAll('code').forEach(function (codeElem) {
        makeClipboard(codeElem);
      });
    }) : null;

    dollarCodeElem ? 
    dollarCodeElem.forEach(function(elem) {
      elem.querySelectorAll('code').forEach(function (codeElem) {
        makeSymbolClipboard(codeElem);
      });
    }) : null;

    gtCodeElem ?
    gtCodeElem.forEach(function(elem) {
      elem.querySelectorAll('code').forEach(function (codeElem) {
        makeSymbolClipboard(codeElem);
      });
    }) : null;
    
  });
</script>
    <script>
  'use strict';
  
  function wrap(el, wrapper) {
    el.parentNode.insertBefore(wrapper, el);
    wrapper.appendChild(el);
  }

  (function () {
    var singleContentsElem = document.querySelector('.single__contents');
    singleContentsElem ? 
    singleContentsElem.querySelectorAll('pre > code').forEach(function(elem) {
      var dataLang = elem.getAttribute('data-lang');
      var dataLangWrapper = document.createElement('div');
      var code = null;
      var codeTitle = null;

      if (dataLang && dataLang.includes(':')) {
        code = dataLang.split(':')[0];
        codeTitle = dataLang.split(':')[1];

        dataLangWrapper.className = 'language-' + code;
        dataLangWrapper.setAttribute('data-lang', codeTitle);

        elem.className = 'language-' + code;
        elem.setAttribute('data-lang', codeTitle);
        elem.setAttribute('id', codeTitle);
      } else if (!dataLang) {
        dataLangWrapper.setAttribute('data-lang', 'Code');
        dataLangWrapper.className = 'language-code';
      }

      if (!dataLang || codeTitle) {
        wrap(elem.parentNode, dataLangWrapper);
      }

    }) : null;
  })();

  var langCodeElem = document.querySelectorAll('.language-code');
  langCodeElem ? langCodeElem.forEach(function (elem) {
    var newElem = document.createElement('span');
    newElem.className = 'copy-to-clipboard';
    newElem.setAttribute('title', 'Copy to clipboard');
    elem.append(newElem);
  }) : null;
  

  

  
  var dollarCodeElem = document.querySelectorAll('div.language-\\$');
  var gtCodeElem = document.querySelectorAll('div.language-\\>');

  dollarCodeElem ?
  dollarCodeElem.forEach(function(elem) {
    var lnts = elem.parentNode.parentNode ? elem.parentNode.parentNode.querySelectorAll('.lnt') : null;
    lnts ? 
    lnts.forEach(function(lnt) {
      lnt.innerHTML = '$<br/>';
    }) : null;
  }) : null;

  gtCodeElem ?
  gtCodeElem.forEach(function(elem) {
    var lnts = elem.parentNode.parentNode ? elem.parentNode.parentNode.querySelectorAll('.lnt') : null;
    lnts ? 
    lnts.forEach(function(lnt) {
      lnt.innerHTML = '><br/>';
    }) : null;
  }) : null;
  
</script>
    
<div class="donation">
  <div class="donation__message">
    åˆ†äº«
  </div>
  <div class="donation__icons">
    
    
    
      
        <a href="javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:'',r='http://service.weibo.com/share/share.php?url='+e(d.location.href)+'&title='+e(d.title),x=function(){if(!window.open(r,'weibo','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r+'&r=1'};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()" class="donation__item" target="_blank" rel="noreferer" title="Weibo" aria-label="Weibo Share Button" data-type="share">
          <svg data-name="weibo" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="35" height="35" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="m23.977 8.171c.103 1.315-.123 2.891-1.006 2.969-1.442.127-.69-1.435-.671-2.375.053-2.725-2.312-4.618-4.629-4.618-.656 0-2.181.438-1.946-.924.106-.6.623-.592 1.14-.66 3.897-.51 6.838 2.125 7.112 5.608z"/><path d="m17.604 11.337c1.675.901 3.687 1.35 3.354 4.024-.614 4.929-11.054 8.24-17.575 4.618-1.788-.994-3.639-2.448-3.354-5.344.246-2.493 1.95-4.424 3.623-6.069 1.596-1.57 3.278-2.798 5.567-3.364 2.484-.614 3.218 1.422 2.549 3.43 1.439-.095 4.488-1.674 5.836-.132.594.68.367 1.897 0 2.837zm-1.811 6.333c.537-.598 1.076-1.51 1.073-2.572-.01-4.395-7.635-5.376-11.806-2.969-4.747 2.74-2.743 7.664 3.086 8.048 3.088.204 6.179-.868 7.647-2.507z"/><path d="m19.952 10.084c-.977.064-.612-.658-.671-1.517-.037-.529-.483-1.14-.872-1.32-.763-.352-1.945.256-1.945-.791 0-.778.686-.697 1.074-.726 3.555-.266 3.775 4.265 2.414 4.354z"/><path d="m12.842 14.768c1.429 4.248-6.017 6.223-7.379 2.573-.911-2.441 1.277-4.383 3.555-4.618 1.945-.201 3.395.775 3.824 2.045zm-3.422.726c.303.516 1 .145.939-.264-.073-.473-.945-.403-.939.264zm-1.207 2.243c1.252-.293 1.42-2.612-.47-2.177-1.587.364-1.28 2.586.47 2.177z"/></svg>
        </a>
      
    
      
        <a href="https://twitter.com/intent/tweet?text=%e5%b7%a5%e5%85%b7%e4%bd%bf%e7%94%a8%ef%bc%9aDocker&url=https%3a%2f%2fyyyIce.github.io%2fzh%2fposts%2f%25E5%25B7%25A5%25E5%2585%25B7%25E4%25BD%25BF%25E7%2594%25A8docker%2f&hashtags=%e8%99%9a%e6%8b%9f%e5%8c%96&via=%e5%92%b8%e9%b1%bc%e5%86%b0" title="Twitter" aria-label="Twitter Share Button" class="donation__item" target="_blank" rel="noreferrer" data-type="share">
          <svg data-name="twitter" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="35" height="35" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="m21.534 7.113c.976-.693 1.797-1.558 2.466-2.554v-.001c-.893.391-1.843.651-2.835.777 1.02-.609 1.799-1.566 2.165-2.719-.951.567-2.001.967-3.12 1.191-.903-.962-2.19-1.557-3.594-1.557-2.724 0-4.917 2.211-4.917 4.921 0 .39.033.765.114 1.122-4.09-.2-7.71-2.16-10.142-5.147-.424.737-.674 1.58-.674 2.487 0 1.704.877 3.214 2.186 4.089-.791-.015-1.566-.245-2.223-.606v.054c0 2.391 1.705 4.377 3.942 4.835-.401.11-.837.162-1.29.162-.315 0-.633-.018-.931-.084.637 1.948 2.447 3.381 4.597 3.428-1.674 1.309-3.8 2.098-6.101 2.098-.403 0-.79-.018-1.177-.067 2.18 1.405 4.762 2.208 7.548 2.208 8.683 0 14.342-7.244 13.986-14.637z"/></svg>
        </a>
      
    
  </div>
</div>

    
    
<div class="whoami__gutter"></div>
<hr class="hr-slash whoami-hr"/>
<section class="whoami">
  <div class="whoami__image-wrapper">
    
    
      
        <img data-src="/images/whoami/avatar.jpg" src="data:image/svg+xml,%0A%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' d='M0 0h24v24H0V0z'/%3E%3Cpath fill='%23aaa' d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z'/%3E%3C/svg%3E" alt="å’¸é±¼å†°" class="lazyload whoami__image"/>
      
    
  </div>
  <div class="whoami__contents">
    <div class="whoami__written-by">
      ä½œè€…
    </div>
    <div class="whoami__title">
      
        å’¸é±¼å†°
      
    </div>
    <div class="whoami__desc">
      
        å¿«ä¹çš„å’¸é±¼
      
    </div>
    <div class="whoami__social">
      
      
      
      
      
      
      
      
      <a href="yyyIce727@163.com" title="email" aria-label="email">
        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-.4 4.25l-7.07 4.42c-.32.2-.74.2-1.06 0L4.4 8.25c-.25-.16-.4-.43-.4-.72 0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72 0 .29-.15.56-.4.72z"/></svg>
      </a>
      
      
      
      
      
      
      
      <a href="https://yyyIce.github.io/" title="github" aria-label="github">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="25" viewBox="0 0 24 24" version="1.1">
<g id="surface3680">
<path fill="currentColor" d="M 10.898438 2.101562 C 6.300781 2.601562 2.601562 6.300781 2.101562 10.800781 C 1.601562 15.5 4.300781 19.699219 8.398438 21.300781 C 8.699219 21.398438 9 21.199219 9 20.800781 L 9 19.199219 C 9 19.199219 8.601562 19.300781 8.101562 19.300781 C 6.699219 19.300781 6.101562 18.101562 6 17.398438 C 5.898438 17 5.699219 16.699219 5.398438 16.398438 C 5.101562 16.300781 5 16.300781 5 16.199219 C 5 16 5.300781 16 5.398438 16 C 6 16 6.5 16.699219 6.699219 17 C 7.199219 17.800781 7.800781 18 8.101562 18 C 8.5 18 8.800781 17.898438 9 17.800781 C 9.101562 17.101562 9.398438 16.398438 10 16 C 7.699219 15.5 6 14.199219 6 12 C 6 10.898438 6.5 9.800781 7.199219 9 C 7.101562 8.800781 7 8.300781 7 7.601562 C 7 7.199219 7 6.601562 7.300781 6 C 7.300781 6 8.699219 6 10.101562 7.300781 C 10.601562 7.101562 11.300781 7 12 7 C 12.699219 7 13.398438 7.101562 14 7.300781 C 15.300781 6 16.800781 6 16.800781 6 C 17 6.601562 17 7.199219 17 7.601562 C 17 8.398438 16.898438 8.800781 16.800781 9 C 17.5 9.800781 18 10.800781 18 12 C 18 14.199219 16.300781 15.5 14 16 C 14.601562 16.5 15 17.398438 15 18.300781 L 15 20.898438 C 15 21.199219 15.300781 21.5 15.699219 21.398438 C 19.398438 19.898438 22 16.300781 22 12.101562 C 22 6.101562 16.898438 1.398438 10.898438 2.101562 Z M 10.898438 2.101562 "/>
</g>
</svg>

      </a>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <a href="http://example.org/" title="weibo" aria-label="weibo">
        <svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentColor" d="M 16.28125 3.8125 C 16.054688 3.828125 15.816406 3.859375 15.59375 3.90625 C 15.179688 3.996094 14.910156 4.402344 15 4.8125 C 15.085938 5.226563 15.492188 5.496094 15.90625 5.40625 C 17.179688 5.136719 18.566406 5.53125 19.5 6.5625 C 20.433594 7.597656 20.679688 9.011719 20.28125 10.25 C 20.152344 10.652344 20.378906 11.089844 20.78125 11.21875 C 21.183594 11.347656 21.617188 11.121094 21.75 10.71875 C 22.3125 8.976563 21.96875 7.015625 20.65625 5.5625 C 19.671875 4.46875 18.296875 3.875 16.9375 3.8125 C 16.710938 3.800781 16.507813 3.796875 16.28125 3.8125 Z M 10.0625 6.09375 C 8.667969 6.242188 6.699219 7.332031 4.96875 9.0625 C 3.082031 10.949219 2 12.957031 2 14.6875 C 2 17.996094 6.226563 20 10.375 20 C 15.8125 20 19.4375 16.820313 19.4375 14.3125 C 19.4375 12.796875 18.179688 11.949219 17.03125 11.59375 C 16.75 11.507813 16.539063 11.464844 16.6875 11.09375 C 17.007813 10.289063 17.066406 9.589844 16.71875 9.09375 C 16.070313 8.164063 14.253906 8.210938 12.21875 9.0625 C 12.21875 9.0625 11.585938 9.351563 11.75 8.84375 C 12.0625 7.835938 12.019531 6.988281 11.53125 6.5 C 11.1875 6.152344 10.695313 6.027344 10.0625 6.09375 Z M 16.8125 6.5 C 16.589844 6.488281 16.375 6.515625 16.15625 6.5625 C 15.800781 6.636719 15.578125 7.019531 15.65625 7.375 C 15.734375 7.730469 16.082031 7.953125 16.4375 7.875 C 16.863281 7.785156 17.34375 7.902344 17.65625 8.25 C 17.96875 8.597656 18.042969 9.054688 17.90625 9.46875 C 17.792969 9.816406 17.964844 10.199219 18.3125 10.3125 C 18.660156 10.421875 19.046875 10.253906 19.15625 9.90625 C 19.429688 9.058594 19.265625 8.085938 18.625 7.375 C 18.144531 6.84375 17.476563 6.53125 16.8125 6.5 Z M 10.8125 10.90625 C 13.582031 11.003906 15.8125 12.378906 16 14.28125 C 16.214844 16.457031 13.71875 18.484375 10.40625 18.8125 C 7.09375 19.140625 4.214844 17.640625 4 15.46875 C 3.785156 13.292969 6.316406 11.265625 9.625 10.9375 C 10.039063 10.898438 10.417969 10.890625 10.8125 10.90625 Z M 8.9375 13 C 7.804688 13.101563 6.734375 13.75 6.25 14.6875 C 5.589844 15.964844 6.242188 17.378906 7.75 17.84375 C 9.308594 18.324219 11.140625 17.597656 11.78125 16.21875 C 12.410156 14.871094 11.605469 13.472656 10.0625 13.09375 C 9.691406 13 9.316406 12.964844 8.9375 13 Z M 8.21875 15.0625 C 8.351563 15.066406 8.472656 15.109375 8.59375 15.15625 C 9.082031 15.355469 9.234375 15.878906 8.9375 16.34375 C 8.632813 16.804688 7.988281 17.027344 7.5 16.8125 C 7.019531 16.601563 6.882813 16.074219 7.1875 15.625 C 7.414063 15.289063 7.824219 15.058594 8.21875 15.0625 Z"/></svg>
      </a>
      
      
      
      
      
      
      
      
      
      <a href="http://example.org/" title="zhihu" aria-label="zhihu">
        <svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentColor" d="M 5.921875 2.9511719 C 5.5336094 2.9815469 5.1832344 3.2390625 5.0527344 3.6328125 L 3.6835938 7.7363281 C 3.5085938 8.2593281 3.7924062 8.825 4.3164062 9 C 4.8404063 9.175 5.4050781 8.8911875 5.5800781 8.3671875 L 6.0351562 7 L 6.9941406 7 L 6.9941406 10.222656 C 6.9941406 10.845846 6.9644144 11.431442 6.9199219 12 L 5 12 A 1.0001 1.0001 0 1 0 5 14 L 6.6367188 14 C 6.1575971 16.260332 5.1601574 17.989071 3.4179688 19.189453 C 2.9979688 19.479453 2.8798125 20.049188 3.1328125 20.492188 C 3.4258125 21.004188 4.0960781 21.153359 4.5800781 20.818359 C 6.0994455 19.769009 7.1700075 18.397613 7.8808594 16.720703 A 1.0001 1.0001 0 0 0 8.0449219 17.601562 L 9.5117188 19.59375 A 1.0002375 1.0002375 0 1 0 11.123047 18.408203 L 9.65625 16.416016 A 1.0001 1.0001 0 0 0 8.7929688 15.998047 A 1.0001 1.0001 0 0 0 7.9921875 16.472656 C 8.2917972 15.713486 8.5082238 14.883111 8.6699219 14 L 10 14 A 1.0001 1.0001 0 1 0 10 12 L 8.9316406 12 C 8.9726972 11.4285 8.9941406 10.836947 8.9941406 10.222656 L 8.9941406 7 L 10 7 A 1.0001 1.0001 0 1 0 10 5 L 6.7011719 5 L 6.9472656 4.2636719 C 7.1222656 3.7406719 6.8404063 3.175 6.3164062 3 C 6.1856563 2.95625 6.0512969 2.9410469 5.921875 2.9511719 z M 14 5 A 1.0001 1.0001 0 0 0 13 6 L 13 17 A 1.0001 1.0001 0 0 0 14 18 L 15 18 L 15 20 A 1.0001 1.0001 0 0 0 16.707031 20.707031 L 19.414062 18 L 21 18 A 1.0001 1.0001 0 0 0 22 17 L 22 6 A 1.0001 1.0001 0 0 0 21 5 L 14 5 z M 15 7 L 20 7 L 20 16 L 19 16 A 1.0001 1.0001 0 0 0 18.292969 16.292969 L 17 17.585938 L 17 17 A 1.0001 1.0001 0 0 0 16 16 L 15 16 L 15 7 z"/></svg>
      </a>
      
      
    </div>
  </div>
</section>
<hr class="hr-slash whoami-hr" />


    <section class="related">
    
    
  </section>
    <div class="grow"></div>
<nav class="pagination-single">
  
    
      <a href="https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8scapy/" class="pagination-single__left">
        <div class="pagination-single__icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M19 11H7.83l4.88-4.88c.39-.39.39-1.03 0-1.42-.39-.39-1.02-.39-1.41 0l-6.59 6.59c-.39.39-.39 1.02 0 1.41l6.59 6.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L7.83 13H19c.55 0 1-.45 1-1s-.45-1-1-1z"/></svg>
        </div>
        <div class="pagination-single__left-title">å·¥å…·ä½¿ç”¨ï¼šScapy</div>      
      </a>
    
    <div class="grow"></div>
    
      <a href="https://yyyIce.github.io/zh/posts/pythonpandas%E5%92%8Cnumpy%E5%AF%B9%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/" class="pagination-single__right">      
        <div class="pagination-single__right-title">Pythonï¼šPandaså’ŒNumpyå¯¹æ•°æ®é›†çš„åŸºæœ¬æ“ä½œ</div>
        <div class="pagination-single__icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M5 13h11.17l-4.88 4.88c-.39.39-.39 1.03 0 1.42.39.39 1.02.39 1.41 0l6.59-6.59c.39-.39.39-1.02 0-1.41l-6.58-6.6c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L16.17 11H5c-.55 0-1 .45-1 1s.45 1 1 1z"/></svg>
        </div>
      </a>
    
  
</nav>
    
    <div class="modal micromodal-slide" id="modal" aria-hidden="true">
  <div class="modal__overlay" tabindex="-1" data-micromodal-close>
    <div class="modal__container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      
      <div class="modal__content" id="modal-content">
        <div id="mySwipe" class="swipe">
          <div class="swipe-wrap">
          </div>
        </div>
      </div>

      <span class="modal__items">
        
        <span class="modal__header">
          <div class="modal__paging" title="Page Info" aria-label="Current Page">
          </div>
          <div class="modal__icon modal__toolbar modal__toolbar--close" title="Close" aria-label="Close Button" data-micromodal-close>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="25" height="25"><path fill="currentColor" d="M 21.734375 19.640625 L 19.636719 21.734375 C 19.253906 22.121094 18.628906 22.121094 18.242188 21.734375 L 13 16.496094 L 7.761719 21.734375 C 7.375 22.121094 6.746094 22.121094 6.363281 21.734375 L 4.265625 19.640625 C 3.878906 19.253906 3.878906 18.628906 4.265625 18.242188 L 9.503906 13 L 4.265625 7.761719 C 3.882813 7.371094 3.882813 6.742188 4.265625 6.363281 L 6.363281 4.265625 C 6.746094 3.878906 7.375 3.878906 7.761719 4.265625 L 13 9.507813 L 18.242188 4.265625 C 18.628906 3.878906 19.257813 3.878906 19.636719 4.265625 L 21.734375 6.359375 C 22.121094 6.746094 22.121094 7.375 21.738281 7.761719 L 16.496094 13 L 21.734375 18.242188 C 22.121094 18.628906 22.121094 19.253906 21.734375 19.640625 Z"/></svg>
          </div>
          <div class="modal__icon modal__toolbar modal__toolbar--full" title="Full Screen" aria-label="Full Screen Button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="25" height="25"><path fill="currentColor" d="M 5 3 C 3.9069372 3 3 3.9069372 3 5 L 3 8 A 1.0001 1.0001 0 1 0 5 8 L 5 5 L 8 5 A 1.0001 1.0001 0 1 0 8 3 L 5 3 z M 16 3 A 1.0001 1.0001 0 1 0 16 5 L 19 5 L 19 8 A 1.0001 1.0001 0 1 0 21 8 L 21 5 C 21 3.9069372 20.093063 3 19 3 L 16 3 z M 3.984375 14.986328 A 1.0001 1.0001 0 0 0 3 16 L 3 19 C 3 20.093063 3.9069372 21 5 21 L 8 21 A 1.0001 1.0001 0 1 0 8 19 L 5 19 L 5 16 A 1.0001 1.0001 0 0 0 3.984375 14.986328 z M 19.984375 14.986328 A 1.0001 1.0001 0 0 0 19 16 L 19 19 L 16 19 A 1.0001 1.0001 0 1 0 16 21 L 19 21 C 20.093063 21 21 20.093063 21 19 L 21 16 A 1.0001 1.0001 0 0 0 19.984375 14.986328 z"/></svg>
          </div>
          <div class="modal__icon modal__toolbar modal__toolbar--normal" title="Normal Screen" aria-label="Normal Screen Button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="25" height="25"><path fill="currentColor" d="M 16.96875 4.972656 C 15.867188 4.988281 14.984375 5.894531 15 7 L 15 15 L 7 15 C 6.277344 14.988281 5.609375 15.367188 5.246094 15.992188 C 4.878906 16.613281 4.878906 17.386719 5.246094 18.007813 C 5.609375 18.632813 6.277344 19.011719 7 19 L 19 19 L 19 7 C 19.007813 6.460938 18.796875 5.941406 18.414063 5.558594 C 18.03125 5.175781 17.511719 4.964844 16.96875 4.972656 Z M 32.96875 4.972656 C 31.921875 4.988281 31.0625 5.8125 31.003906 6.859375 C 31 6.90625 31 6.953125 31 7 L 31 19 L 43 19 C 43.066406 19 43.132813 19 43.199219 18.992188 C 44.269531 18.894531 45.070313 17.972656 45.015625 16.902344 C 44.964844 15.828125 44.074219 14.988281 43 15 L 35 15 L 35 7 C 35.007813 6.460938 34.796875 5.941406 34.414063 5.558594 C 34.03125 5.175781 33.511719 4.964844 32.96875 4.972656 Z M 7 31 C 6.277344 30.988281 5.609375 31.367188 5.246094 31.992188 C 4.878906 32.613281 4.878906 33.386719 5.246094 34.007813 C 5.609375 34.632813 6.277344 35.011719 7 35 L 15 35 L 15 43 C 14.988281 43.722656 15.367188 44.390625 15.992188 44.753906 C 16.613281 45.121094 17.386719 45.121094 18.007813 44.753906 C 18.632813 44.390625 19.011719 43.722656 19 43 L 19 31 Z M 31 31 L 31 43 C 30.988281 43.722656 31.367188 44.390625 31.992188 44.753906 C 32.613281 45.121094 33.386719 45.121094 34.007813 44.753906 C 34.632813 44.390625 35.011719 43.722656 35 43 L 35 35 L 43 35 C 43.722656 35.011719 44.390625 34.632813 44.753906 34.007813 C 45.121094 33.386719 45.121094 32.613281 44.753906 31.992188 C 44.390625 31.367188 43.722656 30.988281 43 31 Z"/></svg>
          </div>
        </span>
        
        <div class="modal__icon modal__arrow modal__arrow--left" title="Arrow Left" aria-label="Arrow Left Button">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentColor" d="M 23.28125 11 L 10 10 L 10 6.851563 C 10 6.523438 9.839844 6.277344 9.519531 6.03125 C 9.199219 5.949219 8.878906 5.949219 8.640625 6.113281 C 5.359375 8.410156 2.238281 12.257813 2.160156 12.421875 C 2.082031 12.578125 2.007813 12.8125 2.003906 12.976563 C 2.003906 12.980469 2 12.988281 2 12.992188 C 2 13.15625 2.078125 13.402344 2.160156 13.484375 C 2.238281 13.648438 5.28125 17.507813 8.640625 19.804688 C 8.960938 19.96875 9.28125 20.050781 9.519531 19.886719 C 9.839844 19.722656 10 19.476563 10 19.148438 L 10 16 L 23.28125 15 C 23.679688 14.679688 24 13.875 24 12.992188 C 24 12.195313 23.761719 11.320313 23.28125 11 Z"/></svg>
        </div>
        
        <div class="modal__icon modal__arrow modal__arrow--right" title="Arrow Right" aria-label="Arrow Right Button">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 26" width="28" height="28"><path fill="currentColor" d="M 2.71875 11.023438 L 16 10.023438 L 16 6.875 C 16 6.546875 16.160156 6.300781 16.480469 6.054688 C 16.800781 5.972656 17.121094 5.972656 17.359375 6.136719 C 20.640625 8.433594 23.761719 12.28125 23.839844 12.445313 C 23.917969 12.601563 23.992188 12.835938 23.996094 13 C 23.996094 13.003906 24 13.011719 24 13.015625 C 24 13.179688 23.921875 13.425781 23.839844 13.507813 C 23.761719 13.671875 20.71875 17.53125 17.359375 19.828125 C 17.039063 19.992188 16.71875 20.074219 16.480469 19.910156 C 16.160156 19.746094 16 19.5 16 19.171875 L 16 16.023438 L 2.71875 15.023438 C 2.320313 14.703125 2 13.898438 2 13.015625 C 2 12.21875 2.238281 11.34375 2.71875 11.023438 Z"/></svg>
        </div>

        <div class="modal__caption">
          <div class="modal__caption--text">
          </div>
        </div>

      </span>
    </div>
  </div>
</div>


<script defer src="/js/swipe.min.b4b82839155519d9ca67746615a4c86ccbc1061c196fe6d8aa26e4fe22902718.js"></script>

<script defer src="/js/micromodal.min.de01b44b2f383056bbcaf6ee921fd385d79108ec1129afd0eb2f3f5a07e11f45.js"></script>

<script defer src="/js/helper/fadeinout.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
  
   
  var docElem = document.documentElement;

   
  function openFullscreen() {
    if (docElem.requestFullscreen) {
      docElem.requestFullscreen();
    } else if (docElem.mozRequestFullScreen) {  
      docElem.mozRequestFullScreen();
    } else if (docElem.webkitRequestFullscreen) {  
      docElem.webkitRequestFullscreen();
    } else if (docElem.msRequestFullscreen) {  
      docElem.msRequestFullscreen();
    }
  }

   
  function closeFullscreen() {
    if (document.fullscreenElement ||
      document.webkitFullscreenElement ||
      document.mozFullScreenElement) {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.mozCancelFullScreen) {  
        document.mozCancelFullScreen();
      } else if (document.webkitExitFullscreen) {  
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) {  
        document.msExitFullscreen();
      }
    }
  }

  var modal = document.getElementById('modal');
  var galleryContainerElem = document.querySelector('.gallery__container');
  var swipeWrapElem = document.querySelector('.swipe-wrap');
  var mySwipeElem = document.getElementById('mySwipe');
  var arrowLeftElem = document.querySelector('.modal__arrow--left');
  var arrowRightElem = document.querySelector('.modal__arrow--right');
  var closeElem = document.querySelector('.modal__toolbar--close');
  var fullElem = document.querySelector('.modal__toolbar--full');
  var normalElem = document.querySelector('.modal__toolbar--normal');
  var captionElem = document.querySelector('.modal__caption');
  var pagingElem = document.querySelector('.modal__paging');
  var itemsElem = document.querySelector('.modal__items');
  var imgTotalNum = null;
  var myFadeTimeout = null;
  var mySwipe = null;
  var keydownFunction = function (e) {
    if (e.key === 'ArrowRight') {
      if (modal && modal.classList.contains('is-open')) {
        mySwipe.next();
      }
    } else if (e.key === 'ArrowLeft') {
      if (modal && modal.classList.contains('is-open')) {
        mySwipe.prev();
      }
    }
  }

  if (galleryContainerElem) {
    imgTotalNum = galleryContainerElem.querySelectorAll('img').length;
  } else {
    galleryContainerElem = document.querySelector('.single__contents');
    imgTotalNum = galleryContainerElem.querySelectorAll('img').length;
  }

  MicroModal.init({
    onClose: function () {
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
        closeFullscreen();
      }
      window.removeEventListener('keydown', keydownFunction);
    },
    disableScroll: true,
    disableFocus: true,
    awaitOpenAnimation: false,
    awaitCloseAnimation: false,
    debugMode: false,
  });

  var imageLoad = function(src) {
    return new Promise(function(resolve, reject) {
      var newImg = new Image;
      newImg.onload = function() {
        resolve(newImg);
      }
      newImg.onerror = reject;
      newImg.src = src;
    });
  }

  galleryContainerElem.querySelectorAll('img').forEach(function (elem, idx) {
    elem.style.cursor = 'pointer';

    var clonedElem = elem.cloneNode(true);
    clonedElem.style.maxHeight = '100%';
    clonedElem.style.maxWidth = '100%';
    clonedElem.onclick = function (e) {
      e.stopPropagation();
    }

    var wrapper = document.createElement('div');
    wrapper.style.width = '100%';
    wrapper.style.height = '100vh';
    wrapper.setAttribute('data-micromodal-close', '');
    wrapper.onclick = function () {
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
      }
    }
    wrapper.onmouseenter = function () {
      clearTimeout(myFadeTimeout);
      fadeIn(itemsElem, 200);
    };
    wrapper.onmouseleave = function () {
      myFadeTimeout = setTimeout(function () {
        fadeOut(itemsElem, 200);
      }, 2500);
    }
    wrapper.ontouchstart = function() {
      fadeIn(itemsElem, 200);
    }
    wrapper.append(clonedElem);
    swipeWrapElem.append(wrapper);

    elem.addEventListener('click', async function (e) {
      MicroModal.show('modal');
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
      }

      var imgSrc = e.target.getAttribute('data-src') || e.target.getAttribute('src');
      var img = await imageLoad(imgSrc);
      clonedElem.style.width = img.width + 'px';
      clonedElem.style.height = img.height + 'px';
      
      
      mySwipe = new Swipe(mySwipeElem, {
        startSlide: idx,
        draggable: true,
        autoRestart: false,
        continuous: false,
        disableScroll: true,
        stopPropagation: true,
        callback: async function (index, element) {
          
          var imgElem = element.querySelector('img');
          var imgSrc = imgElem.getAttribute('data-src') || imgElem.getAttribute('src');
          var img = await imageLoad(imgSrc);
          imgElem.style.width = img.width + 'px';
          imgElem.style.height = img.height + 'px';

          
          if (captionElem && imgElem) {
            var caption = null;
            if (imgElem.getAttribute('data-caption')) {
              caption = imgElem.getAttribute('data-caption');
            } else if (imgElem.getAttribute('title')) {
              caption = imgElem.getAttribute('title');
            } else if (imgElem.getAttribute('alt')) {
              caption = imgElem.getAttribute('alt');
            } else {
              caption = imgElem.getAttribute('src');
            }

            captionElem.querySelector('.modal__caption--text').innerText = caption;
            pagingElem.innerText = (index + 1) + ' / ' + imgTotalNum;

            clearTimeout(myFadeTimeout);
            fadeIn(itemsElem, 200);
          }
        },
      });

      fadeIn(itemsElem);

      
      if (captionElem) {
        var caption = null;
        if (e.target.getAttribute('data-caption')) {
          caption = e.target.getAttribute('data-caption');
        } else if (e.target.getAttribute('title')) {
          caption = e.target.getAttribute('title');
        } else if (e.target.getAttribute('alt')) {
          caption = e.target.getAttribute('alt');
        } else {
          caption = e.target.getAttribute('src');
        }

        captionElem.querySelector('.modal__caption--text').innerText = caption;
        pagingElem.innerText = (idx + 1) + ' / ' + imgTotalNum;
      }

      if (normalElem && fullElem) {
        normalElem.style.zIndex = -1;
        normalElem.style.opacity = 0;
        fullElem.style.zIndex = 25;
        fullElem.style.opacity = 1;
      }
    });

    window.addEventListener('keydown', keydownFunction);
  });

  arrowLeftElem ?
    arrowLeftElem.addEventListener('click', function (e) {
      if (mySwipe) {
        mySwipe.prev();
      }
    }) : null;
  arrowRightElem ?
    arrowRightElem.addEventListener('click', function (e) {
      if (mySwipe) {
        mySwipe.next();
      }
    }) : null;

  closeElem ?
    closeElem.addEventListener('click', function () {
      if (mySwipe) {
        mySwipe.kill();
        mySwipe = null;
      }
      closeFullscreen();
      MicroModal.close('modal');
    }) : null;

  fullElem ?
    fullElem.addEventListener('click', function (e) {
      openFullscreen();
      if (normalElem) {
        normalElem.style.zIndex = 25;
        normalElem.style.opacity = 1;
        fullElem.style.zIndex = -1;
        fullElem.style.opacity = 0;
      }
    }) : null;

  normalElem ?
    normalElem.addEventListener('click', function (e) {
      closeFullscreen();
      if (fullElem) {
        fullElem.style.zIndex = 25;
        fullElem.style.opacity = 1;
        normalElem.style.zIndex = -1;
        normalElem.style.opacity = 0;
      }
    }) : null;
  
});
</script>

    <div class="hide">
      

<div class="search">
  <span class="icon">
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
  </span>
  <input id="search" aria-label="Site Search" class="input" type="text" placeholder="æœç´¢" autocomplete="off">
  <div id="search-results" class="dropdown">
    <div id="search-menu" class="dropdown-menu" role="menu">
    </div>
  </div>
</div>


    </div>
  </div>
</main>


<aside class="single__side main-side">
  


<section class="sidebar hide">
  <script>document.querySelector('.sidebar').classList.remove('hide')</script>
  <div class="toc__flexbox" data-position="fixed">
    <h6 class="toc__title" data-ani="true">ç›®å½•</h6>
    
      <label class="switch" data-ani="true">
        <input id="toggle-toc" aria-label="Toggle TOC" type="checkbox" checked>
        <span class="slider round"></span>
      </label>
    
  </div>
  <div class="toc " data-dir="ltr" data-folding="true" data-ani="true">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1-dockerç®€ä»‹">1 Dockerç®€ä»‹</a>
      <ul>
        <li><a href="#11-æ¦‚è¿°">1.1 æ¦‚è¿°</a></li>
        <li><a href="#12-ä¸ºä»€ä¹ˆè¦ç”¨docker">1.2 ä¸ºä»€ä¹ˆè¦ç”¨Docker</a></li>
        <li><a href="#13-åŸºæœ¬æ¦‚å¿µ">1.3 åŸºæœ¬æ¦‚å¿µ</a>
          <ul>
            <li><a href="#131-é•œåƒimage">1.3.1 é•œåƒï¼ˆImageï¼‰</a></li>
            <li><a href="#132-å®¹å™¨container">1.3.2 å®¹å™¨ï¼ˆContainerï¼‰</a></li>
            <li><a href="#133-ä»“åº“repository">1.3.3 ä»“åº“ï¼ˆRepositoryï¼‰</a></li>
            <li><a href="#134-å­˜å‚¨é©±åŠ¨storage-driver">1.3.4 å­˜å‚¨é©±åŠ¨ï¼ˆStorage Driverï¼‰</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#2-å®‰è£…">2 å®‰è£…</a></li>
    <li><a href="#3-ç®€å•ä½¿ç”¨">3 ç®€å•ä½¿ç”¨</a>
      <ul>
        <li><a href="#31-åŸºæœ¬æ“ä½œ">3.1 åŸºæœ¬æ“ä½œ</a></li>
        <li><a href="#32-å®¹å™¨æ“ä½œ">3.2 å®¹å™¨æ“ä½œ</a></li>
        <li><a href="#33-dockerfileå®šåˆ¶é•œåƒ">3.3 Dockerfileå®šåˆ¶é•œåƒ</a>
          <ul>
            <li><a href="#331-å®šåˆ¶é•œåƒç®€å•ç¤ºä¾‹">3.3.1 å®šåˆ¶é•œåƒç®€å•ç¤ºä¾‹</a></li>
            <li><a href="#332-å¸¸ç”¨æŒ‡ä»¤">3.3.2 å¸¸ç”¨æŒ‡ä»¤</a></li>
            <li><a href="#333-é•œåƒæž„å»º">3.3.3 é•œåƒæž„å»º</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#4-ç»ƒä¹ ">4 ç»ƒä¹ </a>
      <ul>
        <li><a href="#41-ä½¿ç”¨å®¹å™¨">4.1 ä½¿ç”¨å®¹å™¨</a></li>
        <li><a href="#42-æž„å»ºé•œåƒ">4.2 æž„å»ºé•œåƒ</a></li>
      </ul>
    </li>
    <li><a href="#5-å¯èƒ½å‡ºçŽ°çš„é”™è¯¯åŠè§£å†³åŠžæ³•">5 å¯èƒ½å‡ºçŽ°çš„é”™è¯¯åŠè§£å†³åŠžæ³•</a></li>
  </ul>
</nav>
  </div>
</section>



</aside>

<script>
  
  
  

  var enableToc = JSON.parse("true");
  var toc = JSON.parse("null");
  var tocPosition = JSON.parse("\"inner\"");
  
  var singleMainElem = document.querySelector('.single__main');
  var singleSideElem = document.querySelector('.single__side');

  enquire.register("screen and (max-width: 769px)", {
    match: function () {
      if ((enableToc || toc) && tocPosition !== "outer") {
        if (singleMainElem && singleSideElem) {
          singleMainElem.classList.remove('main-main');
          singleMainElem.classList.add('main');
          singleSideElem.classList.remove('main-side');
          singleSideElem.classList.add('hide');
        }
      } else if (tocPosition === "outer") {
        if (singleMainElem && !singleMainElem.classList.contains('main-main')) {
          singleMainElem.classList.remove('main-main');
          singleMainElem.classList.add('main');
        }
        if (singleSideElem && !singleSideElem.classList.contains('hide')) {
          singleSideElem.classList.add('hide');
        }
      }
    },
    unmatch: function () {
      if ((enableToc || toc) && tocPosition !== "outer") {
        singleMainElem.classList.remove('main');
        singleMainElem.classList.add('main-main');
        singleSideElem.classList.remove('hide');
        singleSideElem.classList.add('main-side');
      } else if (tocPosition === "outer") {
        if (singleMainElem && !singleMainElem.classList.contains('main-main')) {
          singleMainElem.classList.remove('main-main');
          singleMainElem.classList.add('main');
        }
        if (singleSideElem && !singleSideElem.classList.contains('hide')) {
          singleSideElem.classList.add('hide');
        }
      }

      var navCollapseBtn = document.querySelector('.navbar__burger');
      var navCollapse = document.getElementsByClassName('navbarm__collapse')[0];
      if (navCollapse) {
        navCollapse.setAttribute('data-open', false);
        navCollapse.style.maxHeight = 0;
        navCollapseBtn.classList.remove('is-active');
      }
      document.getElementsByClassName('navbar__menu')[0].classList.remove('is-active');
      document.getElementsByClassName('mobile-search')[0].classList.add('hide');
    },
    setup: function () { },
    deferSetup: true,
    destroy: function () { },
  });
</script>




<script defer src="/js/helper/getParents.min.js"></script>

<script defer src="/js/helper/closest.min.js"></script>

<script defer src="/js/helper/prev.min.js"></script>

<script defer src="/js/helper/prop.min.js"></script>

<script defer src="/js/helper/fadeinout.min.js"></script>

















<script>
  'use strict';

  window.onload = function() {
    var navbar = document.querySelector('.navbar');
    var singleContentsElem = document.querySelector('.single__contents');

    
    
    
    var enableBusuanzi = JSON.parse("true");
    var busuanziPagePV = JSON.parse("true");
    
    if (enableBusuanzi && busuanziPagePV) {
      var pagePvElem = document.querySelector('#busuanzi_value_page_pv');
      pagePvElem.textContent = pagePvElem.textContent.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
    }    
    



    
    
    
    
    
    
    var enableToc = JSON.parse("true");
    var toc = JSON.parse("null");
    var hideToc = JSON.parse("false");
    var tocFlexbox = document.querySelector('.toc__flexbox');
    var tocFlexboxOuter = document.querySelector('.toc__flexbox--outer');
    var tocFolding = JSON.parse("true");
    
    if ((enableToc || toc) && document.querySelector('.toc')) {
      var tableOfContentsElem = document.querySelector('.toc').querySelector('#TableOfContents');

      tableOfContentsElem.onmouseenter = function() {
        if (navbar.classList.contains('scrolling')) {
          navbar.classList.remove('scrolling');
        }
      }

      tableOfContentsElem.onmouseleave = function() {
        if (!navbar.classList.contains('scrolling')) {
          navbar.classList.add('scrolling');
        }
      }

      if (false === tocFolding) {

      } else {
        tableOfContentsElem.querySelectorAll('ul') ?
          tableOfContentsElem.querySelectorAll('ul').forEach(function (rootUl) {
            rootUl.querySelectorAll('li').forEach(function (liElem) {
              liElem.querySelectorAll('ul').forEach(function (ulElem) {
                ulElem.style.display = 'none';
              });
            });
          }) : null;
      }

      if (tableOfContentsElem) {
        if (tableOfContentsElem.querySelectorAll('a').length > 0) {
          tableOfContentsElem.querySelectorAll('a').forEach(function (elem) {
            elem.addEventListener('click', function () {
              var id = elem.getAttribute('id');

              if (!navbar.classList.contains('scrolling')) {
                navbar.classList.remove('navbar--show');
                navbar.classList.remove('navbar--hide');
                navbar.classList.add('navbar--hide');
              }
              
              document.querySelector('.toc').querySelectorAll('a').forEach(function (elem) {
                elem.classList.remove('active');
              });
              elem.classList.add('active');

              var curElem = tableOfContentsElem.querySelector('[href="#' + id + '"]');
              if (curElem && curElem.nextElementSibling) {
                curElem.nextElementSibling.style.display = 'block';
              }
              if (curElem) {
                getParents(curElem, 'ul') ?
                  getParents(curElem, 'ul').forEach(function (elem) {
                    elem.style.display = 'block';
                  }) : null;
              }
            });
          });
        } else {
          if (tocFlexbox) {
            tocFlexbox.setAttribute('data-position', '');
            if (!tocFlexbox.classList.contains('hide')) {
              tocFlexbox.classList.add('hide');
            }
          }
          if (tocFlexboxOuter) {
            tocFlexboxOuter.setAttribute('data-position', '');
            if (!tocFlexboxOuter.classList.contains('hide')) {
              tocFlexboxOuter.classList.add('hide');
            }
          }
        }
      }

      
      var toggleTocElem = document.getElementById("toggle-toc");
      var visibleTocElem = document.getElementById('visible-toc');
      var tocElem = document.querySelector('.toc');
      var mainElem = document.querySelector('main');
      var sideElem = document.querySelector('side');
      var tocFlexboxElem = document.querySelector('.toc__flexbox');

      toggleTocElem ? 
      toggleTocElem.addEventListener('change', function(e) {
        if (e.target.checked) {
          if (tocElem) {
            fadeIn(tocElem, 200);
          }
          if (tocFlexboxElem) {
            tocFlexboxElem.setAttribute('data-position', 'fixed');
          }

          if (mainElem) {
            mainElem.classList.remove('main-main');
            mainElem.classList.remove('main');
            mainElem.classList.add('main-main');
          }
          if (sideElem) {
            sideElem.classList.remove('main-side');
          }
        } else {
          if (tocElem) {
            fadeOut(tocElem, 200);
          }
          if (tocFlexboxElem) {
            tocFlexboxElem.setAttribute('data-position', 'absolute');
          }

          if (mainElem) {
            mainElem.classList.remove('main-main');
            mainElem.classList.remove('main');
            mainElem.classList.add('main');
          }
          if (sideElem) {
            sideElem.classList.remove('main-side');
          }
        }
      }) : null;

      visibleTocElem ?
      visibleTocElem.addEventListener('change', function(e) {
        if (e.target.checked) {
          if (tocElem) {
            fadeIn(tocElem, 200);
          }
        } else {
          if (tocElem) {
            fadeOut(tocElem, 200);
          }
        }
      }) : null;
    }
    



    
    var text, clip = new ClipboardJS('.anchor');
    var headers = singleContentsElem.querySelectorAll("h1, h2, h3, h4");

    
    var languagedir = JSON.parse("\"ltr\"");

    headers ? 
    headers.forEach(function (elem) {
      var size = parseInt(elem.tagName.substr(1), 10) * 2;
      var url = encodeURI(document.location.origin + document.location.pathname);
      var link = url + "#" + elem.getAttribute('id');
      var newElemOuter = document.createElement('span');
      newElemOuter.classList.add('anchor');
      newElemOuter.classList.add('hide');
      newElemOuter.setAttribute('data-clipboard-text', link);
      newElemOuter.style.position = 'relative';

      var newElemInner = document.createElement('span');
      newElemInner.style.position = 'absolute';
      newElemInner.style.top = '50%';
      newElemInner.style.left = '0.75rem';
      newElemInner.style.transform = 'translateY(-50%)';
      newElemInner.innerHTML = `
<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="${32 - size}px" height="${32 - size}px"><path d="M 5.5625 0 C 4.136719 0 2.707031 0.542969 1.625 1.625 C -0.539063 3.789063 -0.539063 7.335938 1.625 9.5 L 5.28125 13.15625 C 5.667969 13.554688 6.304688 13.558594 6.703125 13.171875 C 7.101563 12.785156 7.105469 12.148438 6.71875 11.75 L 3.03125 8.0625 C 1.632813 6.664063 1.632813 4.429688 3.03125 3.03125 C 4.429688 1.632813 6.664063 1.632813 8.0625 3.03125 L 12.96875 7.9375 C 14.367188 9.335938 14.367188 11.570313 12.96875 12.96875 C 12.804688 13.132813 12.621094 13.25 12.4375 13.375 C 11.980469 13.6875 11.859375 14.308594 12.171875 14.765625 C 12.484375 15.222656 13.105469 15.34375 13.5625 15.03125 C 13.847656 14.835938 14.125 14.625 14.375 14.375 C 16.539063 12.210938 16.539063 8.664063 14.375 6.5 L 9.5 1.625 C 8.417969 0.542969 6.988281 0 5.5625 0 Z M 10.78125 8.875 C 10.738281 8.882813 10.695313 8.894531 10.65625 8.90625 C 10.507813 8.9375 10.371094 9 10.25 9.09375 C 10.039063 9.253906 9.820313 9.429688 9.625 9.625 C 7.460938 11.789063 7.460938 15.335938 9.625 17.5 L 14.5 22.375 C 16.664063 24.539063 20.210938 24.539063 22.375 22.375 C 24.539063 20.210938 24.539063 16.664063 22.375 14.5 L 18.71875 10.875 C 18.476563 10.578125 18.089844 10.441406 17.714844 10.527344 C 17.34375 10.613281 17.050781 10.90625 16.964844 11.277344 C 16.878906 11.652344 17.015625 12.039063 17.3125 12.28125 L 20.96875 15.9375 C 22.367188 17.335938 22.367188 19.570313 20.96875 20.96875 C 19.570313 22.367188 17.335938 22.367188 15.9375 20.96875 L 11.03125 16.0625 C 9.632813 14.664063 9.632813 12.429688 11.03125 11.03125 C 11.152344 10.90625 11.300781 10.820313 11.4375 10.71875 C 11.839844 10.472656 12.015625 9.976563 11.855469 9.53125 C 11.699219 9.085938 11.25 8.8125 10.78125 8.875 Z"/></svg>`;

      if (languagedir === "rtl") {
        newElemInner.style.left = '-2rem';
      } else {
        newElemInner.style.right = '-2rem';
      }

      newElemOuter.append(newElemInner);
      elem.append(newElemOuter);

      elem.addEventListener('mouseenter', function() {
        this.querySelector('.anchor').classList.remove('hide');
      });
      elem.addEventListener('mouseleave', function () {
        this.querySelector('.anchor').classList.add('hide');
      });
    }) : null;

    document.querySelectorAll('.anchor').forEach(function(elem) {
      elem.addEventListener('mouseleave', function() {
        elem.setAttribute('aria-label', null);
        elem.classList.remove('tooltipped');
        elem.classList.remove('tooltipped-s');
        elem.classList.remove('tooltipped-w');
      });
    });

    clip.on('success', function (e) {
      e.clearSelection();
      e.trigger.setAttribute('aria-label', 'Link copied to clipboard!');
      e.trigger.classList.add('tooltipped');
      e.trigger.classList.add('tooltipped-s');
    });
    // =================================================================



    
    
    var lib = JSON.parse("null");

    if (lib && lib.includes('mermaid')) {
      
      var themeVariant = localStorage.getItem('theme') || JSON.parse("\"dark\"");

      if (themeVariant === "dark" || themeVariant === "hacker") {
        mermaid.initialize({ theme: 'dark' });
      } else {
        mermaid.initialize({ theme: 'default' });
      }
      
      var mermaids = [];
      [].push.apply(mermaids, document.getElementsByClassName('language-mermaid'));
      mermaids.forEach(function(elem) {
        var elemParentNode = elem.parentNode;

        if (elemParentNode !== document.body) {
          elemParentNode.parentNode.insertBefore(elem, elemParentNode);
          elemParentNode.parentNode.removeChild(elemParentNode);
        }

        var newElemWrapper = document.createElement('div');
        newElemWrapper.classList.add('mermaid');
        newElemWrapper.style.padding = '34px 4px 6px';
        newElemWrapper.innerHTML = elem.innerHTML;
        elem.replaceWith(newElemWrapper);
      });
    }
    

    

    
    if (lib && lib.includes('katex')) {
      var mathElements = document.getElementsByClassName('math');
      var options = {
        delimiters: [
          { left: "$$", right: "$$", display: true },
          { left: "\\[", right: "\\]", display: true },
          { left: "$", right: "$", display: false },
          { left: "\\(", right: "\\)", display: false }
        ],
      };

      renderMathInElement(document.querySelector('.single__contents'), options);
    }
    



    
    if (lib && lib.includes('flowchartjs')) {
      
      var options = JSON.parse("{\"arrow-end\":\"block\",\"element-color\":\"black\",\"fill\":\"white\",\"flowstate\":{\"approved\":{\"fill\":\"#58C4A3\",\"font-size\":12,\"no-text\":\"n/a\",\"yes-text\":\"APPROVED\"},\"current\":{\"fill\":\"yellow\",\"font-color\":\"red\",\"font-weight\":\"bold\"},\"future\":{\"fill\":\"#FFFF99\"},\"invalid\":{\"fill\":\"#444444\"},\"past\":{\"fill\":\"#CCCCCC\",\"font-size\":12},\"rejected\":{\"fill\":\"#C45879\",\"font-size\":12,\"no-text\":\"REJECTED\",\"yes-text\":\"n/a\"},\"request\":{\"fill\":\"blue\"}},\"font-color\":\"black\",\"font-size\":14,\"line-color\":\"black\",\"line-length\":50,\"line-width\":3,\"no-text\":\"no\",\"scale\":1,\"symbols\":{\"end\":{\"class\":\"end-element\"},\"start\":{\"element-color\":\"green\",\"fill\":\"yellow\",\"font-color\":\"red\"}},\"text-margin\":10,\"x\":0,\"y\":0,\"yes-text\":\"yes\"}");
      var jsonContent = null;

      var flowchartPrefix = "language-flowchart";
      var index = 0;
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + flowchartPrefix + "]"), function(x){
          x.style.display = 'none'
          x.parentNode.style.backgroundColor = "transparent"
          jsonContent = x.innerText;

          var node0 = document.createElement('div');
          node0.id = 'flowchart' + index;
          x.parentNode.insertBefore(node0, x);

          var diagram = flowchart.parse(jsonContent);
          diagram.drawSVG("flowchart"+index, options);

          index +=1;
      });      
    }
    

    

    
    document.querySelectorAll("mjx-container").forEach(function (x) {
      x.parentElement.classList += 'has-jax'
    });
    



    
    if (lib && lib.includes('msc')) {
      
      var options = JSON.parse("{\"theme\":\"hand\"}");
      var jsonContent = null;

      var index = 0;
      var chartPrefix = "language-msc";
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + chartPrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        jsonContent = x.innerText;
        var node0 = document.createElement('div');
        node0.id = 'msc' + index;
        x.parentNode.insertBefore(node0, x);
        var diagram = Diagram.parse(jsonContent);
        diagram.drawSVG("msc" + index, options);
        index += 1;
      });
    }
    



    
    if (lib && lib.includes('chart')) {
      var borderColor = "#666";
      var bgColor = "#ddd";
      var borderWidth = 2;

      Chart.defaults.global.elements.rectangle.borderWidth = borderWidth;
      Chart.defaults.global.elements.rectangle.borderColor = borderColor;
      Chart.defaults.global.elements.rectangle.backgroundColor = bgColor;

      Chart.defaults.global.elements.line.borderWidth = borderWidth;
      Chart.defaults.global.elements.line.borderColor = borderColor;
      Chart.defaults.global.elements.line.backgroundColor = bgColor;

      Chart.defaults.global.elements.point.borderWidth = borderWidth;
      Chart.defaults.global.elements.point.borderColor = borderColor;
      Chart.defaults.global.elements.point.backgroundColor = bgColor;

      var chartPrefix = "language-chart";
      var index = 0;
      var jsonContent = null;

      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + chartPrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        jsonContent = x.innerText;
        var node0 = document.createElement('canvas');
        var source = null;
        node0.height = 200;
        node0.style.height = 200;
        node0.id = 'myChart' + index;
        source = JSON.parse(jsonContent);
        x.parentNode.insertBefore(node0, x);
        var ctx = document.getElementById('myChart' + index).getContext('2d');
        var myChart = new Chart(ctx, source);
        index += 1;
      });            
    }
    



    
    if (lib && lib.includes('wavedrom')) {
      var wavePrefix = "language-wave";
      var index = 0;
      var jsonContent = null;
      
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + wavePrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        jsonContent = x.innerText;
        var node0 = document.createElement('div');
        var source = null;
        node0.id = 'WaveDrom_Display_' + index;
        source = JSON.parse(jsonContent);
        x.parentNode.insertBefore(node0, x);
        WaveDrom.RenderWaveForm(index, source, "WaveDrom_Display_");
        index += 1;
      });
    }
    



    
    if (lib && lib.includes('viz')) {
      var vizPrefix = "language-viz-";
      Array.prototype.forEach.call(document.querySelectorAll("[class^=" + vizPrefix + "]"), function (x) {
        x.style.display = 'none'
        x.parentNode.style.backgroundColor = "transparent"
        var engine;
        x.getAttribute("class").split(" ").forEach(function (cls) {
          if (cls.startsWith(vizPrefix)) {
            engine = cls.substr(vizPrefix.length);
          }
        });
        var viz = new Viz();
        viz.renderSVGElement(x.innerText, { engine: engine })
          .then(function (element) {
            element.style.width = "100%";
            x.parentNode.insertBefore(element, x);
          })
      });
    }
    
    
  }
</script>


            
            <footer class="footer">
    
<div class="dropdown">
  <button class="dropdown-trigger" aria-label="Select Language Button">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M12.65 15.67c.14-.36.05-.77-.23-1.05l-2.09-2.06.03-.03c1.74-1.94 2.98-4.17 3.71-6.53h1.94c.54 0 .99-.45.99-.99v-.02c0-.54-.45-.99-.99-.99H10V3c0-.55-.45-1-1-1s-1 .45-1 1v1H1.99c-.54 0-.99.45-.99.99 0 .55.45.99.99.99h10.18C11.5 7.92 10.44 9.75 9 11.35c-.81-.89-1.49-1.86-2.06-2.88-.16-.29-.45-.47-.78-.47-.69 0-1.13.75-.79 1.35.63 1.13 1.4 2.21 2.3 3.21L3.3 16.87c-.4.39-.4 1.03 0 1.42.39.39 1.02.39 1.42 0L9 14l2.02 2.02c.51.51 1.38.32 1.63-.35zM17.5 10c-.6 0-1.14.37-1.35.94l-3.67 9.8c-.24.61.22 1.26.87 1.26.39 0 .74-.24.88-.61l.89-2.39h4.75l.9 2.39c.14.36.49.61.88.61.65 0 1.11-.65.88-1.26l-3.67-9.8c-.22-.57-.76-.94-1.36-.94zm-1.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>
  </button>
  <div class="dropdown-content">
    
    
    
      
      
        
      
        
        
          
            
              <a href="https://yyyIce.github.io/zh/posts/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8docker/" data-lang="zh" class="dropdown-item is-active">ç®€ä½“ä¸­æ–‡</a>
            
          
        
      
    
  </div>
</div>

    
<div class="footer__social">
  <div class="social">
    
            
    
            
    
            
    
      
      <a href="yyyIce727@163.com" title="email" aria-label="email">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path fill="currentColor" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-.4 4.25l-7.07 4.42c-.32.2-.74.2-1.06 0L4.4 8.25c-.25-.16-.4-.43-.4-.72 0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72 0 .29-.15.56-.4.72z"/></svg>
      </a>
            
    
            
    
            
    
      
      <a href="https://yyyIce.github.io/" title="github" aria-label="github">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 24 24" version="1.1">
<g id="surface3680">
<path fill="currentColor" d="M 10.898438 2.101562 C 6.300781 2.601562 2.601562 6.300781 2.101562 10.800781 C 1.601562 15.5 4.300781 19.699219 8.398438 21.300781 C 8.699219 21.398438 9 21.199219 9 20.800781 L 9 19.199219 C 9 19.199219 8.601562 19.300781 8.101562 19.300781 C 6.699219 19.300781 6.101562 18.101562 6 17.398438 C 5.898438 17 5.699219 16.699219 5.398438 16.398438 C 5.101562 16.300781 5 16.300781 5 16.199219 C 5 16 5.300781 16 5.398438 16 C 6 16 6.5 16.699219 6.699219 17 C 7.199219 17.800781 7.800781 18 8.101562 18 C 8.5 18 8.800781 17.898438 9 17.800781 C 9.101562 17.101562 9.398438 16.398438 10 16 C 7.699219 15.5 6 14.199219 6 12 C 6 10.898438 6.5 9.800781 7.199219 9 C 7.101562 8.800781 7 8.300781 7 7.601562 C 7 7.199219 7 6.601562 7.300781 6 C 7.300781 6 8.699219 6 10.101562 7.300781 C 10.601562 7.101562 11.300781 7 12 7 C 12.699219 7 13.398438 7.101562 14 7.300781 C 15.300781 6 16.800781 6 16.800781 6 C 17 6.601562 17 7.199219 17 7.601562 C 17 8.398438 16.898438 8.800781 16.800781 9 C 17.5 9.800781 18 10.800781 18 12 C 18 14.199219 16.300781 15.5 14 16 C 14.601562 16.5 15 17.398438 15 18.300781 L 15 20.898438 C 15 21.199219 15.300781 21.5 15.699219 21.398438 C 19.398438 19.898438 22 16.300781 22 12.101562 C 22 6.101562 16.898438 1.398438 10.898438 2.101562 Z M 10.898438 2.101562 "/>
</g>
</svg>

      </a>
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
            
    
      
      <a href="http://example.org/" title="weibo" aria-label="weibo">
        <svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M 16.28125 3.8125 C 16.054688 3.828125 15.816406 3.859375 15.59375 3.90625 C 15.179688 3.996094 14.910156 4.402344 15 4.8125 C 15.085938 5.226563 15.492188 5.496094 15.90625 5.40625 C 17.179688 5.136719 18.566406 5.53125 19.5 6.5625 C 20.433594 7.597656 20.679688 9.011719 20.28125 10.25 C 20.152344 10.652344 20.378906 11.089844 20.78125 11.21875 C 21.183594 11.347656 21.617188 11.121094 21.75 10.71875 C 22.3125 8.976563 21.96875 7.015625 20.65625 5.5625 C 19.671875 4.46875 18.296875 3.875 16.9375 3.8125 C 16.710938 3.800781 16.507813 3.796875 16.28125 3.8125 Z M 10.0625 6.09375 C 8.667969 6.242188 6.699219 7.332031 4.96875 9.0625 C 3.082031 10.949219 2 12.957031 2 14.6875 C 2 17.996094 6.226563 20 10.375 20 C 15.8125 20 19.4375 16.820313 19.4375 14.3125 C 19.4375 12.796875 18.179688 11.949219 17.03125 11.59375 C 16.75 11.507813 16.539063 11.464844 16.6875 11.09375 C 17.007813 10.289063 17.066406 9.589844 16.71875 9.09375 C 16.070313 8.164063 14.253906 8.210938 12.21875 9.0625 C 12.21875 9.0625 11.585938 9.351563 11.75 8.84375 C 12.0625 7.835938 12.019531 6.988281 11.53125 6.5 C 11.1875 6.152344 10.695313 6.027344 10.0625 6.09375 Z M 16.8125 6.5 C 16.589844 6.488281 16.375 6.515625 16.15625 6.5625 C 15.800781 6.636719 15.578125 7.019531 15.65625 7.375 C 15.734375 7.730469 16.082031 7.953125 16.4375 7.875 C 16.863281 7.785156 17.34375 7.902344 17.65625 8.25 C 17.96875 8.597656 18.042969 9.054688 17.90625 9.46875 C 17.792969 9.816406 17.964844 10.199219 18.3125 10.3125 C 18.660156 10.421875 19.046875 10.253906 19.15625 9.90625 C 19.429688 9.058594 19.265625 8.085938 18.625 7.375 C 18.144531 6.84375 17.476563 6.53125 16.8125 6.5 Z M 10.8125 10.90625 C 13.582031 11.003906 15.8125 12.378906 16 14.28125 C 16.214844 16.457031 13.71875 18.484375 10.40625 18.8125 C 7.09375 19.140625 4.214844 17.640625 4 15.46875 C 3.785156 13.292969 6.316406 11.265625 9.625 10.9375 C 10.039063 10.898438 10.417969 10.890625 10.8125 10.90625 Z M 8.9375 13 C 7.804688 13.101563 6.734375 13.75 6.25 14.6875 C 5.589844 15.964844 6.242188 17.378906 7.75 17.84375 C 9.308594 18.324219 11.140625 17.597656 11.78125 16.21875 C 12.410156 14.871094 11.605469 13.472656 10.0625 13.09375 C 9.691406 13 9.316406 12.964844 8.9375 13 Z M 8.21875 15.0625 C 8.351563 15.066406 8.472656 15.109375 8.59375 15.15625 C 9.082031 15.355469 9.234375 15.878906 8.9375 16.34375 C 8.632813 16.804688 7.988281 17.027344 7.5 16.8125 C 7.019531 16.601563 6.882813 16.074219 7.1875 15.625 C 7.414063 15.289063 7.824219 15.058594 8.21875 15.0625 Z"/></svg>
      </a>
            
    
            
    
            
    
            
    
      
      <a href="http://example.org/" title="zhihu" aria-label="zhihu">
        <svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"><path fill="currentColor" d="M 5.921875 2.9511719 C 5.5336094 2.9815469 5.1832344 3.2390625 5.0527344 3.6328125 L 3.6835938 7.7363281 C 3.5085938 8.2593281 3.7924062 8.825 4.3164062 9 C 4.8404063 9.175 5.4050781 8.8911875 5.5800781 8.3671875 L 6.0351562 7 L 6.9941406 7 L 6.9941406 10.222656 C 6.9941406 10.845846 6.9644144 11.431442 6.9199219 12 L 5 12 A 1.0001 1.0001 0 1 0 5 14 L 6.6367188 14 C 6.1575971 16.260332 5.1601574 17.989071 3.4179688 19.189453 C 2.9979688 19.479453 2.8798125 20.049188 3.1328125 20.492188 C 3.4258125 21.004188 4.0960781 21.153359 4.5800781 20.818359 C 6.0994455 19.769009 7.1700075 18.397613 7.8808594 16.720703 A 1.0001 1.0001 0 0 0 8.0449219 17.601562 L 9.5117188 19.59375 A 1.0002375 1.0002375 0 1 0 11.123047 18.408203 L 9.65625 16.416016 A 1.0001 1.0001 0 0 0 8.7929688 15.998047 A 1.0001 1.0001 0 0 0 7.9921875 16.472656 C 8.2917972 15.713486 8.5082238 14.883111 8.6699219 14 L 10 14 A 1.0001 1.0001 0 1 0 10 12 L 8.9316406 12 C 8.9726972 11.4285 8.9941406 10.836947 8.9941406 10.222656 L 8.9941406 7 L 10 7 A 1.0001 1.0001 0 1 0 10 5 L 6.7011719 5 L 6.9472656 4.2636719 C 7.1222656 3.7406719 6.8404063 3.175 6.3164062 3 C 6.1856563 2.95625 6.0512969 2.9410469 5.921875 2.9511719 z M 14 5 A 1.0001 1.0001 0 0 0 13 6 L 13 17 A 1.0001 1.0001 0 0 0 14 18 L 15 18 L 15 20 A 1.0001 1.0001 0 0 0 16.707031 20.707031 L 19.414062 18 L 21 18 A 1.0001 1.0001 0 0 0 22 17 L 22 6 A 1.0001 1.0001 0 0 0 21 5 L 14 5 z M 15 7 L 20 7 L 20 16 L 19 16 A 1.0001 1.0001 0 0 0 18.292969 16.292969 L 17 17.585938 L 17 17 A 1.0001 1.0001 0 0 0 16 16 L 15 16 L 15 7 z"/></svg>
      </a>
            
    
    
  
  
    
      <a href="https://yyyIce.github.io/zh/posts/index.xml" type="application/rss+xml" title="RSS" aria-label="RSS Feed Link">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><circle fill="currentColor" cx="6.18" cy="17.82" r="2.18"/><path fill="currentColor" d="M5.59 10.23c-.84-.14-1.59.55-1.59 1.4 0 .71.53 1.28 1.23 1.4 2.92.51 5.22 2.82 5.74 5.74.12.7.69 1.23 1.4 1.23.85 0 1.54-.75 1.41-1.59-.68-4.2-3.99-7.51-8.19-8.18zm-.03-5.71C4.73 4.43 4 5.1 4 5.93c0 .73.55 1.33 1.27 1.4 6.01.6 10.79 5.38 11.39 11.39.07.73.67 1.28 1.4 1.28.84 0 1.5-.73 1.42-1.56-.73-7.34-6.57-13.19-13.92-13.92z"/></svg>
      </a>
    
  


  </div>
</div>

    
<div id="gtt">
  <div class="gtt">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M8.12 14.71L12 10.83l3.88 3.88c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L12.7 8.71c-.39-.39-1.02-.39-1.41 0L6.7 13.3c-.39.39-.39 1.02 0 1.41.39.38 1.03.39 1.42 0z"/></svg>
  </div>
</div>

    <hr />

    <div class="basicflex flexwrap">
        
            
        
            
        
    </div>

    <div class="footer__poweredby">
        
  <div class="busuanzi">
    
    
      <div class="busuanzi__item">
        <span class="busuanzi__item--label">
          æ€»è®¿å®¢
        </span>
        <span id="busuanzi_value_site_uv" class="busuanzi__item--number">...</span>
      </div>
    

    
      <div class="busuanzi__item">
        <span class="busuanzi__item--label">
          æ€»æµè§ˆ
        </span>
        <span id="busuanzi_value_site_pv" class="busuanzi__item--number">...</span>
      </div>
    

  </div>

                
            <p class="caption">
                
                    Â©2022, All Rights Reserved
                
            </p>
        

        
            <p class="caption">Powered by <a href="https://gohugo.io/" target="_blank" rel="noreferrer">Hugo</a> and the <a href="https://github.com/zzossig/hugo-theme-zzo" target="_blank" rel="noreferrer">Zzo theme</a></p>
        
        
    </div> 
</footer>
        </div>
        





<div class="wrapper__right hide" data-pad="true" dir="ltr">
  <script>document.querySelector('.wrapper__right').classList.remove('hide')</script>
  
</div>

    </div>
</body>

</html>